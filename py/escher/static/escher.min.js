!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(function(){try{return require("@jupyter-widgets/base")}catch(t){}}()):"function"==typeof define&&define.amd?define(["@jupyter-widgets/base"],e):"object"==typeof exports?exports.escher=e(function(){try{return require("@jupyter-widgets/base")}catch(t){}}()):t.escher=e(t["@jupyter-widgets/base"])}(window,function(r){return o={},i.m=n=[function(t,e,n){"use strict";n.r(e);function i(t){var e=t+="",n=e.indexOf(":");return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),o.hasOwnProperty(e)?{space:o[e],local:t}:t}var r="http://www.w3.org/1999/xhtml",o={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(t){var e=i(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(n){return function(){var t=this.ownerDocument,e=this.namespaceURI;return e===r&&t.documentElement.namespaceURI===r?t.createElement(n):t.createElementNS(e,n)}})(e)}function s(){}function h(t){return null==t?s:function(){return this.querySelector(t)}}function c(){return[]}function u(t){return null==t?c:function(){return this.querySelectorAll(t)}}function d(t){return function(){return this.matches(t)}}function l(t){return new Array(t.length)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function v(t,e,n,r,i,o){for(var a,s=0,c=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new p(t,o[s]);for(;s<c;++s)(a=e[s])&&(i[s]=a)}function w(t,e,n,r,i,o,a){var s,c,l,u={},h=e.length,d=o.length,f=new Array(h);for(s=0;s<h;++s)(c=e[s])&&(f[s]=l="$"+a.call(c,c.__data__,s,e),l in u?i[s]=c:u[l]=c);for(s=0;s<d;++s)(c=u[l="$"+a.call(t,o[s],s,o)])?((r[s]=c).__data__=o[s],u[l]=null):n[s]=new p(t,o[s]);for(s=0;s<h;++s)(c=e[s])&&u[f[s]]===c&&(i[s]=c)}function f(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var A=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function g(t,e){return t.style.getPropertyValue(e)||A(t).getComputedStyle(t,null).getPropertyValue(e)}function b(t){return t.trim().split(/^|\s+/)}function m(t){return t.classList||new y(t)}function y(t){this._node=t,this._names=b(t.getAttribute("class")||"")}function _(t,e){for(var n=m(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function x(t,e){for(var n=m(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}y.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return 0<=this._names.indexOf(t)}};function M(){this.textContent=""}function C(){this.innerHTML=""}function E(){this.nextSibling&&this.parentNode.appendChild(this)}function B(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function I(){return null}function k(){var t=this.parentNode;t&&t.removeChild(this)}function D(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function T(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var N={},S=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(N={mouseenter:"mouseover",mouseleave:"mouseout"}));function Q(n,t,e){return n=L(n,t,e),function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}function L(n,r,i){return function(t){var e=S;S=t;try{n.call(this,this.__data__,r,i)}finally{S=e}}}function z(o){return function(){var t=this.__on;if(t){for(var e,n=0,r=-1,i=t.length;n<i;++n)e=t[n],o.type&&e.type!==o.type||e.name!==o.name?t[++r]=e:this.removeEventListener(e.type,e.listener,e.capture);++r?t.length=r:delete this.__on}}}function j(c,l,u){var h=N.hasOwnProperty(c.type)?Q:L;return function(t,e,n){var r,i=this.__on,o=h(l,e,n);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===c.type&&r.name===c.name)return this.removeEventListener(r.type,r.listener,r.capture),this.addEventListener(r.type,r.listener=o,r.capture=u),void(r.value=l);this.addEventListener(c.type,o,u),r={type:c.type,name:c.name,value:l,listener:o,capture:u},i?i.push(r):this.__on=[r]}}function F(t,e,n,r){var i=S;t.sourceEvent=S,S=t;try{return e.apply(n,r)}finally{S=i}}function O(t,e,n){var r=A(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}var U=[null];function Y(t,e){this._groups=t,this._parents=e}function W(){return new Y([[document.documentElement]],U)}Y.prototype=W.prototype={constructor:Y,select:function(t){"function"!=typeof t&&(t=h(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],c=s.length,l=r[i]=new Array(c),u=0;u<c;++u)(o=s[u])&&(a=t.call(o,o.__data__,u,s))&&("__data__"in o&&(a.__data__=o.__data__),l[u]=a);return new Y(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=u(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],c=s.length,l=0;l<c;++l)(a=s[l])&&(r.push(t.call(a,a.__data__,l,s)),i.push(a));return new Y(r,i)},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new Y(r,this._parents)},data:function(t,e){if(!t)return f=new Array(this.size()),l=-1,this.each(function(t){f[++l]=t}),f;var n=e?w:v,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,a=new Array(o),s=new Array(o),c=new Array(o),l=0;l<o;++l){var u=r[l],h=i[l],d=h.length,f=t.call(u,u&&u.__data__,l,r),p=f.length,A=s[l]=new Array(p),g=a[l]=new Array(p);n(u,h,A,g,c[l]=new Array(d),f,e);for(var b,m,y=0,_=0;y<p;++y)if(b=A[y]){for(_<=y&&(_=y+1);!(m=g[_])&&++_<p;);b._next=m||null}}return(a=new Y(a,r))._enter=s,a._exit=c,a},enter:function(){return new Y(this._enter||this._groups.map(l),this._parents)},exit:function(){return new Y(this._exit||this._groups.map(l),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=e[s],u=n[s],h=l.length,d=a[s]=new Array(h),f=0;f<h;++f)(c=l[f]||u[f])&&(d[f]=c);for(;s<r;++s)a[s]=e[s];return new Y(a,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];0<=--o;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(n){function t(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}n=n||f;for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,s=e[o],c=s.length,l=i[o]=new Array(c),u=0;u<c;++u)(a=s[u])&&(l[u]=a);l.sort(t)}return new Y(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=i(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}:function(e,n){return function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))},style:function(t,e,n){return 1<arguments.length?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(e,n,r){return function(){var t=n.apply(this,arguments);null==t?this.style.removeProperty(e):this.style.setProperty(e,t,r)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):g(this.node(),t)},property:function(t,e){return 1<arguments.length?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(e,n){return function(){var t=n.apply(this,arguments);null==t?delete this[e]:this[e]=t}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var n=b(t+"");if(arguments.length<2){for(var r=m(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?_:x)(this,t)}}:e?function(t){return function(){_(this,t)}}:function(t){return function(){x(this,t)}})(n,e))},text:function(t){return arguments.length?this.each(null==t?M:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?C:("function"==typeof t?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(E)},lower:function(){return this.each(B)},append:function(t){var e="function"==typeof t?t:a(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:a(t),r=null==e?I:"function"==typeof e?e:h(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(k)},clone:function(t){return this.select(t?T:D)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return 0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?j:z,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var c,l=0,u=s.length;l<u;++l)for(r=0,c=s[l];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return O(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return O(this,t,e)}})(t,e))}};function G(t){return"string"==typeof t?new Y([[document.querySelector(t)]],[document.documentElement]):new Y([[t]],U)}function R(t){return G(a(t).call(document.documentElement))}var P=W,H=0;function V(){return new Z}function Z(){this._="@"+(++H).toString(36)}Z.prototype=V.prototype={constructor:Z,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function K(){for(var t,e=S;t=e.sourceEvent;)e=t;return e}function J(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function X(t){var e=K();return e.changedTouches&&(e=e.changedTouches[0]),J(t,e)}function q(t){return"string"==typeof t?new Y([document.querySelectorAll(t)],[document.documentElement]):new Y([null==t?[]:t],U)}function $(t,e,n){arguments.length<3&&(n=e,e=K().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return J(t,r);return null}function tt(t,e){null==e&&(e=K().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=J(t,e[n]);return i}n.d(e,"create",function(){return R}),n.d(e,"creator",function(){return a}),n.d(e,"local",function(){return V}),n.d(e,"matcher",function(){return d}),n.d(e,"mouse",function(){return X}),n.d(e,"namespace",function(){return i}),n.d(e,"namespaces",function(){return o}),n.d(e,"clientPoint",function(){return J}),n.d(e,"select",function(){return G}),n.d(e,"selectAll",function(){return q}),n.d(e,"selection",function(){return P}),n.d(e,"selector",function(){return h}),n.d(e,"selectorAll",function(){return u}),n.d(e,"style",function(){return g}),n.d(e,"touch",function(){return $}),n.d(e,"touches",function(){return tt}),n.d(e,"window",function(){return A}),n.d(e,"event",function(){return S}),n.d(e,"customEvent",function(){return F})},function(t,e,n){"use strict";function r(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function l(){}var o=1/.7,a="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3})$/,h=/^#([0-9a-f]{6})$/,d=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),f=new RegExp("^rgb\\("+[c,c,c]+"\\)$"),p=new RegExp("^rgba\\("+[a,a,a,s]+"\\)$"),A=new RegExp("^rgba\\("+[c,c,c,s]+"\\)$"),g=new RegExp("^hsl\\("+[s,c,c]+"\\)$"),b=new RegExp("^hsla\\("+[s,c,c,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(t){var e;return t=(t+"").trim().toLowerCase(),(e=u.exec(t))?new M((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=h.exec(t))?_(parseInt(e[1],16)):(e=d.exec(t))?new M(e[1],e[2],e[3],1):(e=f.exec(t))?new M(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?v(e[1],e[2],e[3],e[4]):(e=A.exec(t))?v(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?E(e[1],e[2]/100,e[3]/100,1):(e=b.exec(t))?E(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?_(m[t]):"transparent"===t?new M(NaN,NaN,NaN,0):null}function _(t){return new M(t>>16&255,t>>8&255,255&t,1)}function v(t,e,n,r){return r<=0&&(t=e=n=NaN),new M(t,e,n,r)}function w(t){return t instanceof l||(t=y(t)),t?new M((t=t.rgb()).r,t.g,t.b,t.opacity):new M}function x(t,e,n,r){return 1===arguments.length?w(t):new M(t,e,n,null==r?1:r)}function M(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function C(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function E(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||1<=n?t=e=NaN:e<=0&&(t=NaN),new I(t,e,n,r)}function B(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof I)return new I(t.h,t.s,t.l,t.opacity);if(t instanceof l||(t=y(t)),!t)return new I;if(t instanceof I)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,c=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=c<.5?o+i:2-o-i,a*=60):s=0<c&&c<1?0:a,new I(a,s,c,t.opacity)}(t):new I(t,e,n,null==r?1:r)}function I(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function k(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(l,y,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(M,x,i(l,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new M(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+C(this.r)+C(this.g)+C(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(I,B,i(l,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new I(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new I(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new M(k(240<=t?t-240:120+t,i,r),k(t,i,r),k(t<120?240+t:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var D=Math.PI/180,T=180/Math.PI,N=.96422,S=1,Q=.82521,L=4/29,z=6/29,j=3*z*z,F=z*z*z;function O(t){if(t instanceof Y)return new Y(t.l,t.a,t.b,t.opacity);if(t instanceof Z)return K(t);t instanceof M||(t=w(t));var e,n,r=P(t.r),i=P(t.g),o=P(t.b),a=W((.2225045*r+.7168786*i+.0606169*o)/S);return r===i&&i===o?e=n=a:(e=W((.4360747*r+.3850649*i+.1430804*o)/N),n=W((.0139322*r+.0971045*i+.7141733*o)/Q)),new Y(116*a-16,500*(e-a),200*(a-n),t.opacity)}function U(t,e,n,r){return 1===arguments.length?O(t):new Y(t,e,n,null==r?1:r)}function Y(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function W(t){return F<t?Math.pow(t,1/3):t/j+L}function G(t){return z<t?t*t*t:j*(t-L)}function R(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function P(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function H(t){if(t instanceof Z)return new Z(t.h,t.c,t.l,t.opacity);if(t instanceof Y||(t=O(t)),0===t.a&&0===t.b)return new Z(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*T;return new Z(e<0?360+e:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function V(t,e,n,r){return 1===arguments.length?H(t):new Z(t,e,n,null==r?1:r)}function Z(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function K(t){if(isNaN(t.h))return new Y(t.l,0,0,t.opacity);var e=t.h*D;return new Y(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}r(Y,U,i(l,{brighter:function(t){return new Y(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Y(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new M(R(3.1338561*(e=N*G(e))-1.6168667*(t=S*G(t))-.4906146*(n=Q*G(n))),R(-.9787684*e+1.9161415*t+.033454*n),R(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),r(Z,V,i(l,{brighter:function(t){return new Z(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Z(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return K(this).rgb()}}));var J=1.78277,X=-.29227,q=-.90649,$=1.97294,tt=$*q,et=$*J,nt=J*X- -.14861*q;function rt(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof it)return new it(t.h,t.s,t.l,t.opacity);t instanceof M||(t=w(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(nt*r+tt*e-et*n)/(nt+tt-et),o=r-i,a=($*(n-i)-X*o)/q,s=Math.sqrt(a*a+o*o)/($*i*(1-i)),c=s?Math.atan2(a,o)*T-120:NaN;return new it(c<0?c+360:c,s,i,t.opacity)}(t):new it(t,e,n,null==r?1:r)}function it(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(it,rt,i(l,{brighter:function(t){return t=null==t?o:Math.pow(o,t),new it(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new it(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*D,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new M(255*(e+n*(-.14861*r+J*i)),255*(e+n*(X*r+q*i)),255*(e+$*r*n),this.opacity)}})),n.d(e,"a",function(){return y}),n.d(e,"f",function(){return x}),n.d(e,"d",function(){return B}),n.d(e,"e",function(){return U}),n.d(e,"c",function(){return V}),n.d(e,"b",function(){return rt})},function(t,e,n){"use strict";var c=n(1);function l(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}var i=function(t){return function(){return t}};function r(e,n){return function(t){return e+t*n}}function o(t,e){var n=e-t;return n?r(t,180<n||n<-180?n-360*Math.round(n/360):n):i(isNaN(t)?e:t)}function s(n){return 1==(n=+n)?u:function(t,e){return e-t?function(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(t){return Math.pow(e+t*n,r)}}(t,e,n):i(isNaN(t)?e:t)}}function u(t,e){var n=e-t;return n?r(t,n):i(isNaN(t)?e:t)}var a=function t(e){var a=s(e);function n(e,t){var n=a((e=Object(c.f)(e)).r,(t=Object(c.f)(t)).r),r=a(e.g,t.g),i=a(e.b,t.b),o=u(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=r(t),e.b=i(t),e.opacity=o(t),e+""}}return n.gamma=t,n}(1);function h(s){return function(t){var e,n,r=t.length,i=new Array(r),o=new Array(r),a=new Array(r);for(e=0;e<r;++e)n=Object(c.f)(t[e]),i[e]=n.r||0,o[e]=n.g||0,a[e]=n.b||0;return i=s(i),o=s(o),a=s(a),n.opacity=1,function(t){return n.r=i(t),n.g=o(t),n.b=a(t),n+""}}}function d(e,n){return n-=e=+e,function(t){return e+n*t}}h(function(a){var s=a.length-1;return function(t){var e=t<=0?t=0:1<=t?s-(t=1):Math.floor(t*s),n=a[e],r=a[e+1],i=0<e?a[e-1]:2*n-r,o=e<s-1?a[e+2]:2*r-n;return l((t-e/s)*s,i,n,r,o)}}),h(function(a){var s=a.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*s),n=a[(e+s-1)%s],r=a[e%s],i=a[(e+1)%s],o=a[(e+2)%s];return l((t-e/s)*s,n,r,i,o)}});var f=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,p=new RegExp(f.source,"g");function A(t,r){var e,n,i,o=f.lastIndex=p.lastIndex=0,a=-1,s=[],c=[];for(t+="",r+="";(e=f.exec(t))&&(n=p.exec(r));)(i=n.index)>o&&(i=r.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(e=e[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,c.push({i:a,x:d(e,n)})),o=p.lastIndex;return o<r.length&&(i=r.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(t){return function(){return t}}(r):(r=c.length,function(t){for(var e,n=0;n<r;++n)s[(e=c[n]).i]=e.x(t);return s.join("")})}function g(e,n){return n-=e=+e,function(t){return Math.round(e+n*t)}}function b(t,e,n,r,i,o){var a,s,c;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(c=t*n+e*r)&&(n-=t*c,r-=e*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),t*r<e*n&&(t=-t,e=-e,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*x,skewX:Math.atan(c)*x,scaleX:a,scaleY:s}}var m,y,_,v,w=function(t,e){var n,r=typeof e;return null==e||"boolean"==r?i(e):("number"==r?d:"string"==r?(n=Object(c.a)(e))?(e=n,a):A:e instanceof c.a?a:e instanceof Date?function(e,n){var r=new Date;return n-=e=+e,function(t){return r.setTime(e+n*t),r}}:Array.isArray(e)?function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=w(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=w(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}:d)(t,e)},x=180/Math.PI,M={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function C(n,s,c,a){function l(t){return t.length?t.pop()+" ":""}return function(t,e){var i=[],o=[];return t=n(t),e=n(e),function(t,e,n,r,i,o){if(t!==n||e!==r){var a=i.push("translate(",null,s,null,c);o.push({i:a-4,x:d(t,n)},{i:a-2,x:d(e,r)})}else(n||r)&&i.push("translate("+n+s+r+c)}(t.translateX,t.translateY,e.translateX,e.translateY,i,o),function(t,e,n,r){t!==e?(180<t-e?e+=360:180<e-t&&(t+=360),r.push({i:n.push(l(n)+"rotate(",null,a)-2,x:d(t,e)})):e&&n.push(l(n)+"rotate("+e+a)}(t.rotate,e.rotate,i,o),function(t,e,n,r){t!==e?r.push({i:n.push(l(n)+"skewX(",null,a)-2,x:d(t,e)}):e&&n.push(l(n)+"skewX("+e+a)}(t.skewX,e.skewX,i,o),function(t,e,n,r,i,o){if(t!==n||e!==r){var a=i.push(l(i)+"scale(",null,",",null,")");o.push({i:a-4,x:d(t,n)},{i:a-2,x:d(e,r)})}else 1===n&&1===r||i.push(l(i)+"scale("+n+","+r+")")}(t.scaleX,t.scaleY,e.scaleX,e.scaleY,i,o),t=e=null,function(t){for(var e,n=-1,r=o.length;++n<r;)i[(e=o[n]).i]=e.x(t);return i.join("")}}}var E=C(function(t){return"none"===t?M:(m||(m=document.createElement("DIV"),y=document.documentElement,_=document.defaultView),m.style.transform=t,t=_.getComputedStyle(y.appendChild(m),null).getPropertyValue("transform"),y.removeChild(m),t=t.slice(7,-1).split(","),b(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),B=C(function(t){return null==t?M:((v=v||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",t),(t=v.transform.baseVal.consolidate())?(t=t.matrix,b(t.a,t.b,t.c,t.d,t.e,t.f)):M)},", ",")",")"),I=Math.SQRT2;function k(t){return((t=Math.exp(t))+1/t)/2}function D(t,e){var n,i,o=t[0],a=t[1],s=t[2],r=e[0],c=e[1],l=e[2],u=r-o,h=c-a,d=u*u+h*h;if(d<1e-12)i=Math.log(l/s)/I,n=function(t){return[o+t*u,a+t*h,s*Math.exp(I*t*i)]};else{var f=Math.sqrt(d),p=(l*l-s*s+4*d)/(2*s*2*f),A=(l*l-s*s-4*d)/(2*l*2*f),g=Math.log(Math.sqrt(p*p+1)-p),b=Math.log(Math.sqrt(A*A+1)-A);i=(b-g)/I,n=function(t){var e=t*i,n=k(g),r=s/(2*f)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(I*e+g)-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[o+r*u,a+r*h,s*n/k(I*e+g)]}}return n.duration=1e3*i,n}function T(a){return function(e,t){var n=a((e=Object(c.d)(e)).h,(t=Object(c.d)(t)).h),r=u(e.s,t.s),i=u(e.l,t.l),o=u(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(t),e.opacity=o(t),e+""}}}T(o),T(u);function N(a){return function(e,t){var n=a((e=Object(c.c)(e)).h,(t=Object(c.c)(t)).h),r=u(e.c,t.c),i=u(e.l,t.l),o=u(e.opacity,t.opacity);return function(t){return e.h=n(t),e.c=r(t),e.l=i(t),e.opacity=o(t),e+""}}}N(o),N(u);function S(s){return function t(a){function e(e,t){var n=s((e=Object(c.b)(e)).h,(t=Object(c.b)(t)).h),r=u(e.s,t.s),i=u(e.l,t.l),o=u(e.opacity,t.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=i(Math.pow(t,a)),e.opacity=o(t),e+""}}return a=+a,e.gamma=t,e}(1)}S(o);var Q=S(u);n.d(e,"a",function(){return w}),n.d(e,"c",function(){return d}),n.d(e,"e",function(){return g}),n.d(e,"f",function(){return A}),n.d(e,"g",function(){return E}),n.d(e,"h",function(){return B}),n.d(e,"i",function(){return D}),n.d(e,"d",function(){return a}),n.d(e,"b",function(){return Q})},function(t,e,n){"use strict";var o=n(21),l=n(4),i=n(16).json,a=n(16).text,c=n(14).csvParseRows,r=n(0).selection;try{var u=n(39).saveAs}catch(t){console.warn("Not a browser, so FileSaver.js not available.")}function h(){try{new Blob}catch(t){alert("Blob not supported")}}function s(t,e){return-1!==t.indexOf(e,t.length-e.length)}function d(n,t,r,e){if(e)return t&&console.warn("File "+t+" overridden by value."),void r.call(n,null,e);t?s(t,"json")?i(t,function(t,e){r.call(n,t,e)}):s(t,"css")?a(t,function(t,e){r.call(n,t,e)}):r.call(n,"Unrecognized file type",null):r.call(n,"No filename",null)}function f(t,e){var n=[];for(var r in t){var i=t[r];i[e]=r,n.push(i)}return n}function p(t){return l.isArray(t)?l.map(t,function(t){return p(t)}):l.isObject(t)?l.mapObject(t,function(t,e){return p(t)}):t}function A(t,e,n){return{x:Math.cos(-e)*(t.x-n.x)+Math.sin(-e)*(t.y-n.y)+n.x-t.x,y:-Math.sin(-e)*(t.x-n.x)+Math.cos(-e)*(t.y-n.y)+n.y-t.y}}function g(t){return t<-Math.PI?t+2*Math.floor((t-Math.PI)/(-2*Math.PI))*Math.PI:t>Math.PI?t-2*Math.floor((t+Math.PI)/(2*Math.PI))*Math.PI:t}function b(t){return Math.PI/180*t}function m(t){t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return t.length%2==1?t[e]:(t[e-1]+t[e])/2}function y(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function _(t){return t.ownerDocument}t.exports={set_options:function(t,e,n){if(null==t)return e;var r={};for(var i in e){var o=i in t&&null!==t[i]&&void 0!==t[i],a=o?t[i]:e[i];n&&i in n&&(a=parseFloat(a),isNaN(a)&&(o?(console.warn("Bad float for option "+i),a=parseFloat(e[i]),isNaN(a)&&(console.warn("Bad float for default "+i),a=null)):(console.warn("Bad float for default "+i),a=null))),r[i]=a}return r},remove_child_nodes:function(t){var e=t.node();for(;e.hasChildNodes();)e.removeChild(e.lastChild)},load_css:function(t,n){t&&a(t,function(t,e){t&&console.warn(t),n(e)});return!1},load_files:function(n,t,r){0===t.length&&r.call(n);var e=-1,i=t.length;for(;++e<t.length;)d(n,t[e].file,function(t,e){this.call(n,t,e),--i||r.call(n)}.bind(t[e].callback),t[e].value)},load_the_file:d,make_class:function(){var r;return function t(e){if(!(this instanceof t)){r=!0;var n=new t(arguments);return r=!1,n}"function"==typeof this.init&&this.init.apply(this,r?e:arguments)}},class_with_optional_new:function(t){return new Proxy(t,{apply:function(t,e,n){return new(Function.prototype.bind.apply(t,[null].concat(n)))}})},setup_defs:function(t,e){t.select("defs").remove();var n=t.append("defs"),r=n.node();return r.parentNode.insertBefore(r,r.parentNode.firstChild),n.append("style").attr("type","text/css").text(e),n},draw_an_object:function(t,e,n,r,i,o,a,s){var c={};for(var l in r)void 0===r[l]?console.warn("Undefined value for id "+l+" in object. Ignoring."):c[l]=r[l];var u=t.select(e).selectAll(n).data(f(c,i),function(t){return t[i]}),h=o?o(u.enter()).merge(u):u;a&&h.call(a);s&&u.exit().call(s)},draw_a_nested_object:function(t,e,n,r,i,o,a){var s=t.selectAll(e).data(function(t){return f(t[n],r)},function(t){return t[r]}),c=i?i(s.enter()).merge(s):s;o&&c.call(o);a&&s.exit().call(a)},make_array:function(t,e){var n=[];for(var r in t){var i=p(t[r]);i[e]=r,n.push(i)}return n},make_array_ref:f,compare_arrays:function(t,e){if(!t||!e)return!1;if(t.length!=e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!=e[n])return!1;return!0},arrayToObject:function(t){for(var e={},n=0,r=t.length;n<r;n++)for(var i=t[n],o=Object.keys(i),a=0,s=o.length;a<s;a++){var c=o[a];if(c in e)e[c][n]=i[c];else{for(var l=[],u=0;u<r;u++)l[u]=null;l[n]=i[c],e[c]=l}}return e},clone:p,extend:function(t,e,n){void 0===n&&(n=!1);for(var r in e){if(r in t&&!n)throw new Error("Attribute "+r+" already in object.");t[r]=e[r]}},uniqueConcat:function(t){var e=[];return t.forEach(function(t){t.forEach(function(t){e.indexOf(t)<0&&e.push(t)})}),e},unique_strings_array:function(t){for(var e=[],n=0,r=t.length;n<r;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e},debounce:function(r,i,o){var a;return function(){var t=this,e=arguments,n=o&&!a;clearTimeout(a),a=setTimeout(function(){a=null,o||r.apply(t,e)},i),n&&r.apply(t,e)}},object_slice_for_ids:function(t,e){var n={},r=-1;for(;++r<e.length;)n[e[r]]=p(t[e[r]]);e.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset");return n},object_slice_for_ids_ref:function(t,e){var n={},r=-1;for(;++r<e.length;)n[e[r]]=t[e[r]];e.length!==Object.keys(n).length&&console.warn("did not find correct reaction subset");return n},c_plus_c:function(t,e){return null!==t&&null!==e&&void 0!==t&&void 0!==e?{x:t.x+e.x,y:t.y+e.y}:null},c_minus_c:function(t,e){return null!==t&&null!==e&&void 0!==t&&void 0!==e?{x:t.x-e.x,y:t.y-e.y}:null},c_times_scalar:function(t,e){return{x:t.x*e,y:t.y*e}},download_json:function(t,e){h();var n=JSON.stringify(t),r=new Blob([n],{type:"application/json"});u(r,e+".json")},load_json:function(t,r,e,n){window.File&&window.FileReader&&window.FileList&&window.Blob||r("The File APIs are not fully supported in this browser.",null);var i=new window.FileReader;if(i.onload=function(t){var e,n=t.target.result;try{e=JSON.parse(n)}catch(t){return void r(t,null)}r(null,e)},null!=e)try{e()}catch(t){console.warn(t)}i.onabort=function(t){try{n()}catch(t){console.warn(t)}},i.onerror=function(t){try{n()}catch(t){console.warn(t)}},i.readAsText(t)},load_json_or_csv:function(t,i,o,e,n,r){function a(t){var e,n,r=t.target.result;try{e=JSON.parse(r)}catch(t){n="JSON error: "+t;try{e=i(c(r))}catch(t){return void o(n+"\nCSV error: "+t,null)}}o(null,e)}if(null!=r)return console.warn("Debugging load_json_or_csv"),a(r);window.File&&window.FileReader&&window.FileList&&window.Blob||o("The File APIs are not fully supported in this browser.",null);var s=new window.FileReader;if(null!=e)try{e()}catch(t){console.warn(t)}s.onabort=function(t){try{n()}catch(t){console.warn(t)}},s.onerror=function(t){try{n()}catch(t){console.warn(t)}},s.onload=a,s.readAsText(t)},downloadSvg:function(t,e,n){h();var r=(new XMLSerializer).serializeToString(e.node());n&&(r=o.xml(r));r='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+r;var i=new Blob([r],{type:"image/svg+xml"});u(i,t+".svg")},downloadPng:function(e,t){h();var n=(new XMLSerializer).serializeToString(t.node());n='<?xml version="1.0" encoding="utf-8"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"\n "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n'+n;var r=document.createElement("canvas"),i=r.getContext("2d"),o=t.node().getBBox(),a=o.width+o.x,s=o.height+o.y;a<1e4&&s<1e4?(r.width=a,r.height=s):r.width>r.height?(r.width=1e4,r.height=s/a*1e4):(r.width=a/s*1e4,r.height=1e4);var c=new Image;c.src="data:image/svg+xml;base64,"+btoa(n),c.onload=function(){i.fillStyle="#FFF",i.fillRect(0,0,r.width,r.height),i.drawImage(c,0,0,r.width,r.height),r.toBlob(function(t){u(t,e+".png")})}},rotate_coords_recursive:function(t,e,n){return t.map(function(t){return A(t,e,n)})},rotate_coords:A,get_angle:function(t){var e=t[1].x-t[0].x,n=t[1].y-t[0].y;return 0==e&&0<=n?Math.PI/2:0==e&&n<0?3*Math.PI/2:0<=e&&0<=n?Math.atan(n/e):0<=e?Math.atan(n/e)+2*Math.PI:Math.atan(n/e)+Math.PI},to_degrees:function(t){return 180*t/Math.PI},angleNorm:g,to_radians:b,to_radians_norm:function(t){return g(b(t))},angle_for_event:function(t,e,n){var r=Math.atan2(e.x-n.x,n.y-e.y);return Math.atan2(e.x-n.x+t.x,n.y-e.y-t.y)-r},distance:function(t,e){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))},check_undefined:function(n,r){r.forEach(function(t,e){void 0===n[e]&&console.error("Argument is undefined: "+r[e])})},compartmentalize:function(t,e){return t+"_"+e},decompartmentalize:function(t){var e=/(.*)_([a-z0-9]{1,2})$/.exec(t);return null!==e?e.slice(1,3):[t,null]},mean:function(t){return t.reduce(function(t,e){return t+e})/t.length},median:m,quartiles:function(t){t.sort(function(t,e){return t-e});var e=Math.floor(t.length/2);return 1===t.length?[t[0],t[0],t[0]]:t.length%2==1?[m(t.slice(0,e)),t[e],m(t.slice(e+1))]:[m(t.slice(0,e)),(t[e-1]+t[e])/2,m(t.slice(e))]},random_characters:y,generate_map_id:function(){return y(12)},check_for_parent_tag:function(t,e){t instanceof r&&(t=t.node());for(;null!==t.parentNode;)if(void 0!==(t=t.parentNode).tagName&&t.tagName.toLowerCase()===e.toLowerCase())return!0;return!1},name_to_url:function(t,e){null!=e&&(e=e.replace(/^\/|\/$/g,""),t=[e,t].join("/"));return t.replace(/^\/|\/$/g,"")+".json"},get_document:_,get_window:function(t){return _(t).defaultView},d3_transform_catch:function(t){if(-1!==t.indexOf("skew")||-1!==t.indexOf("matrix"))throw new Error("d3_transform_catch does not work with skew or matrix");var e=/translate\s*\(\s*([0-9.-]+)\s*,\s*([0-9.-]+)\s*\)/.exec(t),n=l.isNull(e),r=n?0:Number(e[1]),i=n?0:Number(e[2]),o=/rotate\s*\(\s*([0-9.-]+)\s*\)/.exec(t),a=l.isNull(o)?0:Number(o[1]),s=/scale\s*\(\s*([0-9.-]+)\s*\)/.exec(t),c=l.isNull(s)?0:Number(s[1]);return{translate:[r,i],rotate:a,scale:c}}}},function(t,q,e){(function(K,J){var X;!function(){function n(){}var t="object"==typeof self&&self.self===self&&self||"object"==typeof K&&K.global===K&&K||this||{},e=t._,r=Array.prototype,a=Object.prototype,h="undefined"!=typeof Symbol?Symbol.prototype:null,i=r.push,c=r.slice,d=a.toString,o=a.hasOwnProperty,s=Array.isArray,l=Object.keys,u=Object.create,f=function(t){return t instanceof f?t:this instanceof f?void(this._wrapped=t):new f(t)};q.nodeType?t._=f:(!J.nodeType&&J.exports&&(q=J.exports=f),q._=f),f.VERSION="1.9.1";function p(i,o,t){if(void 0===o)return i;switch(null==t?3:t){case 1:return function(t){return i.call(o,t)};case 3:return function(t,e,n){return i.call(o,t,e,n)};case 4:return function(t,e,n,r){return i.call(o,t,e,n,r)}}return function(){return i.apply(o,arguments)}}function A(t,e,n){return f.iteratee!==g?f.iteratee(t,e):null==t?f.identity:f.isFunction(t)?p(t,e,n):f.isObject(t)&&!f.isArray(t)?f.matcher(t):f.property(t)}var g;f.iteratee=g=function(t,e){return A(t,e,1/0)};function b(i,o){return o=null==o?i.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+o];switch(o){case 0:return i.call(this,e);case 1:return i.call(this,arguments[0],e);case 2:return i.call(this,arguments[0],arguments[1],e)}var r=Array(o+1);for(n=0;n<o;n++)r[n]=arguments[n];return r[o]=e,i.apply(this,r)}}function m(t){if(!f.isObject(t))return{};if(u)return u(t);n.prototype=t;var e=new n;return n.prototype=null,e}function y(e){return function(t){return null==t?void 0:t[e]}}function _(t,e){return null!=t&&o.call(t,e)}function v(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function w(t){var e=M(t);return"number"==typeof e&&0<=e&&e<=x}var x=Math.pow(2,53)-1,M=y("length");f.each=f.forEach=function(t,e,n){var r,i;if(e=p(e,n),w(t))for(r=0,i=t.length;r<i;r++)e(t[r],r,t);else{var o=f.keys(t);for(r=0,i=o.length;r<i;r++)e(t[o[r]],o[r],t)}return t},f.map=f.collect=function(t,e,n){e=A(e,n);for(var r=!w(t)&&f.keys(t),i=(r||t).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o};function C(c){return function(t,e,n,r){var i=3<=arguments.length;return function(t,e,n,r){var i=!w(t)&&f.keys(t),o=(i||t).length,a=0<c?0:o-1;for(r||(n=t[i?i[a]:a],a+=c);0<=a&&a<o;a+=c){var s=i?i[a]:a;n=e(n,t[s],s,t)}return n}(t,p(e,r,4),n,i)}}f.reduce=f.foldl=f.inject=C(1),f.reduceRight=f.foldr=C(-1),f.find=f.detect=function(t,e,n){var r=(w(t)?f.findIndex:f.findKey)(t,e,n);if(void 0!==r&&-1!==r)return t[r]},f.filter=f.select=function(t,r,e){var i=[];return r=A(r,e),f.each(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i},f.reject=function(t,e,n){return f.filter(t,f.negate(A(e)),n)},f.every=f.all=function(t,e,n){e=A(e,n);for(var r=!w(t)&&f.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},f.some=f.any=function(t,e,n){e=A(e,n);for(var r=!w(t)&&f.keys(t),i=(r||t).length,o=0;o<i;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},f.contains=f.includes=f.include=function(t,e,n,r){return w(t)||(t=f.values(t)),"number"==typeof n&&!r||(n=0),0<=f.indexOf(t,e,n)},f.invoke=b(function(t,n,r){var i,o;return f.isFunction(n)?o=n:f.isArray(n)&&(i=n.slice(0,-1),n=n[n.length-1]),f.map(t,function(t){var e=o;if(!e){if(i&&i.length&&(t=v(t,i)),null==t)return;e=t[n]}return null==e?e:e.apply(t,r)})}),f.pluck=function(t,e){return f.map(t,f.property(e))},f.where=function(t,e){return f.filter(t,f.matcher(e))},f.findWhere=function(t,e){return f.find(t,f.matcher(e))},f.max=function(t,r,e){var n,i,o=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var s=0,c=(t=w(t)?t:f.values(t)).length;s<c;s++)null!=(n=t[s])&&o<n&&(o=n);else r=A(r,e),f.each(t,function(t,e,n){i=r(t,e,n),(a<i||i===-1/0&&o===-1/0)&&(o=t,a=i)});return o},f.min=function(t,r,e){var n,i,o=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var s=0,c=(t=w(t)?t:f.values(t)).length;s<c;s++)null!=(n=t[s])&&n<o&&(o=n);else r=A(r,e),f.each(t,function(t,e,n){((i=r(t,e,n))<a||i===1/0&&o===1/0)&&(o=t,a=i)});return o},f.shuffle=function(t){return f.sample(t,1/0)},f.sample=function(t,e,n){if(null==e||n)return w(t)||(t=f.values(t)),t[f.random(t.length-1)];var r=w(t)?f.clone(t):f.values(t),i=M(r);e=Math.max(Math.min(e,i),0);for(var o=i-1,a=0;a<e;a++){var s=f.random(a,o),c=r[a];r[a]=r[s],r[s]=c}return r.slice(0,e)},f.sortBy=function(t,r,e){var i=0;return r=A(r,e),f.pluck(f.map(t,function(t,e,n){return{value:t,index:i++,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};function E(a,e){return function(r,i,t){var o=e?[[],[]]:{};return i=A(i,t),f.each(r,function(t,e){var n=i(t,e,r);a(o,t,n)}),o}}f.groupBy=E(function(t,e,n){_(t,n)?t[n].push(e):t[n]=[e]}),f.indexBy=E(function(t,e,n){t[n]=e}),f.countBy=E(function(t,e,n){_(t,n)?t[n]++:t[n]=1});var B=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;f.toArray=function(t){return t?f.isArray(t)?c.call(t):f.isString(t)?t.match(B):w(t)?f.map(t,f.identity):f.values(t):[]},f.size=function(t){return null==t?0:w(t)?t.length:f.keys(t).length},f.partition=E(function(t,e,n){t[n?0:1].push(e)},!0),f.first=f.head=f.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:f.initial(t,t.length-e)},f.initial=function(t,e,n){return c.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},f.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:f.rest(t,Math.max(0,t.length-e))},f.rest=f.tail=f.drop=function(t,e,n){return c.call(t,null==e||n?1:e)},f.compact=function(t){return f.filter(t,Boolean)};var I=function(t,e,n,r){for(var i=(r=r||[]).length,o=0,a=M(t);o<a;o++){var s=t[o];if(w(s)&&(f.isArray(s)||f.isArguments(s)))if(e)for(var c=0,l=s.length;c<l;)r[i++]=s[c++];else I(s,e,n,r),i=r.length;else n||(r[i++]=s)}return r};f.flatten=function(t,e){return I(t,e,!1)},f.without=b(function(t,e){return f.difference(t,e)}),f.uniq=f.unique=function(t,e,n,r){f.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=A(n,r));for(var i=[],o=[],a=0,s=M(t);a<s;a++){var c=t[a],l=n?n(c,a,t):c;e&&!n?(a&&o===l||i.push(c),o=l):n?f.contains(o,l)||(o.push(l),i.push(c)):f.contains(i,c)||i.push(c)}return i},f.union=b(function(t){return f.uniq(I(t,!0,!0))}),f.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=M(t);r<i;r++){var o=t[r];if(!f.contains(e,o)){var a;for(a=1;a<n&&f.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},f.difference=b(function(t,e){return e=I(e,!0,!0),f.filter(t,function(t){return!f.contains(e,t)})}),f.unzip=function(t){for(var e=t&&f.max(t,M).length||0,n=Array(e),r=0;r<e;r++)n[r]=f.pluck(t,r);return n},f.zip=b(f.unzip),f.object=function(t,e){for(var n={},r=0,i=M(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};function k(o){return function(t,e,n){e=A(e,n);for(var r=M(t),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(e(t[i],i,t))return i;return-1}}f.findIndex=k(1),f.findLastIndex=k(-1),f.sortedIndex=function(t,e,n,r){for(var i=(n=A(n,r,1))(e),o=0,a=M(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o};function D(o,a,s){return function(t,e,n){var r=0,i=M(t);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(s&&n&&i)return t[n=s(t,e)]===e?n:-1;if(e!=e)return 0<=(n=a(c.call(t,r,i),f.isNaN))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(t[n]===e)return n;return-1}}f.indexOf=D(1,f.findIndex,f.sortedIndex),f.lastIndexOf=D(-1,f.findLastIndex),f.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||(e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},f.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(c.call(t,r,r+=e));return n};function T(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=m(t.prototype),a=t.apply(o,i);return f.isObject(a)?a:o}f.bind=b(function(e,n,r){if(!f.isFunction(e))throw new TypeError("Bind must be called on a function");var i=b(function(t){return T(e,i,n,this,r.concat(t))});return i}),f.partial=b(function(i,o){var a=f.partial.placeholder,s=function(){for(var t=0,e=o.length,n=Array(e),r=0;r<e;r++)n[r]=o[r]===a?arguments[t++]:o[r];for(;t<arguments.length;)n.push(arguments[t++]);return T(i,s,this,this,n)};return s}),(f.partial.placeholder=f).bindAll=b(function(t,e){var n=(e=I(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=f.bind(t[r],t)}}),f.memoize=function(r,i){var o=function(t){var e=o.cache,n=""+(i?i.apply(this,arguments):t);return _(e,n)||(e[n]=r.apply(this,arguments)),e[n]};return o.cache={},o},f.delay=b(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),f.defer=f.partial(f.delay,f,1),f.throttle=function(n,r,i){var o,a,s,c,l=0;i=i||{};function u(){l=!1===i.leading?0:f.now(),o=null,c=n.apply(a,s),o||(a=s=null)}function t(){var t=f.now();l||!1!==i.leading||(l=t);var e=r-(t-l);return a=this,s=arguments,e<=0||r<e?(o&&(clearTimeout(o),o=null),l=t,c=n.apply(a,s),o||(a=s=null)):o||!1===i.trailing||(o=setTimeout(u,e)),c}return t.cancel=function(){clearTimeout(o),l=0,o=a=s=null},t},f.debounce=function(n,r,i){function o(t,e){a=null,e&&(s=n.apply(t,e))}var a,s,t=b(function(t){if(a&&clearTimeout(a),i){var e=!a;a=setTimeout(o,r),e&&(s=n.apply(this,t))}else a=f.delay(o,r,this,t);return s});return t.cancel=function(){clearTimeout(a),a=null},t},f.wrap=function(t,e){return f.partial(e,t)},f.negate=function(t){return function(){return!t.apply(this,arguments)}},f.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},f.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},f.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},f.once=f.partial(f.before,2),f.restArguments=b;function N(t,e){var n=Q.length,r=t.constructor,i=f.isFunction(r)&&r.prototype||a,o="constructor";for(_(t,o)&&!f.contains(e,o)&&e.push(o);n--;)(o=Q[n])in t&&t[o]!==i[o]&&!f.contains(e,o)&&e.push(o)}var S=!{toString:null}.propertyIsEnumerable("toString"),Q=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];f.keys=function(t){if(!f.isObject(t))return[];if(l)return l(t);var e=[];for(var n in t)_(t,n)&&e.push(n);return S&&N(t,e),e},f.allKeys=function(t){if(!f.isObject(t))return[];var e=[];for(var n in t)e.push(n);return S&&N(t,e),e},f.values=function(t){for(var e=f.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r},f.mapObject=function(t,e,n){e=A(e,n);for(var r=f.keys(t),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=e(t[s],s,t)}return o},f.pairs=function(t){for(var e=f.keys(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},f.invert=function(t){for(var e={},n=f.keys(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e},f.functions=f.methods=function(t){var e=[];for(var n in t)f.isFunction(t[n])&&e.push(n);return e.sort()};function L(c,l){return function(t){var e=arguments.length;if(l&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],i=c(r),o=i.length,a=0;a<o;a++){var s=i[a];l&&void 0!==t[s]||(t[s]=r[s])}return t}}f.extend=L(f.allKeys),f.extendOwn=f.assign=L(f.keys),f.findKey=function(t,e,n){e=A(e,n);for(var r,i=f.keys(t),o=0,a=i.length;o<a;o++)if(e(t[r=i[o]],r,t))return r};function z(t,e,n){return e in n}var j,F;f.pick=b(function(t,e){var n={},r=e[0];if(null==t)return n;f.isFunction(r)?(1<e.length&&(r=p(r,e[1])),e=f.allKeys(t)):(r=z,e=I(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var a=e[i],s=t[a];r(s,a,t)&&(n[a]=s)}return n}),f.omit=b(function(t,n){var e,r=n[0];return f.isFunction(r)?(r=f.negate(r),1<n.length&&(e=n[1])):(n=f.map(I(n,!1,!1),String),r=function(t,e){return!f.contains(n,e)}),f.pick(t,r,e)}),f.defaults=L(f.allKeys,!0),f.create=function(t,e){var n=m(t);return e&&f.extendOwn(n,e),n},f.clone=function(t){return f.isObject(t)?f.isArray(t)?t.slice():f.extend({},t):t},f.tap=function(t,e){return e(t),t},f.isMatch=function(t,e){var n=f.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0},j=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return("function"==i||"object"==i||"object"==typeof e)&&F(t,e,n,r)},F=function(t,e,n,r){t instanceof f&&(t=t._wrapped),e instanceof f&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return h.valueOf.call(t)===h.valueOf.call(e)}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(f.isFunction(a)&&a instanceof a&&f.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return r[c]===e;if(n.push(t),r.push(e),o){if((c=t.length)!==e.length)return!1;for(;c--;)if(!j(t[c],e[c],n,r))return!1}else{var l,u=f.keys(t);if(c=u.length,f.keys(e).length!==c)return!1;for(;c--;)if(l=u[c],!_(e,l)||!j(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0},f.isEqual=function(t,e){return j(t,e)},f.isEmpty=function(t){return null==t||(w(t)&&(f.isArray(t)||f.isString(t)||f.isArguments(t))?0===t.length:0===f.keys(t).length)},f.isElement=function(t){return!(!t||1!==t.nodeType)},f.isArray=s||function(t){return"[object Array]"===d.call(t)},f.isObject=function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},f.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){f["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),f.isArguments(arguments)||(f.isArguments=function(t){return _(t,"callee")});var O=t.document&&t.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof O&&(f.isFunction=function(t){return"function"==typeof t||!1}),f.isFinite=function(t){return!f.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},f.isNaN=function(t){return f.isNumber(t)&&isNaN(t)},f.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===d.call(t)},f.isNull=function(t){return null===t},f.isUndefined=function(t){return void 0===t},f.has=function(t,e){if(!f.isArray(e))return _(t,e);for(var n=e.length,r=0;r<n;r++){var i=e[r];if(null==t||!o.call(t,i))return!1;t=t[i]}return!!n},f.noConflict=function(){return t._=e,this},f.identity=function(t){return t},f.constant=function(t){return function(){return t}},f.noop=function(){},f.property=function(e){return f.isArray(e)?function(t){return v(t,e)}:y(e)},f.propertyOf=function(e){return null==e?function(){}:function(t){return f.isArray(t)?v(e,t):e[t]}},f.matcher=f.matches=function(e){return e=f.extendOwn({},e),function(t){return f.isMatch(t,e)}},f.times=function(t,e,n){var r=Array(Math.max(0,t));e=p(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},f.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},f.now=Date.now||function(){return(new Date).getTime()};function U(e){function n(t){return e[t]}var t="(?:"+f.keys(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}}var Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},W=f.invert(Y);f.escape=U(Y),f.unescape=U(W),f.result=function(t,e,n){f.isArray(e)||(e=[e]);var r=e.length;if(!r)return f.isFunction(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=f.isFunction(o)?o.call(t):o}return t};var G=0;f.uniqueId=function(t){var e=++G+"";return t?t+e:e},f.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function R(t){return"\\"+H[t]}var P=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g;f.template=function(o,t,e){!t&&e&&(t=e),t=f.defaults({},t,f.templateSettings);var n,r=RegExp([(t.escape||P).source,(t.interpolate||P).source,(t.evaluate||P).source].join("|")+"|$","g"),a=0,s="__p+='";o.replace(r,function(t,e,n,r,i){return s+=o.slice(a,i).replace(V,R),a=i+t.length,e?s+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?s+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(s+="';\n"+r+"\n__p+='"),t}),s+="';\n",t.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(t.variable||"obj","_",s)}catch(t){throw t.source=s,t}function i(t){return n.call(this,t,f)}var c=t.variable||"obj";return i.source="function("+c+"){\n"+s+"}",i},f.chain=function(t){var e=f(t);return e._chain=!0,e};function Z(t,e){return t._chain?f(e).chain():e}f.mixin=function(n){return f.each(f.functions(n),function(t){var e=f[t]=n[t];f.prototype[t]=function(){var t=[this._wrapped];return i.apply(t,arguments),Z(this,e.apply(f,t))}}),f},f.mixin(f),f.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];f.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],Z(this,t)}}),f.each(["concat","join","slice"],function(t){var e=r[t];f.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}}),f.prototype.value=function(){return this._wrapped},f.prototype.valueOf=f.prototype.toJSON=f.prototype.value,f.prototype.toString=function(){return String(this._wrapped)},void 0===(X=function(){return f}.apply(q,[]))||(J.exports=X)}()}).call(this,e(22),e(23)(t))},function(t,e,n){"use strict";n.r(e),n.d(e,"h",function(){return r}),n.d(e,"createElement",function(){return r}),n.d(e,"cloneElement",function(){return o}),n.d(e,"createRef",function(){return x}),n.d(e,"Component",function(){return v}),n.d(e,"render",function(){return w}),n.d(e,"rerender",function(){return f}),n.d(e,"options",function(){return E});var c=function(){},E={},l=[],u=[];function r(t,e){var n,r,i,o,a=u;for(o=arguments.length;2<o--;)l.push(arguments[o]);for(e&&null!=e.children&&(l.length||l.push(e.children),delete e.children);l.length;)if((r=l.pop())&&void 0!==r.pop)for(o=r.length;o--;)l.push(r[o]);else"boolean"==typeof r&&(r=null),(i="function"!=typeof t)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(i=!1)),i&&n?a[a.length-1]+=r:a===u?a=[r]:a.push(r),n=i;var s=new c;return s.nodeName=t,s.children=a,s.attributes=null==e?void 0:e,s.key=null==e?void 0:e.key,void 0!==E.vnode&&E.vnode(s),s}function B(t,e){for(var n in e)t[n]=e[n];return t}function h(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}var i="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function o(t,e){return r(t.nodeName,B(B({},t.attributes),e),2<arguments.length?[].slice.call(arguments,2):t.children)}var d=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,a=[];function s(t){!t._dirty&&(t._dirty=!0)&&1==a.push(t)&&(E.debounceRendering||i)(f)}function f(){for(var t;t=a.pop();)t._dirty&&F(t)}function C(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function I(t){var e=B({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===e[r]&&(e[r]=n[r]);return e}function k(t){var e=t.parentNode;e&&e.removeChild(t)}function p(t,e,n,r,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)h(n,null),h(r,t);else if("class"!==e||i)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(t.style[o]="");for(var o in r)t.style[o]="number"==typeof r[o]&&!1===d.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,A,a):t.removeEventListener(e,A,a),(t._listeners||(t._listeners={}))[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t){try{t[e]=null==r?"":r}catch(t){}null!=r&&!1!==r||"spellcheck"==e||t.removeAttribute(e)}else{var s=i&&e!==(e=e.replace(/^xlink:?/,""));null==r||!1===r?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function A(t){return this._listeners[t.type](E.event&&E.event(t)||t)}var D=[],T=0,g=!1,b=!1;function N(){for(var t;t=D.shift();)E.afterMount&&E.afterMount(t),t.componentDidMount&&t.componentDidMount()}function S(t,e,n,r,i,o){T++||(g=null!=i&&void 0!==i.ownerSVGElement,b=null!=t&&!("__preactattr_"in t));var a=Q(t,e,n,r,o);return i&&a.parentNode!==i&&i.appendChild(a),--T||(b=!1,o||N()),a}function Q(t,e,n,r,i){var o=t,a=g;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),L(t,!0))),o.__preactattr_=!0,o;var s=e.nodeName;if("function"==typeof s)return function(t,e,n,r){var i=t&&t._component,o=i,a=t,s=i&&t._componentConstructor===e.nodeName,c=s,l=I(e);for(;i&&!c&&(i=i._parentComponent);)c=i.constructor===e.nodeName;i&&c&&(!r||i._component)?(j(i,l,3,n,r),t=i.base):(o&&!s&&(O(o),t=a=null),i=z(e.nodeName,l,n),t&&!i.nextBase&&(i.nextBase=t,a=null),j(i,l,1,n,r),t=i.base,a&&t!==a&&(a._component=null,L(a,!1)));return t}(t,e,n,r);if(g="svg"===s||"foreignObject"!==s&&g,s=String(s),(!t||!C(t,s))&&(o=function(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.normalizedNodeName=t,n}(s,g),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),L(t,!0)}var c=o.firstChild,l=o.__preactattr_,u=e.children;if(null==l){l=o.__preactattr_={};for(var h=o.attributes,d=h.length;d--;)l[h[d].name]=h[d].value}return!b&&u&&1===u.length&&"string"==typeof u[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=u[0]&&(c.nodeValue=u[0]):(u&&u.length||null!=c)&&function(t,e,n,r,i){var o,a,s,c,l,u=t.childNodes,h=[],d={},f=0,p=0,A=u.length,g=0,b=e?e.length:0;if(0!==A)for(var m=0;m<A;m++){var y=u[m],_=y.__preactattr_;null!=(v=b&&_?y._component?y._component.__key:_.key:null)?(f++,d[v]=y):(_||(void 0!==y.splitText?!i||y.nodeValue.trim():i))&&(h[g++]=y)}if(0!==b)for(m=0;m<b;m++){var v;if(c=e[m],(l=null)!=(v=c.key))f&&void 0!==d[v]&&(l=d[v],d[v]=void 0,f--);else if(p<g)for(o=p;o<g;o++)if(void 0!==h[o]&&(w=a=h[o],M=i,"string"==typeof(x=c)||"number"==typeof x?void 0!==w.splitText:"string"==typeof x.nodeName?!w._componentConstructor&&C(w,x.nodeName):M||w._componentConstructor===x.nodeName)){l=a,h[o]=void 0,o===g-1&&g--,o===p&&p++;break}l=Q(l,c,n,r),s=u[m],l&&l!==t&&l!==s&&(null==s?t.appendChild(l):l===s.nextSibling?k(s):t.insertBefore(l,s))}var w,x,M;if(f)for(var m in d)void 0!==d[m]&&L(d[m],!1);for(;p<=g;)void 0!==(l=h[g--])&&L(l,!1)}(o,u,n,r,b||null!=l.dangerouslySetInnerHTML),function(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||p(t,r,n[r],n[r]=void 0,g);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||p(t,r,n[r],n[r]=e[r],g)}(o,e.attributes,l),g=a,o}function L(t,e){var n=t._component;n?O(n):(null!=t.__preactattr_&&h(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||k(t),m(t))}function m(t){for(t=t.lastChild;t;){var e=t.previousSibling;L(t,!0),t=e}}var y=[];function z(t,e,n){var r,i=y.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),v.call(r,e,n)):((r=new v(e,n)).constructor=t,r.render=_);i--;)if(y[i].constructor===t)return r.nextBase=y[i].nextBase,y.splice(i,1),r;return r}function _(t,e,n){return this.constructor(t,n)}function j(t,e,n,r,i){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r)),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===E.syncComponentUpdates&&t.base?s(t):F(t,1,i)),h(t.__ref,t))}function F(t,e,n,r){if(!t._disable){var i,o,a,s=t.props,c=t.state,l=t.context,u=t.prevProps||s,h=t.prevState||c,d=t.prevContext||l,f=t.base,p=t.nextBase,A=f||p,g=t._component,b=!1,m=d;if(t.constructor.getDerivedStateFromProps&&(c=B(B({},c),t.constructor.getDerivedStateFromProps(s,c)),t.state=c),f&&(t.props=u,t.state=h,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(s,c,l)?b=!0:t.componentWillUpdate&&t.componentWillUpdate(s,c,l),t.props=s,t.state=c,t.context=l),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!b){i=t.render(s,c,l),t.getChildContext&&(l=B(B({},l),t.getChildContext())),f&&t.getSnapshotBeforeUpdate&&(m=t.getSnapshotBeforeUpdate(u,h));var y,_,v=i&&i.nodeName;if("function"==typeof v){var w=I(i);(o=g)&&o.constructor===v&&w.key==o.__key?j(o,w,1,l,!1):(y=o,t._component=o=z(v,w,l),o.nextBase=o.nextBase||p,o._parentComponent=t,j(o,w,0,l,!1),F(o,1,n,!0)),_=o.base}else a=A,(y=g)&&(a=t._component=null),!A&&1!==e||(a&&(a._component=null),_=S(a,i,l,n||!f,A&&A.parentNode,!0));if(A&&_!==A&&o!==g){var x=A.parentNode;x&&_!==x&&(x.replaceChild(_,A),y||(A._component=null,L(A,!1)))}if(y&&O(y),(t.base=_)&&!r){for(var M=t,C=t;C=C._parentComponent;)(M=C).base=_;_._component=M,_._componentConstructor=M.constructor}}for(!f||n?D.push(t):b||(t.componentDidUpdate&&t.componentDidUpdate(u,h,m),E.afterUpdate&&E.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);T||r||N()}}function O(t){E.beforeUnmount&&E.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?O(n):e&&(null!=e.__preactattr_&&h(e.__preactattr_.ref,null),k(t.nextBase=e),y.push(t),m(e)),h(t.__ref,null)}function v(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function w(t,e,n){return S(n,t,{},!1,e,!1)}function x(){return{}}B(v.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=B(B({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),s(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),F(this,2)},render:function(){}});var M={h:r,createElement:r,cloneElement:o,createRef:x,Component:v,render:w,rerender:f,options:E};e.default=M},function(t,e,n){"use strict";n.r(e);function s(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[1<r.length?r[0]+r.slice(2):r,+t.slice(n+1)]}function c(t){return(t=s(Math.abs(t)))?t[1]:NaN}var r=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function C(t){return new i(t)}function i(t){if(!(e=r.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}C.prototype=i.prototype,i.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function o(t,e){var n=s(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function l(t){return t}function a(t){var w=t.grouping&&t.thousands?function(s,c){return function(t,e){for(var n=t.length,r=[],i=0,o=s[0],a=0;0<n&&0<o&&(e<a+o+1&&(o=Math.max(1,e-a)),r.push(t.substring(n-=o,n+o)),!((a+=o+1)>e));)o=s[i=(i+1)%s.length];return r.reverse().join(c)}}(t.grouping,t.thousands):l,r=t.currency,x=t.decimal,M=t.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(t.numerals):l,i=t.percent||"%";function a(t){var l=(t=C(t)).fill,u=t.align,h=t.sign,e=t.symbol,d=t.zero,f=t.width,p=t.comma,A=t.precision,g=t.trim,b=t.type;"n"===b?(p=!0,b="g"):B[b]||(null==A&&(A=12),g=!0,b="g"),(d||"0"===l&&"="===u)&&(d=!0,l="0",u="=");var m="$"===e?r[0]:"#"===e&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===e?r[1]:/[%p]/.test(b)?i:"",_=B[b],v=/[defgprs%]/.test(b);function n(t){var e,n,r,i=m,o=y;if("c"===b)o=_(t)+o,t="";else{var a=(t=+t)<0;if(t=_(Math.abs(t),A),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(0<i){if(!+t[r])break t;i=0}}return 0<i?t.slice(0,i)+t.slice(e+1):t}(t)),a&&0==+t&&(a=!1),i=(a?"("===h?h:"-":"-"===h||"("===h?"":h)+i,o=("s"===b?I[8+E/3]:"")+o+(a&&"("===h?")":""),v)for(e=-1,n=t.length;++e<n;)if((r=t.charCodeAt(e))<48||57<r){o=(46===r?x+t.slice(e+1):t.slice(e))+o,t=t.slice(0,e);break}}p&&!d&&(t=w(t,1/0));var s=i.length+t.length+o.length,c=s<f?new Array(f-s+1).join(l):"";switch(p&&d&&(t=w(c+t,c.length?f-o.length:1/0),c=""),u){case"<":t=i+t+o+c;break;case"=":t=i+c+t+o;break;case"^":t=c.slice(0,s=c.length>>1)+i+t+o+c.slice(s);break;default:t=c+i+t+o}return M(t)}return A=null==A?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A)),n.toString=function(){return t+""},n}return{format:a,formatPrefix:function(t,e){var n=a(((t=C(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(c(e)/3))),i=Math.pow(10,-r),o=I[8+r/3];return function(t){return n(i*t)+o}}}}var E,u,h,d,B={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return o(100*t,e)},r:o,s:function(t,e){var n=s(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(E=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:a<o?r+new Array(o-a+1).join("0"):0<o?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+s(t,Math.max(0,e+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},I=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function f(t){return u=a(t),h=u.format,d=u.formatPrefix,u}f({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function p(t){return Math.max(0,-c(Math.abs(t)))}function A(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(c(e)/3)))-c(Math.abs(t)))}function g(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,c(e)-c(t))+1}n.d(e,"formatDefaultLocale",function(){return f}),n.d(e,"format",function(){return h}),n.d(e,"formatPrefix",function(){return d}),n.d(e,"formatLocale",function(){return a}),n.d(e,"formatSpecifier",function(){return C}),n.d(e,"precisionFixed",function(){return p}),n.d(e,"precisionPrefix",function(){return A}),n.d(e,"precisionRound",function(){return g})},function(t,e,n){"use strict";n.r(e);var v=n(8),w=n(0);function x(){w.event.stopImmediatePropagation()}function M(t){var e=t.document.documentElement,n=Object(w.select)(t).on("dragstart.drag",C,!0);"onselectstart"in e?n.on("selectstart.drag",C,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}var C=function(){w.event.preventDefault(),w.event.stopImmediatePropagation()};function E(t,e){var n=t.document.documentElement,r=Object(w.select)(t).on("dragstart.drag",null);e&&(r.on("click.drag",C,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function B(t){return function(){return t}}function I(t,e,n,r,i,o,a,s,c,l){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=c,this._=l}function k(){return!w.event.button}function D(){return this.parentNode}function T(t){return null==t?{x:w.event.x,y:w.event.y}:t}function N(){return"ontouchstart"in this}I.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function r(){var n,r,i,o,a=k,s=D,e=T,c=N,p={},A=Object(v.a)("start","drag","end"),g=0,l=0;function b(t){t.on("mousedown.drag",u).filter(c).on("touchstart.drag",f).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function u(){if(!o&&a.apply(this,arguments)){var t=_("mouse",s.apply(this,arguments),w.mouse,this,arguments);t&&(Object(w.select)(w.event.view).on("mousemove.drag",h,!0).on("mouseup.drag",d,!0),M(w.event.view),x(),i=!1,n=w.event.clientX,r=w.event.clientY,t("start"))}}function h(){if(C(),!i){var t=w.event.clientX-n,e=w.event.clientY-r;i=l<t*t+e*e}p.mouse("drag")}function d(){Object(w.select)(w.event.view).on("mousemove.drag mouseup.drag",null),E(w.event.view,i),C(),p.mouse("end")}function f(){if(a.apply(this,arguments)){var t,e,n=w.event.changedTouches,r=s.apply(this,arguments),i=n.length;for(t=0;t<i;++t)(e=_(n[t].identifier,r,w.touch,this,arguments))&&(x(),e("start"))}}function m(){var t,e,n=w.event.changedTouches,r=n.length;for(t=0;t<r;++t)(e=p[n[t].identifier])&&(C(),e("drag"))}function y(){var t,e,n=w.event.changedTouches,r=n.length;for(o&&clearTimeout(o),o=setTimeout(function(){o=null},500),t=0;t<r;++t)(e=p[n[t].identifier])&&(x(),e("end"))}function _(i,o,a,s,c){var l,u,h,d=a(o,i),f=A.copy();if(Object(w.customEvent)(new I(b,"beforestart",l,i,g,d[0],d[1],0,0,f),function(){return null!=(w.event.subject=l=e.apply(s,c))&&(u=l.x-d[0]||0,h=l.y-d[1]||0,!0)}))return function t(e){var n,r=d;switch(e){case"start":p[i]=t,n=g++;break;case"end":delete p[i],--g;case"drag":d=a(o,i),n=g}Object(w.customEvent)(new I(b,e,l,i,n,d[0]+u,d[1]+h,d[0]-r[0],d[1]-r[1],f),f.apply,f,[e,s,c])}}return b.filter=function(t){return arguments.length?(a="function"==typeof t?t:B(!!t),b):a},b.container=function(t){return arguments.length?(s="function"==typeof t?t:B(t),b):s},b.subject=function(t){return arguments.length?(e="function"==typeof t?t:B(t),b):e},b.touchable=function(t){return arguments.length?(c="function"==typeof t?t:B(!!t),b):c},b.on=function(){var t=A.on.apply(A,arguments);return t===A?b:t},b.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,b):Math.sqrt(l)},b}n.d(e,"drag",function(){return r}),n.d(e,"dragDisable",function(){return M}),n.d(e,"dragEnable",function(){return E})},function(t,e,n){"use strict";var o={value:function(){}};function r(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function s(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function c(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=o,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}i.prototype=r.prototype={constructor:i,on:function(t,e){var n,r=this._,i=function(t,r){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})}(t+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=c(r[n],t.name,e);else if(null==e)for(n in r)r[n]=c(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=s(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new i(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var a=r;n.d(e,"a",function(){return a})},function(t,e,n){"use strict";t.exports=function(n){var s=[];return s.toString=function(){return this.map(function(t){var e=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=function(t){var e=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e);return"/*# ".concat(n," */")}(r),o=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot).concat(t," */")});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(t,n);return t[2]?"@media ".concat(t[2],"{").concat(e,"}"):e}).join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];null!=i&&(n[i]=!0)}for(var o=0;o<t.length;o++){var a=t[o];null!=a[0]&&n[a[0]]||(e&&!a[2]?a[2]=e:e&&(a[2]="(".concat(a[2],") and (").concat(e,")")),s.push(a))}},s}},function(t,e,r){var n,i,o,c={},l=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),a=(o={},function(t,e){if("function"==typeof t)return t();if(void 0===o[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}o[t]=n}return o[t]}),s=null,u=0,h=[],d=r(54);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=c[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(y(r.parts[o],e))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(y(r.parts[o],e));c[r.id]={id:r.id,refs:1,parts:a}}}}function p(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function A(t,e){var n=a(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=h[h.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(t.insertAt.before,n);n.insertBefore(e,i)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);0<=e&&h.splice(e,1)}function b(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return m(e,t.attrs),A(t,e),e}function m(e,n){Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}function y(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=u++;n=s=s||b(t),r=w.bind(null,n,a,!1),i=w.bind(null,n,a,!0)}else i=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",m(e,t.attrs),A(t,e),e}(t),r=function(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=d(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,t),function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),r=function(t,e){var n=e.css,r=e.media;r&&t.setAttribute("media",r);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}t.exports=function(t,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=l()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=p(t,a);return f(s,a),function(t){for(var e=[],n=0;n<s.length;n++){var r=s[n];(i=c[r.id]).refs--,e.push(i)}t&&f(p(t,a),a);for(n=0;n<e.length;n++){var i;if(0===(i=e[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete c[i.id]}}}};var _,v=(_=[],function(t,e){return _[t]=e,_.filter(Boolean).join("\n")});function w(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=v(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}},function(t,e,n){"use strict";var i,o,b=n(0),r=n(8),a=0,s=0,c=0,l=1e3,u=0,h=0,d=0,f="object"==typeof performance&&performance.now?performance:Date,p="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function A(){return h||(p(g),h=f.now()+d)}function g(){h=0}function m(){this._call=this._time=this._next=null}function y(t,e,n){var r=new m;return r.restart(t,e,n),r}function _(){h=(u=f.now())+d,a=s=0;try{!function(){A(),++a;for(var t,e=i;e;)0<=(t=h-e._time)&&e._call.call(null,t),e=e._next;--a}()}finally{a=0,function(){var t,e,n=i,r=1/0;for(;n;)n=n._call?(r>n._time&&(r=n._time),(t=n)._next):(e=n._next,n._next=null,t?t._next=e:i=e);o=t,w(r)}(),h=0}}function v(){var t=f.now(),e=t-u;l<e&&(d-=e,u=t)}function w(t){a||(s=s&&clearTimeout(s),24<t-h?(t<1/0&&(s=setTimeout(_,t-f.now()-d)),c=c&&clearInterval(c)):(c||(u=f.now(),c=setInterval(v,l)),a=1,p(_)))}m.prototype=y.prototype={constructor:m,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?A():+n)+(null==e?0:+e),this._next||o===this||(o?o._next=this:i=this,o=this),this._call=t,this._time=n,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}};function x(e,n,t){var r=new m;return n=null==n?0:+n,r.restart(function(t){r.stop(),e(t+n)},n,t),r}function M(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(o,a,s){var c,l=o.__transition;function u(t){var e,n,r,i;if(1!==s.state)return d();for(e in l)if((i=l[e]).name===s.name){if(i.state===I)return x(u);4===i.state?(i.state=6,i.timer.stop(),i.on.call("interrupt",o,o.__data__,i.index,i.group),delete l[e]):+e<a&&(i.state=6,i.timer.stop(),i.on.call("cancel",o,o.__data__,i.index,i.group),delete l[e])}if(x(function(){s.state===I&&(s.state=4,s.timer.restart(h,s.delay,s.time),h(t))}),s.state=2,s.on.call("start",o,o.__data__,s.index,s.group),2===s.state){for(s.state=I,c=new Array(r=s.tween.length),e=0,n=-1;e<r;++e)(i=s.tween[e].value.call(o,o.__data__,s.index,s.group))&&(c[++n]=i);c.length=n+1}}function h(t){for(var e=t<s.duration?s.ease.call(null,t/s.duration):(s.timer.restart(d),s.state=5,1),n=-1,r=c.length;++n<r;)c[n].call(o,e);5===s.state&&(s.on.call("end",o,o.__data__,s.index,s.group),d())}function d(){for(var t in s.state=6,s.timer.stop(),delete l[a],l)return;delete o.__transition}(l[a]=s).timer=y(function(t){s.state=1,s.timer.restart(u,s.delay,s.time),s.delay<=t&&u(t-s.delay)},0,s.time)}(t,n,{name:e,index:r,group:i,on:C,tween:E,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:B})}var C=Object(r.a)("start","end","cancel","interrupt"),E=[],B=0,I=3;function k(t,e){var n=T(t,e);if(n.state>B)throw new Error("too late; already scheduled");return n}function D(t,e){var n=T(t,e);if(n.state>I)throw new Error("too late; already running");return n}function T(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function N(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=2<n.state&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}var S=n(2);function Q(t,e,n){var r=t._id;return t.each(function(){var t=D(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return T(t,r).value[e]}}function L(t,e){var n;return("number"==typeof e?S.c:e instanceof z.a?S.d:(n=Object(z.a)(e))?(e=n,S.d):S.f)(t,e)}var z=n(1);var j=b.selection.prototype.constructor;function F(t){return function(){this.style.removeProperty(t)}}var O=0;function U(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Y(){return++O}var W=b.selection.prototype;U.prototype=function(t){return Object(b.selection)().transition(t)}.prototype={constructor:U,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(b.selector)(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,c,l=r[a],u=l.length,h=o[a]=new Array(u),d=0;d<u;++d)(s=l[d])&&(c=t.call(s,s.__data__,d,l))&&("__data__"in s&&(c.__data__=s.__data__),h[d]=c,M(h[d],e,n,d,h,T(s,n)));return new U(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(b.selectorAll)(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var c,l=r[s],u=l.length,h=0;h<u;++h)if(c=l[h]){for(var d,f=t.call(c,c.__data__,h,l),p=T(c,n),A=0,g=f.length;A<g;++A)(d=f[A])&&M(d,e,n,A,f,p);o.push(f),a.push(c)}return new U(o,a,e,n)},filter:function(t){"function"!=typeof t&&(t=Object(b.matcher)(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,c=r[i]=[],l=0;l<s;++l)(o=a[l])&&t.call(o,o.__data__,l,a)&&c.push(o);return new U(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var c,l=e[s],u=n[s],h=l.length,d=a[s]=new Array(h),f=0;f<h;++f)(c=l[f]||u[f])&&(d[f]=c);for(;s<r;++s)a[s]=e[s];return new U(a,this._parents,this._name,this._id)},selection:function(){return new j(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Y(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)if(a=s[l]){var u=T(a,e);M(a,t,n,l,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new U(r,this._parents,t,n)},call:W.call,nodes:W.nodes,node:W.node,size:W.size,empty:W.empty,each:W.each,on:function(t,e){var n=this._id;return arguments.length<2?T(this.node(),n).on.on(t):this.each(function(n,r,i){var o,a,s=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return 0<=e&&(t=t.slice(0,e)),!t||"start"===t})}(r)?k:D;return function(){var t=s(this,n),e=t.on;e!==o&&(a=(o=e).copy()).on(r,i),t.on=a}}(n,t,e))},attr:function(t,e){var n=Object(b.namespace)(t),r="transform"===n?S.h:L;return this.attrTween(t,"function"==typeof e?(n.local?function(r,i,o){var a,s,c;return function(){var t,e,n=o(this);if(null!=n)return(t=this.getAttributeNS(r.space,r.local))===(e=n+"")?null:t===a&&e===s?c:(s=e,c=i(a=t,n));this.removeAttributeNS(r.space,r.local)}}:function(r,i,o){var a,s,c;return function(){var t,e,n=o(this);if(null!=n)return(t=this.getAttribute(r))===(e=n+"")?null:t===a&&e===s?c:(s=e,c=i(a=t,n));this.removeAttribute(r)}})(n,r,Q(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(e,n,r){var i,o,a=r+"";return function(){var t=this.getAttributeNS(e.space,e.local);return t===a?null:t===i?o:o=n(i=t,r)}}:function(e,n,r){var i,o,a=r+"";return function(){var t=this.getAttribute(e);return t===a?null:t===i?o:o=n(i=t,r)}})(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Object(b.namespace)(t);return this.tween(n,(r.local?function(e,n){var r,i;function t(){var t=n.apply(this,arguments);return t!==i&&(r=(i=t)&&function(e,n){return function(t){this.setAttributeNS(e.space,e.local,n(t))}}(e,t)),r}return t._value=n,t}:function(e,n){var r,i;function t(){var t=n.apply(this,arguments);return t!==i&&(r=(i=t)&&function(e,n){return function(t){this.setAttribute(e,n(t))}}(e,t)),r}return t._value=n,t})(r,e))},style:function(t,e,n){var r="transform"==(t+="")?S.g:L;return null==e?this.styleTween(t,function(n,r){var i,o,a;return function(){var t=Object(b.style)(this,n),e=(this.style.removeProperty(n),Object(b.style)(this,n));return t===e?null:t===i&&e===o?a:a=r(i=t,o=e)}}(t,r)).on("end.style."+t,F(t)):"function"==typeof e?this.styleTween(t,function(r,i,o){var a,s,c;return function(){var t=Object(b.style)(this,r),e=o(this),n=e+"";return null==e&&(this.style.removeProperty(r),n=e=Object(b.style)(this,r)),t===n?null:t===a&&n===s?c:(s=n,c=i(a=t,e))}}(t,r,Q(this,"style."+t,e))).each(function(r,i){var o,a,s,c,l="style."+i,u="end."+l;return function(){var t=D(this,r),e=t.on,n=null==t.value[l]?c=c||F(i):void 0;e===o&&s===n||(a=(o=e).copy()).on(u,s=n),t.on=a}}(this._id,t)):this.styleTween(t,function(e,n,r){var i,o,a=r+"";return function(){var t=Object(b.style)(this,e);return t===a?null:t===i?o:o=n(i=t,r)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(e,n,r){var i,o;function t(){var t=n.apply(this,arguments);return t!==o&&(i=(o=t)&&function(e,n,r){return function(t){this.style.setProperty(e,n(t),r)}}(e,t,r)),i}return t._value=n,t}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Q(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",function(n){return function(){var t=this.parentNode;for(var e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=T(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?function(i,o){var a,s;return function(){var t=D(this,i),e=t.tween;if(e!==a)for(var n=0,r=(s=a=e).length;n<r;++n)if(s[n].name===o){(s=s.slice()).splice(n,1);break}t.tween=s}}:function(o,a,s){var c,l;if("function"!=typeof s)throw new Error;return function(){var t=D(this,o),e=t.tween;if(e!==c){l=(c=e).slice();for(var n={name:a,value:s},r=0,i=l.length;r<i;++r)if(l[r].name===a){l[r]=n;break}r===i&&l.push(n)}t.tween=l}})(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){k(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){k(this,t).delay=e}})(e,t)):T(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){D(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){D(this,t).duration=e}})(e,t)):T(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){D(this,t).ease=e}}(e,t)):T(this.node(),e).ease},end:function(){var i,o,a=this,s=a._id,c=a.size();return new Promise(function(t,e){var n={value:e},r={value:function(){0==--c&&t()}};a.each(function(){var t=D(this,s),e=t.on;e!==i&&((o=(i=e).copy())._.cancel.push(n),o._.interrupt.push(n),o._.end.push(r)),t.on=o})})}};(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n})(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),Math.PI;var G=1.70158,R=(function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(G),function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(G),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(G),2*Math.PI),P=(function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=R);function t(t){return n*Math.pow(2,10*--t)*Math.sin((i-t)/r)}return t.amplitude=function(t){return e(t,r*R)},t.period=function(t){return e(n,t)},t}(1,.3),function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=R);function t(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/r)}return t.amplitude=function(t){return e(t,r*R)},t.period=function(t){return e(n,t)},t}(1,.3),function e(n,r){var i=Math.asin(1/(n=Math.max(1,n)))*(r/=R);function t(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((i-t)/r):2-n*Math.pow(2,-10*t)*Math.sin((i+t)/r))/2}return t.amplitude=function(t){return e(t,r*R)},t.period=function(t){return e(n,t)},t}(1,.3),{time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}});function H(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return P.time=A(),P;return n}b.selection.prototype.interrupt=function(t){return this.each(function(){N(this,t)})},b.selection.prototype.transition=function(t){var e,n;t=t instanceof U?(e=t._id,t._name):(e=Y(),(n=P).time=A(),null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],c=s.length,l=0;l<c;++l)(a=s[l])&&M(a,t,e,l,s,n||H(a,e));return new U(r,this._parents,t,e)};n.d(e,"a",function(){return N})},function(t,e,n){"use strict";e.__esModule=!0,e.importAndCheck=function(t,e,n){if(!t)return null;if(-1===["reaction_data","metabolite_data","gene_data"].indexOf(e))throw new Error("Invalid name argument: "+e);t instanceof Array||(t=[t]);if(function(){null!==t&&(1!==t.length&&2!==t.length)&&console.warn("Bad data style: "+e)}(),t=m.arrayToObject(t),"gene_data"===e){if(void 0===n)throw new Error("Must pass all_reactions argument for gene_data");t=function(s,r){var i={},c=[null];for(var t in s){c=s[t].map(function(){return null});break}function e(t){var e=r[t],n=e.bigg_id,a={};e.genes.forEach(function(o){["bigg_id","name"].forEach(function(t){var e=s[o[t]]||m.clone(c),n=a[o.bigg_id];if(void 0===n)a[o.bigg_id]=e;else for(var r=0;r<e.length;r++){var i=e[r];null!==i&&(n[r]=i)}})}),i[n]=a}for(var n in r)e(n);return i}(t,n)}return t},e.floatForData=C,e.reverse_flux_for_data=E,e.gene_string_for_data=B,e.text_for_data=I,e.csv_converter=function(t){var e=t[0].length,r=[];if(e<2||3<e)throw new Error("CSV file must have 2 or 3 columns");for(var n=1;n<e;n++)r[n-1]={};return t.slice(1).forEach(function(t){for(var e=1,n=t.length;e<n;e++)r[e-1][t[0]]=t[e]}),r},e.genes_for_gene_reaction_rule=function(t){var e=t.replace(a,"$1$2").replace(s,"").split(" ").filter(function(t){return""!=t});return m.unique_strings_array(e)},e.evaluate_gene_reaction_rule=k,e.replace_gene_in_rule=D,e.apply_reaction_data_to_reactions=function(o,a,s,c,t){y.default.isUndefined(t)&&(t=Object.keys(o));var l,u,h;return null!==a?(t.map(function(t){l=o[t];var e=a[l.bigg_id]||a[l.name]||null,n=C(e,s,c),r=E(e),i=I(e,n);for(u in l.data=n,l.data_string=i,l.reverse_flux=r,l.gene_string=null,l.segments)(h=l.segments[u]).data=l.data,h.reverse_flux=l.reverse_flux}),!0):(t.map(function(t){for(u in(l=o[t]).data=null,l.data_string="",l.segments)(h=l.segments[u]).data=null;l.gene_string=null}),!1)},e.apply_metabolite_data_to_nodes=function(o,a,s,c,t){y.default.isUndefined(t)&&(t=Object.keys(o));return null!==a?(t.map(function(t){var e=o[t],n=a[e.bigg_id]||a[e.name]||null,r=C(n,s,c),i=I(n,r);e.data=r,e.data_string=i}),!0):(t.map(function(t){o[t].data=null,o[t].data_string=""}),!1)},e.apply_gene_data_to_reactions=function(h,d,f,p,A,g,t){y.default.isUndefined(t)&&(t=Object.keys(h));if(null===d)return t.map(function(t){var e=h[t];for(var n in e.data=null,e.data_string="",e.reverse_flux=!1,e.segments){e.segments[n].data=null}e.gene_string=null}),!1;var b=[null];for(var e in d){for(var n in d[e]){b=d[e][n].map(function(){return null});break}break}return t.map(function(t){var e,n,r=h[t],i=r.gene_reaction_rule,o=d[r.bigg_id],a=C(e=y.default.isUndefined(o)?(n={},m.clone(b)):k(i,n=o,g),f,A),s=E(e),c=I(e,a);for(var l in r.data=a,r.data_string=c,r.reverse_flux=s,r.segments){var u=r.segments[l];u.data=r.data,u.reverse_flux=r.reverse_flux}r.gene_string=B(i,n,r.genes,f,p,A)}),!0};var r,m=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(3)),i=n(4),y=(r=i)&&r.__esModule?r:{default:r},f=n(6);var p=function(t){return t},o=/([.*+?^=!:${}()|[\]/\\])/g,A=/\n\s*\n/g,g=/\n\s*(\)*)\s*$/,a=/([() ])(?:and|or)([)( ])/gi,s=/[()]/g,b=/\(\s*(\S+)\s*\)/g,_=/\s+or\s+/i,v=/\s+and\s+/i,w=/(^|\()(\s*-?[0-9.]+\s+(?:or\s+-?[0-9.]+\s*)+)(\)|$)/gi,x=/(^|\(|or\s)(\s*-?[0-9.]+\s+(?:and\s+-?[0-9.]+\s*)+)(\sor|\)|$)/gi;function M(t){var e=Number(t);return isNaN(e)||parseFloat(t)!==e?null:e}function c(t){return isFinite(t)?t:null}function C(t,e,n){if(null===t)return null;var r=-1!==e.indexOf("abs");if(1===t.length){var i=M(t[0]);return null===i?null:function(t,e){return e?Math.abs(t):t}(i,r)}if(2!==t.length)throw new Error("Data array must be of length 1 or 2");var o=t.map(M);if(null===o[0]||null===o[1])return null;if("diff"===n)return function(t,e,n){return n?Math.abs(e-t):e-t}(o[0],o[1],r);if("fold"===n)return c(function(t,e,n){if(0===t||0===e)return null;var r=t<=e?e/t:-t/e;return n?Math.abs(r):r}(o[0],o[1],r));if("log2_fold"===n)return c(function(t,e,n){if(0===t)return null;if(e/t<0)return null;var r=Math.log(e/t)/Math.log(2);return n?Math.abs(r):r}(o[0],o[1],r));throw new Error("Bad data compare_style: "+n)}function E(t){return null!==t&&null!==t[0]&&t[0]<0}function B(t,a,i,s,o,c){var l=t,u=null===a,h={};return i.forEach(function(t){var e=t.bigg_id;if(!(e in h))if(h[e]=!0,u)l=D(l,e,e+"\n");else{if(!(e in a))return;var n=a[e],r=C(n,s,c),i=null===r?p:(0,f.format)(".3g");if(1===n.length)l=D(l,e,e+" ("+d(n[0],i)+")\n");else if(2===n.length){var o;o=y.default.any(n,function(t){return null!==M(t)})?e+" ("+d(n[0],i)+", "+d(n[1],i)+": "+d(r,i)+")\n":e+" ("+d(n[0],i)+", "+d(n[1],i)+")\n",l=D(l,e,o)}}}),(l=l.replace(A,"\n").replace(g,"$1")).split("\n").map(function(t){for(var e=0,n=i.length;e<n;e++){var r=i[e];if(-1!==t.indexOf(r.bigg_id))return"name"===o&&(t=D(t,r.bigg_id,r.name)),{bigg_id:r.bigg_id,name:r.name,text:t}}return{bigg_id:null,name:null,text:t}});function d(t,e){return null===t?"nd":e(t)}}function I(t,e){if(null===t)return i(null);if(1===t.length){var n=null===e?p:(0,f.format)(".3g");return i(t[0],n)}if(2!==t.length)return"";n=null===e?p:(0,f.format)(".3g");var r=i(t[0],n);return r+=", "+i(t[1],n),r+=": "+i(e,n);function i(t,e){return null===t?"(nd)":e(t)}}function k(t,e,o){var n=[null],r=1;for(var i in e){r=(n=e[i].map(function(){return null})).length;break}if(""==t)return m.clone(n);for(var a=[],s=0;s<r;s++){var c=t,l=!0;for(var i in e){var u=M(e[i][s]);null===u?u=0:l=!1,c=D(c,i,u)}if(l)a.push(null);else{for(;;){var h=c;if((h=(h=(h=h.replace(b," $1 ")).replace(w,function(t,e,n,r){return e+n.split(_).map(parseFloat).reduce(function(t,e){return t+e})+r})).replace(x,function(t,e,n,r){var i=n.split(v).map(parseFloat);return e+("min"==o?Math.min.apply(null,i):i.reduce(function(t,e){return t+e})/i.length)+r}))==c)break;c=h}var d=Number(c);isNaN(d)?(console.warn("Could not evaluate "+t),a.push(null)):a.push(d)}}return a}function D(t,e,n){var r="(^|[\\s\\(\\)])"+e.replace(o,"\\$1")+"([\\s\\(\\)]|$)";return t.replace(new RegExp(r,"g"),"$1"+n+"$2")}},function(t,e,n){"use strict";e.__esModule=!0;var r=(i.prototype.set=function(t,e){void 0===this.callbacks&&(this.callbacks={}),void 0===this.callbacks[t]&&(this.callbacks[t]=[]),this.callbacks[t].push(e)},i.prototype.remove=function(t){void 0===this.callbacks||0===Object.keys(this.callbacks).length?console.warn("No callbacks to remove"):delete this.callbacks[t]},i.prototype.run=function(t,e){for(var n=arguments.length,r=Array(2<n?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=1<arguments.length&&void 0!==e?e:null;if(void 0!==this.callbacks)for(var a in this.callbacks)a.split(".")[0]===t&&this.callbacks[a].forEach(function(t){t.apply(o,r)})},i);function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i)}e.default=r},function(t,e,n){"use strict";n.r(e);var d={},f={};function s(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function c(t){var n=Object.create(null),r=[];return t.forEach(function(t){for(var e in t)e in n||r.push(n[e]=e)}),r}function o(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function l(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+o(-t,6):9999<t?"+"+o(t,6):o(t,4)}(t.getUTCFullYear())+"-"+o(t.getUTCMonth()+1,2)+"-"+o(t.getUTCDate(),2)+(i?"T"+o(e,2)+":"+o(n,2)+":"+o(r,2)+"."+o(i,3)+"Z":r?"T"+o(e,2)+":"+o(n,2)+":"+o(r,2)+"Z":n||e?"T"+o(e,2)+":"+o(n,2)+"Z":"")}function r(r){var e=new RegExp('["'+r+"\n\r]"),h=r.charCodeAt(0);function o(r,t){var e,n=[],i=r.length,o=0,a=0,s=i<=0,c=!1;function l(){if(s)return f;if(c)return c=!1,d;var t,e,n=o;if(34===r.charCodeAt(n)){for(;o++<i&&34!==r.charCodeAt(o)||34===r.charCodeAt(++o););return(t=o)>=i?s=!0:10===(e=r.charCodeAt(o++))?c=!0:13===e&&(c=!0,10===r.charCodeAt(o)&&++o),r.slice(n+1,t-1).replace(/""/g,'"')}for(;o<i;){if(10===(e=r.charCodeAt(t=o++)))c=!0;else if(13===e)c=!0,10===r.charCodeAt(o)&&++o;else if(e!==h)continue;return r.slice(n,t)}return s=!0,r.slice(n,i)}for(10===r.charCodeAt(i-1)&&--i,13===r.charCodeAt(i-1)&&--i;(e=l())!==f;){for(var u=[];e!==d&&e!==f;)u.push(e),e=l();t&&null==(u=t(u,a++))||n.push(u)}return n}function n(t,n){return t.map(function(e){return n.map(function(t){return a(e[t])}).join(r)})}function i(t){return t.map(a).join(r)}function a(t){return null==t?"":t instanceof Date?l(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var r,i,e=o(t,function(t,e){if(r)return r(t,e-1);i=t,r=n?function(n,r){var i=s(n);return function(t,e){return r(i(t),e,n)}}(t,n):s(t)});return e.columns=i||[],e},parseRows:o,format:function(t,e){return null==e&&(e=c(t)),[e.map(a).join(r)].concat(n(t,e)).join("\n")},formatBody:function(t,e){return null==e&&(e=c(t)),n(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")}}}var i=r(","),a=i.parse,u=i.parseRows,h=i.format,p=i.formatBody,A=i.formatRows,g=r("\t"),b=g.parse,m=g.parseRows,y=g.format,_=g.formatBody,v=g.formatRows;function w(t){for(var e in t){var n,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=n;else r=null;t[e]=r}return t}n.d(e,"dsvFormat",function(){return r}),n.d(e,"csvParse",function(){return a}),n.d(e,"csvParseRows",function(){return u}),n.d(e,"csvFormat",function(){return h}),n.d(e,"csvFormatBody",function(){return p}),n.d(e,"csvFormatRows",function(){return A}),n.d(e,"tsvParse",function(){return b}),n.d(e,"tsvParseRows",function(){return m}),n.d(e,"tsvFormat",function(){return y}),n.d(e,"tsvFormatBody",function(){return _}),n.d(e,"tsvFormatRows",function(){return v}),n.d(e,"autoType",function(){return w})},function(t,e,n){"use strict";var r="$";function s(){}function i(t,e){var n=new s;if(t instanceof s)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}s.prototype=i.prototype={constructor:s,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}};var o=i;function a(){}var c=o.prototype;a.prototype={constructor:a,has:c.has,add:function(t){return this[r+(t+="")]=t,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};n.d(e,"a",function(){return o})},function(t,e,n){"use strict";n.r(e);function a(r,t){var i,o,a,s,c=Object(A.a)("beforesend","progress","load","error"),l=Object(p.a)(),u=new XMLHttpRequest,h=null,d=null,f=0;function e(t){var e,n=u.status;if(!n&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||200<=n&&n<300||304===n){if(a)try{e=a.call(i,u)}catch(t){return void c.call("error",i,t)}else e=u;c.call("load",i,e)}else c.call("error",i,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(r)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=u.ontimeout=e:u.onreadystatechange=function(t){3<u.readyState&&e(t)},u.onprogress=function(t){c.call("progress",i,t)},i={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),i)},mimeType:function(t){return arguments.length?(o=null==t?null:t+"",i):o},responseType:function(t){return arguments.length?(s=t,i):s},timeout:function(t){return arguments.length?(f=+t,i):f},user:function(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},password:function(t){return arguments.length<1?d:(d=null==t?null:t+"",i)},response:function(t){return a=t,i},get:function(t,e){return i.send("GET",t,e)},post:function(t,e){return i.send("POST",t,e)},send:function(t,e,n){return u.open(t,r,!0,h,d),null==o||l.has("accept")||l.set("accept",o+",*/*"),u.setRequestHeader&&l.each(function(t,e){u.setRequestHeader(e,t)}),null!=o&&u.overrideMimeType&&u.overrideMimeType(o),null!=s&&(u.responseType=s),0<f&&(u.timeout=f),null==n&&"function"==typeof e&&(n=e,e=null),null!=n&&1===n.length&&(n=function(n){return function(t,e){n(null==t?e:null)}}(n)),null!=n&&i.on("error",n).on("load",function(t){n(null,t)}),c.call("beforesend",i,u),u.send(null==e?null:e),i},abort:function(){return u.abort(),i},on:function(){var t=c.on.apply(c,arguments);return t===c?i:t}},null==t)return i;if("function"!=typeof t)throw new Error("invalid callback: "+t);return i.get(t)}var p=n(15),A=n(8);function r(r,i){return function(t,e){var n=a(t).mimeType(r).response(i);if(null==e)return n;if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}}function i(i,o){return function(t,e,n){arguments.length<3&&(n=e,e=null);var r=a(t).mimeType(i);return r.row=function(t){return arguments.length?r.response(function(e,n){return function(t){return e(t.responseText,n)}}(o,e=t)):e},r.row(e),n?r.get(n):r}}var o=r("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),s=r("application/json",function(t){return JSON.parse(t.responseText)}),c=r("text/plain",function(t){return t.responseText}),l=r("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),u=n(14);var h=i("text/csv",u.csvParse),d=i("text/tab-separated-values",u.tsvParse);n.d(e,"request",function(){return a}),n.d(e,"html",function(){return o}),n.d(e,"json",function(){return s}),n.d(e,"text",function(){return c}),n.d(e,"xml",function(){return l}),n.d(e,"csv",function(){return h}),n.d(e,"tsv",function(){return d})},function(t,e,n){"use strict";var r=n(3).make_class();r.prototype={init:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{x:0,y:0},r=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];this.div=t,this.map=e,this.displacement=n,this.shouldReposition=r,this.visible=!0,this.hide()},is_visible:function(){return this.visible},place:function(t){this.div.style("display",null);var e=this.map.zoomContainer.windowTranslate,n=this.map.zoomContainer.windowScale,r=this.map.get_size();if(this.shouldReposition){var i=Math.max(20,Math.min(r.width-270,n*t.x+e.x-this.displacement.x)),o=Math.max(20,Math.min(r.height-40,n*t.y+e.y-this.displacement.y));this.div.style("position","absolute").style("display","block").style("left",i+"px").style("top",o+"px")}else this.div.style("position","absolute").style("display","block").style("left",n*t.x+e.x-this.displacement.x+"px").style("top",n*t.y+e.y-this.displacement.y+"px");this.visible=!0},hide:function(){this.visible&&(this.div.style("display","none"),this.visible=!1)}},t.exports=r},function(t,e,n){"use strict";var u=n(3),h=n(12),d=u.make_class();d.from_cobra_json=function(t){if(!t.reactions||!t.metabolites)throw new Error("Bad model data.");for(var n={},e=0,r=t.genes.length;e<r;e++){var i=(c=t.genes[e]).id;n[i]=c}var o=new d;o.reactions={};for(e=0,r=t.reactions.length;e<r;e++){i=(c=t.reactions[e]).id;var a=u.clone(c);if(delete a.id,a.bigg_id=i,a.data_string="",a.genes=[],a.reversibility=a.lower_bound<0&&0<a.upper_bound,a.upper_bound<=0&&a.lower_bound<0)for(var s in a.metabolites)a.metabolites[s]=-a.metabolites[s];if(delete a.lower_bound,delete a.upper_bound,"gene_reaction_rule"in a)h.genes_for_gene_reaction_rule(a.gene_reaction_rule).forEach(function(t){if(t in n){var e=u.clone(n[t]);e.bigg_id=e.id,delete e.id,a.genes.push(e)}else console.warn("Could not find gene for gene_id "+t)});o.reactions[i]=a}o.metabolites={};for(e=0,r=t.metabolites.length;e<r;e++){i=(c=t.metabolites[e]).id;var c,l=u.clone(c);delete l.id,l.bigg_id=i,o.metabolites[i]=l}return o},d.build_reaction_string=function(t,e){function n(t){return 1==t?"":String(t)+" "}var r=[],i=[];for(var o in t){var a=t[o];0<a?i.push(n(a)+o):r.push(n(Math.abs(a))+o)}var s=r.join(" + ");s+=e?"  ":"  ";return s+=i.join(" + ")},d.prototype={init:function(){this.reactions={},this.metabolites={}},apply_reaction_data:function(t,e,n){h.apply_reaction_data_to_reactions(this.reactions,t,e,n)},apply_metabolite_data:function(t,e,n){h.apply_metabolite_data_to_nodes(this.metabolites,t,e,n)},apply_gene_data:function(t,e,n,r,i){h.apply_gene_data_to_reactions(this.reactions,t,e,n,r,i)}},t.exports=d},function(t,Dt,Tt){(function(Bt,It){var kt;(function(){function h(){}function i(t,e){return t}function d(t,e){if(!e)throw new f(t)}function o(t){if((null!=t?t._isObservable:void 0)&&!(null!=t?t._isProperty:void 0))throw new f("Observable is not a Property : "+t)}function l(t){return t&&t._isObservable}function t(t){for(var e=arguments.length,n=1;1<e?n<e:e<n;1<e?n++:n--)for(var r in arguments[n])t[r]=arguments[n][r];return t}function e(t,e){function n(){}var r={}.hasOwnProperty;for(var i in n.prototype=e.prototype,t.prototype=new n,e)r.call(e,i)&&(t[i]=e[i]);return t}function r(t){return"undefined"!=typeof Symbol&&Symbol[t]?Symbol[t]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[t]=Symbol.for(t):"@@"+t}var n=Array.prototype.slice,b={toString:function(){return"Bacon"},version:"0.7.95"},f=(null!=Bt?Bt:this).Error,a=function(t){return d("not a function : "+t,m.isFunction(t))},p=Array.isArray||function(t){return t instanceof Array},m={indexOf:Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0;n<t.length;n++)if(e===t[n])return n;return-1},indexWhere:function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(e){return function(t){return!e(t)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,e){for(var n,r=[],i=0;i<e.length;i++)t(n=e[i])&&r.push(n);return r},map:function(r,i){return function(){for(var t,e=[],n=0;n<i.length;n++)t=i[n],e.push(r(t));return e}()},each:function(t,e){for(var n in t){if(Object.prototype.hasOwnProperty.call(t,n))e(n,t[n])}},toArray:function(t){return p(t)?t:[t]},contains:function(t,e){return-1!==m.indexOf(t,e)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?m.id:arguments[1],n=0;n<t.length;n++)if(!e(t[n]))return!1;return!0},any:function(t){for(var e=arguments.length<=1||void 0===arguments[1]?m.id:arguments[1],n=0;n<t.length;n++)if(e(t[n]))return!0;return!1},without:function(e,t){return m.filter(function(t){return t!==e},t)},remove:function(t,e){var n=m.indexOf(e,t);if(0<=n)return e.splice(n,1)},fold:function(t,e,n){for(var r=0;r<t.length;r++)e=n(e,t[r]);return e},flatMap:function(n,t){return m.fold(t,[],function(t,e){return t.concat(n(e))})},cached:function(t){var e=V;return function(){return(null!=e?e._isNone:void 0)&&(e=t(),t=void 0),e}},bind:function(t,e){return function(){return t.apply(e,arguments)}},isFunction:function(t){return"function"==typeof t},toString:function(e){var n,r,i={}.hasOwnProperty;try{return s++,null==e?"undefined":m.isFunction(e)?"function":p(e)?5<s?"[..]":"["+m.map(m.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"==typeof e?5<s?"{..}":"{"+function(){var t=[];for(n in e)i.call(e,n)&&(r=function(){try{return e[n]}catch(t){return t}}(),t.push(m.toString(n)+":"+m.toString(r)));return t}()+"}":e}finally{s--}}},s=0;b._=m;var c,u,A,g,y,_,v,w,x=b.UpdateBarrier=(u=[],A={},g=[],y=0,_={},v=function(t,e){var n=u[t],r=n.id,i=A[r];u.splice(t,1),delete A[r],e&&0<u.length&&w(n);for(var o=0;o<i.length;o++)(0,i[o])()},w=function(t){if(!_[t.id]){for(var e,n=t.internalDeps(),r=0;r<n.length;r++)if(e=n[r],w(e),A[e.id]){var i=m.indexOf(u,e);v(i,!1)}_[t.id]=!0}},{whenDoneWith:function(t,e){if(c){var n=A[t.id];return null==n?(n=A[t.id]=[e],u.push(t)):n.push(e)}return e()},hasWaiters:function(){return 0<u.length},inTransaction:function(t,e,n,r){if(c)return n.apply(e,r);c=t;try{var i=n.apply(e,r);!function(){for(;0<u.length;)v(0,!0);_={}}()}finally{c=void 0,B()}return i},currentEventId:function(){return c?c.id:void 0},wrappedSubscribe:function(e,n){function r(){return i=!0,o()}var i=!1,t=!1,o=function(){return t=!0};return o=e.dispatcher.subscribe(function(t){return C(e,function(){if(!i&&n(t)===b.noMore)return r()})}),t&&o(),r},afterTransaction:C});function M(t){t<=y||(g[t-1]||(g[t-1]=[[],0]),y=t)}function C(t,e){if(!c&&!g.length)return e();M(1);for(var n=0;n<y-1&&!E(t,g[n][0]);)n++;g[n][0].push([t,e]),c||B()}function E(t,e){for(var n=0;n<e.length;n++)if(e[n][0].id==t.id)return!0;return!1}function B(){var t=y;if(t)for(;t<=y;){var e=g[y-1];if(!e)throw new $("Unexpected stack top: "+e);var n=e[0],r=e[1];if(!(r<n.length)){e[0]=[],e[1]=0;break}var i=n[r],o=(i[0],i[1]);e[1]++,M(y+1);var a=!1;try{for(o(),a=!0;t<y&&0==g[y-1][0].length;)y--}finally{a||(g=[],y=0)}}}function I(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.obs=t,this.sync=e,this.lazy=n,this.queue=[]}function k(){I.apply(this,arguments)}function D(t){I.call(this,t,!0)}function T(t,e,n){this.context=t,this.method=e,this.args=n}t(I.prototype,{_isSource:!0,subscribe:function(t){return this.obs.dispatcher.subscribe(t)},toString:function(){return this.obs.toString()},markEnded:function(){return this.ended=!0},consume:function(){return this.lazy?{value:m.always(this.queue[0])}:this.queue[0]},push:function(t){return this.queue=[t],[t]},mayHave:function(){return!0},hasAtLeast:function(){return this.queue.length},flatten:!0}),e(k,I),t(k.prototype,{consume:function(){return this.queue.shift()},push:function(t){return this.queue.push(t)},mayHave:function(t){return!this.ended||this.queue.length>=t},hasAtLeast:function(t){return this.queue.length>=t},flatten:!1}),e(D,I),t(D.prototype,{consume:function(){var t=this.queue;return this.queue=[],{value:function(){return t}}},push:function(t){return this.queue.push(t.value())},hasAtLeast:function(){return!0}}),I.isTrigger=function(t){return(null!=t?t._isSource:void 0)?t.sync:null!=t?t._isEventStream:void 0},I.fromObservable=function(t){return(null!=t?t._isSource:void 0)?t:(null!=t?t._isProperty:void 0)?new I(t,!1):new k(t,!0)},t(T.prototype,{_isDesc:!0,deps:function(){return this.cached||(this.cached=Q([this.context].concat(this.args))),this.cached},toString:function(){return m.toString(this.context)+"."+m.toString(this.method)+"("+m.map(m.toString,this.args)+")"}});function N(t,e){var n=t||e;if(n&&n._isDesc)return t||e;for(var r=arguments.length,i=Array(2<r?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new T(t,e,i)}function S(t,e){return e.desc=t,e}var Q=function(t){return p(t)?m.flatMap(Q,t):l(t)?[t]:(null!=t?t._isSource:void 0)?[t.obs]:[]};b.Desc=T,b.Desc.empty=new b.Desc("","",[]);function L(a){return function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if("object"==typeof t&&n.length){var i=t,o=n[0];t=function(){return i[o].apply(i,arguments)},n=n.slice(1)}return a.apply(void 0,[t].concat(n))}}function z(t){return t=Array.prototype.slice.call(t),G.apply(void 0,t)}function j(r,i){return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.apply(void 0,i.concat(e))}}function F(t,e){var n=t.slice(1).split("."),r=m.map(function(r){return function(n){return function(t){if(null!=t){var e=t[n];return m.isFunction(e)?e.apply(t,r):e}}}}(e),n);return function(t){for(var e=0;e<r.length;e++)t=(0,r[e])(t);return t}}function O(t){return"string"==typeof t&&1<t.length&&"."===t.charAt(0)}function U(t,e){return G.apply(void 0,[t].concat(e))}function Y(t,e,n,r){if(null!=e?e._isProperty:void 0){var i=e.sampledBy(t,function(t,e){return[t,e]});return r.call(i,function(t){var e=t[0];t[1];return e}).map(function(t){t[0];return t[1]})}return e=U(e,n),r.call(t,e)}function W(t){if(m.isFunction(t))return t;if(O(t)){var n=R(t);return function(t,e){return t[n](e)}}throw new f("not a function or a field key: "+t)}var G=L(function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return m.isFunction(t)?n.length?j(t,n):t:O(t)?F(t,n):m.always(t)}),R=function(t){return t.slice(1)};function P(t){this.value=t}t(P.prototype,{_isSome:!0,getOrElse:function(){return this.value},get:function(){return this.value},filter:function(t){return t(this.value)?new P(this.value):V},map:function(t){return new P(t(this.value))},forEach:function(t){return t(this.value)},isDefined:!0,toArray:function(){return[this.value]},inspect:function(){return"Some("+this.value+")"},toString:function(){return this.inspect()}});function H(t){return(null!=t?t._isSome:void 0)||(null!=t?t._isNone:void 0)?t:new P(t)}var V={_isNone:!0,getOrElse:function(t){return t},filter:function(){return V},map:function(){return V},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}};b.noMore="<no-more>",b.more="<more>";var Z=0;function K(){this.id=++Z}function J(t,e){if(!(this instanceof J))return new J(t,e);K.call(this),!e&&m.isFunction(t)||(null!=t?t._isNext:void 0)?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t)}function X(t,e){if(!(this instanceof X))return new X(t,e);J.call(this,t,e)}function q(){if(!(this instanceof q))return new q;K.call(this)}function $(t){if(!(this instanceof $))return new $(t);this.error=t,K.call(this)}K.prototype._isEvent=!0,K.prototype.isEvent=function(){return!0},K.prototype.isEnd=function(){return!1},K.prototype.isInitial=function(){return!1},K.prototype.isNext=function(){return!1},K.prototype.isError=function(){return!1},K.prototype.hasValue=function(){return!1},K.prototype.filter=function(){return!0},K.prototype.inspect=function(){return this.toString()},K.prototype.log=function(){return this.toString()},e(J,K),J.prototype.isNext=function(){return!0},J.prototype.hasValue=function(){return!0},J.prototype.value=function(){var t;return(null!=(t=this.valueF)?t._isNext:void 0)?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},J.prototype.fmap=function(t){var e,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return t(n)})):(e=this).apply(function(){return t(e.value())})},J.prototype.apply=function(t){return new J(t)},J.prototype.filter=function(t){return t(this.value())},J.prototype.toString=function(){return m.toString(this.value())},J.prototype.log=function(){return this.value()},J.prototype._isNext=!0,e(X,J),X.prototype._isInitial=!0,X.prototype.isInitial=function(){return!0},X.prototype.isNext=function(){return!1},X.prototype.apply=function(t){return new X(t)},X.prototype.toNext=function(){return new J(this)},e(q,K),q.prototype.isEnd=function(){return!0},q.prototype.fmap=function(){return this},q.prototype.apply=function(){return this},q.prototype.toString=function(){return"<end>"},e($,K),$.prototype.isError=function(){return!0},$.prototype.fmap=function(){return this},$.prototype.apply=function(){return this},$.prototype.toString=function(){return"<error> "+m.toString(this.error)},b.Event=K,b.Initial=X,b.Next=J,b.End=q,b.Error=$;function tt(t){return new X(t,!0)}function et(t){return new J(t,!0)}function nt(t){return t&&t._isEvent?t:et(t)}var rt=function(){return new q},it=0,ot=function(){};function at(t){this.desc=t,this.id=++it,this.initialDesc=this.desc}function st(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.unsubscribe=m.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var e,n=0;n<t.length;n++)e=t[n],this.add(e)}function ct(t,e){this._subscribe=t,this._handleEvent=e,this.subscribe=m.bind(this.subscribe,this),this.handleEvent=m.bind(this.handleEvent,this),this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this.subscriptions=[],this.queue=[]}function lt(t,e,n){if(!(this instanceof lt))return new lt(t,e,n);m.isFunction(t)&&(n=e,e=t,t=T.empty),at.call(this,t),a(e),this.dispatcher=new ct(e,n),ot(this)}t(at.prototype,{_isObservable:!0,subscribe:function(t){return x.wrappedSubscribe(this,t)},subscribeInternal:function(t){return this.dispatcher.subscribe(t)},onValue:function(){var e=z(arguments);return this.subscribe(function(t){if(t.hasValue())return e(t.value())})},onValues:function(e){return this.onValue(function(t){return e.apply(void 0,t)})},onError:function(){var e=z(arguments);return this.subscribe(function(t){if(t.isError())return e(t.error)})},onEnd:function(){var e=z(arguments);return this.subscribe(function(t){if(t.isEnd())return e()})},name:function(t){return this._name=t,this},withDescription:function(){return this.desc=N.apply(void 0,arguments),this},toString:function(){return this._name?this._name:this.desc.toString()},deps:function(){return this.desc.deps()},internalDeps:function(){return this.initialDesc.deps()}}),at.prototype.assign=at.prototype.onValue,at.prototype.forEach=at.prototype.onValue,at.prototype.inspect=at.prototype.toString,b.Observable=at,t(st.prototype,{add:function(t){var e=this;if(!this.unsubscribed){var n=!1,r=h;this.starting.push(t);return r=t(this.unsubscribe,function(){if(!e.unsubscribed)return n=!0,e.remove(r),m.remove(t,e.starting)}),this.unsubscribed||n?r():this.subscriptions.push(r),m.remove(t,this.starting),r}},remove:function(t){if(!this.unsubscribed)return void 0!==m.remove(t,this.subscriptions)?t():void 0},unsubscribe:function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,e=0;e<t.length;e++)t[e]();return this.subscriptions=[],this.starting=[],[]}},count:function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},empty:function(){return 0===this.count()}}),b.CompositeUnsubscribe=st,ct.prototype.hasSubscribers=function(){return 0<this.subscriptions.length},ct.prototype.removeSub=function(t){return this.subscriptions=m.without(t,this.subscriptions),this.subscriptions},ct.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),x.inTransaction(t,this,this.pushIt,[t])},ct.prototype.pushToSubscriptions=function(t){try{for(var e=this.subscriptions,n=e.length,r=0;r<n;r++){var i=e[r];i.sink(t)!==b.noMore&&!t.isEnd()||this.removeSub(i)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}},ct.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),b.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?b.more:(this.unsubscribeFromSource(),b.noMore)}},ct.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},ct.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},ct.prototype.subscribe=function(t){var e,n;return this.ended?(t(rt()),h):(a(t),e={sink:t},this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),a(this.unsubSrc)),n=this,function(){if(n.removeSub(e),!n.hasSubscribers())return n.unsubscribeFromSource()})},b.Dispatcher=ct,e(lt,at),t(lt.prototype,{_isEventStream:!0,toProperty:function(t){var s=0===arguments.length?V:H(function(){return t}),c=this.dispatcher;return new ft(new b.Desc(this,"toProperty",[t]),function(e){function n(){if(!r)return s.forEach(function(t){if(r=!0,(a=e(new X(t)))===b.noMore)return o(),o=h})}var r=!1,i=!1,o=h,a=b.more;return o=c.subscribe(function(t){return t.hasValue()?t.isInitial()&&!i?(s=new P(function(){return t.value()}),b.more):(t.isInitial()||n(),r=!0,s=new P(t),e(t)):(t.isEnd()&&(a=n()),a!==b.noMore?e(t):void 0)}),i=!0,n(),o})},toEventStream:function(){return this},withHandler:function(t){return new lt(new b.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)}}),b.EventStream=lt,b.never=function(){return new lt(N(b,"never"),function(t){return t(rt()),h})},b.when=function(){if(0===arguments.length)return b.never();var t=arguments.length;d("when: expecting arguments in the form (Observable+,function)+",t%2==0);for(var f=[],p=[],e=0,n=[];e<t;){n[e]=arguments[e],n[e+1]=arguments[e+1];for(var r,i=m.toArray(arguments[e]),o={f:ht(arguments[e+1]),ixs:[]},a=!1,s=0;s<i.length;s++){r=i[s];var c=m.indexOf(f,r);a=a||I.isTrigger(r),c<0&&(f.push(r),c=f.length-1);for(var l,u=0;u<o.ixs.length;u++)(l=o.ixs[u]).index===c&&l.count++;o.ixs.push({index:c,count:1})}d("At least one EventStream required",a||!i.length),0<i.length&&p.push(o),e+=2}if(!f.length)return b.never();f=m.map(I.fromObservable,f);var A=m.any(f,function(t){return t.flatten})&&ut(m.map(function(t){return t.obs},f)),g=new lt(new b.Desc(b,"when",n),function(s){function c(t){for(var e,n=0;n<t.ixs.length;n++)if(e=t.ixs[n],!f[e.index].hasAtLeast(e.count))return!1;return!0}function e(t){return!t.sync||t.ended}function l(t){for(var e,n=0;n<t.ixs.length;n++)if(e=t.ixs[n],!f[e.index].mayHave(e.count))return!0}function u(t){return!t.source.flatten}function r(a){return function(n){function r(){return x.whenDoneWith(g,i)}var o=function(){if(!(0<h.length))return b.more;for(var r,t=b.more,e=h.pop(),n=0;n<p.length;n++)if(r=p[n],c(r)){var i=function(){for(var t,e=[],n=0;n<r.ixs.length;n++)t=r.ixs[n],e.push(f[t.index].consume());return e}();return t=s(e.e.apply(function(){var t,e=function(){for(var t,e=[],n=0;n<i.length;n++)t=i[n],e.push(t.value());return e}();return(t=r).f.apply(t,e)})),h.length&&(h=m.filter(u,h)),t===b.noMore?t:o()}},i=function(){var t=o();return d&&(m.all(f,e)||m.all(p,l))&&(t=b.noMore,s(rt())),t===b.noMore&&n(),t};return a.subscribe(function(t){if(t.isEnd())d=!0,a.markEnded(),r();else if(t.isError())var e=s(t);else a.push(t),a.sync&&(h.push({source:a,e:t}),A||x.hasWaiters()?r():i());return e===b.noMore&&n(),e||b.more})}}var h=[],d=!1;return new b.CompositeUnsubscribe(function(){for(var t,e=[],n=0;n<f.length;n++)t=f[n],e.push(r(t));return e}()).unsubscribe});return g};var ut=function(t){var n=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],r=function(t){if(m.contains(n,t))return!0;var e=t.internalDeps();return e.length?(n.push(t),m.any(e,r)):(n.push(t),!1)};return m.any(t,r)},ht=function(t){return m.isFunction(t)?t:m.always(t)};function dt(t,e,n){ct.call(this,e,n),this.property=t,this.subscribe=m.bind(this.subscribe,this),this.current=V,this.currentValueRootId=void 0,this.propertyEnded=!1}function ft(t,e,n){at.call(this,t),a(e),this.dispatcher=new dt(this,e,n),ot(this)}b.groupSimultaneous=function(){for(var t=arguments.length,r=Array(t),e=0;e<t;e++)r[e]=arguments[e];1===r.length&&p(r[0])&&(r=r[0]);var n=function(){for(var t,e=[],n=0;n<r.length;n++)t=r[n],e.push(new D(t));return e}();return S(new b.Desc(b,"groupSimultaneous",r),b.when(n,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}))},e(dt,ct),t(dt.prototype,{push:function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new P(t),this.currentValueRootId=x.currentEventId()),ct.prototype.push.call(this,t)},maybeSubSource:function(t,e){return e===b.noMore?h:this.propertyEnded?(t(rt()),h):ct.prototype.subscribe.call(this,t)},subscribe:function(t){var e=this,n=b.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var r=x.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&r&&r!==i?x.whenDoneWith(this.property,function(){if(e.currentValueRootId===i)return t(tt(e.current.get().value()))}):x.inTransaction(void 0,this,function(){return n=t(tt(this.current.get().value()))},[]),this.maybeSubSource(t,n)}return this.maybeSubSource(t,n)}}),e(ft,at),t(ft.prototype,{_isProperty:!0,changes:function(){var t=this;return new lt(new b.Desc(this,"changes",[]),function(e){return t.dispatcher.subscribe(function(t){if(!t.isInitial())return e(t)})})},withHandler:function(t){return new ft(new b.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)},toProperty:function(){return function(t){d("no arguments supported",0===t.length)}(arguments),this},toEventStream:function(){var t=this;return new lt(new b.Desc(this,"toEventStream",[]),function(e){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),e(t)})})}}),b.Property=ft,b.constant=function(e){return new ft(new b.Desc(b,"constant",[e]),function(t){return t(tt(e)),t(rt()),h})},b.fromBinder=function(r){var u=arguments.length<=1||void 0===arguments[1]?m.id:arguments[1];return new lt(new b.Desc(b,"fromBinder",[r,u]),function(c){function l(){if(!t)return null!=n?(n(),t=!0):e=!0}var t=!1,e=!1,n=r(function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=u.apply(this,n);p(i)&&(null!=(t=m.last(i))?t._isEvent:void 0)||(i=[i]);for(var o,a=b.more,s=0;s<i.length;s++)if(o=i[s],(a=c(o=nt(o)))===b.noMore||o.isEnd())return l(),a;return a});return e&&l(),l})},b.Observable.prototype.map=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(e){return S(new b.Desc(this,"map",[e]),this.withHandler(function(t){return this.push(t.fmap(e))}))})};function pt(t){return p(t[0])?t[0]:Array.prototype.slice.call(t)}function At(t){return m.isFunction(t[0])?[pt(Array.prototype.slice.call(t,1)),t[0]]:[pt(Array.prototype.slice.call(t,0,t.length-1)),m.last(t)]}b.combineAsArray=function(){var t=pt(arguments);if(t.length){for(var e=[],n=0;n<t.length;n++){var r=l(t[n])?t[n]:b.constant(t[n]);e.push(new I(r,!0))}return S(new b.Desc(b,"combineAsArray",t),b.when(e,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}).toProperty())}return b.constant([])},b.onValues=function(){return b.combineAsArray(Array.prototype.slice.call(arguments,0,arguments.length-1)).onValues(arguments[arguments.length-1])},b.combineWith=function(){var t=At(arguments),e=t[0],n=t[1],r=new b.Desc(b,"combineWith",[n].concat(e));return S(r,b.combineAsArray(e).map(function(t){return n.apply(void 0,t)}))},b.Observable.prototype.combine=function(t,e){var n=W(e),r=new b.Desc(this,"combine",[t,e]);return S(r,b.combineAsArray(this,t).map(function(t){return n(t[0],t[1])}))},b.Observable.prototype.withStateMachine=function(t,s){var c=t,e=new b.Desc(this,"withStateMachine",[t,s]);return S(e,this.withHandler(function(t){var e=s(c,t),n=e[0],r=e[1];c=n;for(var i,o=b.more,a=0;a<r.length;a++)if(i=r[a],(o=this.push(i))===b.noMore)return o;return o}))};function gt(t,e){return t===e}b.Observable.prototype.skipDuplicates=function(){var n=arguments.length<=0||void 0===arguments[0]?gt:arguments[0],t=new b.Desc(this,"skipDuplicates",[]);return S(t,this.withStateMachine(V,function(t,e){return e.hasValue()?e.isInitial()||function(t){return null!=t&&t._isNone}(t)||!n(t.get(),e.value())?[new P(e.value()),[e]]:[t,[]]:[t,[e]]}))},b.Observable.prototype.awaiting=function(t){var e=new b.Desc(this,"awaiting",[t]);return S(e,b.groupSimultaneous(this,t).map(function(t){return 0===t[1].length}).toProperty(!1).skipDuplicates())},b.Observable.prototype.not=function(){return S(new b.Desc(this,"not",[]),this.map(function(t){return!t}))},b.Property.prototype.and=function(t){return S(new b.Desc(this,"and",[t]),this.combine(t,function(t,e){return t&&e}))},b.Property.prototype.or=function(t){return S(new b.Desc(this,"or",[t]),this.combine(t,function(t,e){return t||e}))},b.scheduler={setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},b.EventStream.prototype.bufferWithTime=function(t){return S(new b.Desc(this,"bufferWithTime",[t]),this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},b.EventStream.prototype.bufferWithCount=function(t){return S(new b.Desc(this,"bufferWithCount",[t]),this.bufferWithTimeOrCount(void 0,t))},b.EventStream.prototype.bufferWithTimeOrCount=function(e,n){function t(t){return t.values.length===n?t.flush():void 0!==e?t.schedule():void 0}var r=new b.Desc(this,"bufferWithTimeOrCount",[e,n]);return S(r,this.buffer(e,t,t))},b.EventStream.prototype.buffer=function(e){var n=arguments.length<=1||void 0===arguments[1]?h:arguments[1],r=arguments.length<=2||void 0===arguments[2]?h:arguments[2],i={scheduled:null,end:void 0,values:[],flush:function(){if(this.scheduled&&(b.scheduler.clearTimeout(this.scheduled),this.scheduled=null),0<this.values.length){var t=this.values;this.values=[];var e=this.push(et(t));if(null!=this.end)return this.push(this.end);if(e!==b.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var t=this;if(!this.scheduled)return this.scheduled=e(function(){return t.flush()})}},o=b.more;if(!m.isFunction(e)){var a=e;e=function(t){return b.scheduler.setTimeout(t,a)}}return S(new b.Desc(this,"buffer",[]),this.withHandler(function(t){var e=this;return i.push=function(t){return e.push(t)},t.isError()?o=this.push(t):t.isEnd()?(i.end=t,i.scheduled||i.flush()):(i.values.push(t.value()),n(i)),o}))},b.Observable.prototype.filter=function(t){o(t);for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(e){return S(new b.Desc(this,"filter",[e]),this.withHandler(function(t){return t.filter(e)?this.push(t):b.more}))})},b.once=function(e){return new lt(new T(b,"once",[e]),function(t){return t(nt(e)),t(rt()),h})},b.EventStream.prototype.concat=function(r){var i=this;return new lt(new b.Desc(i,"concat",[r]),function(e){var n=h,t=i.dispatcher.subscribe(function(t){return t.isEnd()?n=r.toEventStream().dispatcher.subscribe(e):e(t)});return function(){return t(),n()}})},b.Property.prototype.concat=function(t){return bt(this,this.changes().concat(t))},b.concatAll=function(){var t=pt(arguments);return t.length?S(new b.Desc(b,"concatAll",t),m.fold(m.tail(t),m.head(t).toEventStream(),function(t,e){return t.concat(e)})):b.never()};var bt=function(r,t){var i=new lt(N(r,"justInitValue"),function(t){var e=void 0,n=r.dispatcher.subscribe(function(t){return t.isEnd()||(e=t),b.noMore});return x.whenDoneWith(i,function(){return null!=e&&t(e),t(rt())}),n});return i.concat(t).toProperty()};b.Observable.prototype.flatMap=function(){return _t(this,yt(arguments))},b.Observable.prototype.flatMapFirst=function(){return _t(this,yt(arguments),!0)};function mt(t){return l(t)?t:b.once(t)}var yt=function(t){return 1===t.length&&l(t[0])?m.always(t[0]):z(t)},_t=function(c,e,l,u){var t=[c],h=[],n=new lt(new b.Desc(c,"flatMap"+(l?"First":""),[e]),function(o){function n(t){var i=mt(e(t.value()));return h.push(i),r.add(function(n,r){return i.dispatcher.subscribe(function(t){if(t.isEnd())return m.remove(i,h),a(),s(r),b.noMore;(null!=t?t._isInitial:void 0)&&(t=t.toNext());var e=o(t);return e===b.noMore&&n(),e})})}var r=new st,i=[],a=function(){var t=i.shift();if(t)return n(t)},s=function(t){if(t(),r.empty())return o(rt())};return r.add(function(t,e){return c.dispatcher.subscribe(function(t){return t.isEnd()?s(e):t.isError()?o(t):l&&1<r.count()?b.more:r.unsubscribed?b.noMore:u&&r.count()>u?i.push(t):n(t)})}),r.unsubscribe});return n.internalDeps=function(){return h.length?t.concat(h):t},n};function vt(){if(!(this instanceof vt))return new vt;this.unsubAll=m.bind(this.unsubAll,this),this.subscribeAll=m.bind(this.subscribeAll,this),this.guardedSink=m.bind(this.guardedSink,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,lt.call(this,new b.Desc(b,"Bus",[]),this.subscribeAll)}b.Observable.prototype.flatMapWithConcurrencyLimit=function(t){for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=new b.Desc(this,"flatMapWithConcurrencyLimit",[t].concat(n));return S(i,_t(this,yt(n),!1,t))},b.Observable.prototype.flatMapConcat=function(){var t=new b.Desc(this,"flatMapConcat",Array.prototype.slice.call(arguments,0));return S(t,this.flatMapWithConcurrencyLimit.apply(this,[1].concat(n.call(arguments))))},b.later=function(n,r){return S(new b.Desc(b,"later",[n,r]),b.fromBinder(function(t){var e=b.scheduler.setTimeout(function(){return t([r,rt()])},n);return function(){return b.scheduler.clearTimeout(e)}}))},b.Observable.prototype.bufferingThrottle=function(e){var t=new b.Desc(this,"bufferingThrottle",[e]);return S(t,this.flatMapConcat(function(t){return b.once(t).concat(b.later(e).filter(!1))}))},b.Property.prototype.bufferingThrottle=function(){return b.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},e(vt,lt),t(vt.prototype,{unsubAll:function(){for(var t,e=this.subscriptions,n=0;n<e.length;n++)"function"==typeof(t=e[n]).unsub&&t.unsub()},subscribeAll:function(t){if(this.ended)t(rt());else{this.sink=t;for(var e,n=function(t){return t.slice(0)}(this.subscriptions),r=0;r<n.length;r++)e=n[r],this.subscribeInput(e)}return this.unsubAll},guardedSink:function(e){var n=this;return function(t){return t.isEnd()?(n.unsubscribeInput(e),b.noMore):n.sink(t)}},subscribeInput:function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input)),t.unsub},unsubscribeInput:function(t){for(var e,n=this.subscriptions,r=0;r<n.length;r++)if((e=n[r]).input===t)return"function"==typeof e.unsub&&e.unsub(),void this.subscriptions.splice(r,1)},plug:function(t){var e=this;if(function(t){if(!(null!=t?t._isObservable:void 0))throw new f("not an Observable : "+t)}(t),!this.ended){var n={input:t};return this.subscriptions.push(n),void 0!==this.sink&&this.subscribeInput(n),function(){return e.unsubscribeInput(t)}}},end:function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(rt())},push:function(t){if(!this.ended&&"function"==typeof this.sink){var e=!this.pushing;if(!e)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(t);this.pushing=!0;try{return this.sink(et(t))}finally{if(e&&this.pushQueue){for(var n=0;n<this.pushQueue.length;){t=this.pushQueue[n];this.sink(et(t)),n++}this.pushQueue=null}this.pushing=!1}}},error:function(t){if("function"==typeof this.sink)return this.sink(new $(t))}}),b.Bus=vt;function wt(o,a){return L(function(n){for(var t=j(a,[function(t,e){return n.apply(void 0,t.concat([e]))}]),e=arguments.length,r=Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return S(new b.Desc(b,o,[n].concat(r)),b.combineAsArray(r).flatMap(t))})}b.fromCallback=wt("fromCallback",function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return b.fromBinder(function(t){return U(e,n)(t),h},function(t){return[t,rt()]})}),b.fromNodeCallback=wt("fromNodeCallback",function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return b.fromBinder(function(t){return U(e,n)(t),h},function(t,e){return t?[new $(t),rt()]:[e,rt()]})}),b.combineTemplate=function(i){function o(t,e,n){return function(t){return t[t.length-1]}(t)[e]=n}function a(t){return p(t)?[]:{}}function n(t){if(l(t))return!0;if(t&&(t.constructor==Object||t.constructor==Array))for(var e in t){if(Object.prototype.hasOwnProperty.call(t,e))if(n(t[e]))return!0}}function e(t,e){if(l(e))c.push(e),s.push(function(n,r){return function(t,e){o(t,n,e[r])}}(t,c.length-1));else if(n(e)){s.push(function(n,r){return function(t){var e=a(r);o(t,n,e),t.push(e)}}(t,e)),r(e),s.push(function(t){t.pop()})}else s.push(function(e,n){return function(t){o(t,e,n)}}(t,e))}function r(t){m.each(t,e)}var s=[],c=[],t=n(i)?(r(i),b.combineAsArray(c).map(function(t){for(var e=a(i),n=[e],r=0;r<s.length;r++)(0,s[r])(n,t);return e})):b.constant(i);return S(new b.Desc(b,"combineTemplate",[i]),t)},b.Observable.prototype.mapEnd=function(){var e=z(arguments);return S(new b.Desc(this,"mapEnd",[e]),this.withHandler(function(t){return t.isEnd()?(this.push(et(e(t))),this.push(rt()),b.noMore):this.push(t)}))},b.Observable.prototype.skipErrors=function(){return S(new b.Desc(this,"skipErrors",[]),this.withHandler(function(t){return t.isError()?b.more:this.push(t)}))},b.EventStream.prototype.takeUntil=function(t){var a={};return S(new b.Desc(this,"takeUntil",[t]),b.groupSimultaneous(this.mapEnd(a),t.skipErrors()).withHandler(function(t){if(t.hasValue()){var e=t.value(),n=e[0];if(e[1].length)return this.push(rt());for(var r,i=b.more,o=0;o<n.length;o++)i=(r=n[o])===a?this.push(rt()):this.push(et(r));return i}return this.push(t)}))},b.Property.prototype.takeUntil=function(t){var e=this.changes().takeUntil(t);return S(new b.Desc(this,"takeUntil",[t]),bt(this,e))},b.Observable.prototype.flatMapLatest=function(){var e=yt(arguments),n=this.toEventStream();return S(new b.Desc(this,"flatMapLatest",[e]),n.flatMap(function(t){return mt(e(t)).takeUntil(n)}))},b.Property.prototype.delayChanges=function(t,e){return S(t,bt(this,e(this.changes())))},b.EventStream.prototype.delayChanges=function(t,e){return S(t,e(this))},b.Observable.prototype.delay=function(e){return this.delayChanges(new b.Desc(this,"delay",[e]),function(t){return t.flatMap(function(t){return b.later(e,t)})})},b.Observable.prototype.debounce=function(e){return this.delayChanges(new b.Desc(this,"debounce",[e]),function(t){return t.flatMapLatest(function(t){return b.later(e,t)})})},b.Observable.prototype.debounceImmediate=function(e){return this.delayChanges(new b.Desc(this,"debounceImmediate",[e]),function(t){return t.flatMapFirst(function(t){return b.once(t).concat(b.later(e).filter(!1))})})},b.Observable.prototype.decode=function(t){return S(new b.Desc(this,"decode",[t]),this.combine(b.combineTemplate(t),function(t,e){return e[t]}))},b.Observable.prototype.scan=function(t,s){var n,c=this;s=W(s);var l=H(t),u=!1;return n=new ft(new b.Desc(this,"scan",[t,s]),function(r){function i(){if(!o)return l.forEach(function(t){if(o=u=!0,(a=r(new X(function(){return t})))===b.noMore)return e(),e=h})}var o=!1,e=h,a=b.more;return e=c.dispatcher.subscribe(function(t){if(t.hasValue()){if(u&&t.isInitial())return b.more;t.isInitial()||i(),o=u=!0;var e=l.getOrElse(void 0),n=s(e,t.value());return l=new P(n),r(t.apply(function(){return n}))}if(t.isEnd()&&(a=i()),a!==b.noMore)return r(t)}),x.whenDoneWith(n,i),e})},b.Observable.prototype.diff=function(t,n){return n=W(n),S(new b.Desc(this,"diff",[t,n]),this.scan([t],function(t,e){return[e,n(t[0],e)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},b.Observable.prototype.doAction=function(){var e=z(arguments);return S(new b.Desc(this,"doAction",[e]),this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},b.Observable.prototype.doEnd=function(){var e=z(arguments);return S(new b.Desc(this,"doEnd",[e]),this.withHandler(function(t){return t.isEnd()&&e(),this.push(t)}))},b.Observable.prototype.doError=function(){var e=z(arguments);return S(new b.Desc(this,"doError",[e]),this.withHandler(function(t){return t.isError()&&e(t.error),this.push(t)}))},b.Observable.prototype.doLog=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return S(new b.Desc(this,"doLog",e),this.withHandler(function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,e.concat([t.log()])),this.push(t)}))},b.Observable.prototype.endOnError=function(t){null==t&&(t=!0);for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(e){return S(new b.Desc(this,"endOnError",[]),this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(rt())):this.push(t)}))})},at.prototype.errors=function(){return S(new b.Desc(this,"errors",[]),this.filter(function(){return!1}))},b.Observable.prototype.take=function(e){return e<=0?b.never():S(new b.Desc(this,"take",[e]),this.withHandler(function(t){return t.hasValue()?0<--e?this.push(t):(0===e&&this.push(t),this.push(rt()),b.noMore):this.push(t)}))},b.Observable.prototype.first=function(){return S(new b.Desc(this,"first",[]),this.take(1))},b.Observable.prototype.mapError=function(){var e=z(arguments);return S(new b.Desc(this,"mapError",[e]),this.withHandler(function(t){return t.isError()?this.push(et(e(t.error))):this.push(t)}))},b.Observable.prototype.flatMapError=function(e){var t=new b.Desc(this,"flatMapError",[e]);return S(t,this.mapError(function(t){return new $(t)}).flatMap(function(t){return t instanceof $?e(t.error):b.once(t)}))},b.EventStream.prototype.flatScan=function(t,e){var n=t;return this.flatMapConcat(function(t){return mt(e(n,t)).doAction(function(t){return n=t})}).toProperty(t)},b.EventStream.prototype.sampledBy=function(t,e){return S(new b.Desc(this,"sampledBy",[t,e]),this.toProperty().sampledBy(t,e))},b.Property.prototype.sampledBy=function(t,e){var n=!1;e=null!=e?W(e):(n=!0,function(t){return t.value()});var r=new I(this,!1,n),i=new I(t,!0,n),o=b.when([r,i],e),a=t._isProperty?o.toProperty():o;return S(new b.Desc(this,"sampledBy",[t,e]),a)},b.Property.prototype.sample=function(t){return S(new b.Desc(this,"sample",[t]),this.sampledBy(b.interval(t,{})))},b.Observable.prototype.map=function(t){if(t&&t._isProperty)return t.sampledBy(this,i);for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(e){return S(new b.Desc(this,"map",[e]),this.withHandler(function(t){return this.push(t.fmap(e))}))})},b.Observable.prototype.fold=function(t,e){return S(new b.Desc(this,"fold",[t,e]),this.scan(t,e).sampledBy(this.filter(!1).mapEnd().toProperty()))},at.prototype.reduce=at.prototype.fold;var xt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]];function Mt(t){return[t,rt()]}b.fromEventTarget=function(e,n,t){var r=function(t){for(var e,n=0;n<xt.length;n++){var r=[t[(e=xt[n])[0]],t[e[1]]];if(r[0]&&r[1])return r}for(var i=0;i<xt.length;i++){var o=t[(e=xt[i])[0]];if(o)return[o,function(){}]}throw new $("No suitable event methods in "+t)}(e),i=r[0],o=r[1],a=new b.Desc(b,"fromEvent",[e,n]);return S(a,b.fromBinder(function(t){return i.call(e,n,t),function(){return o.call(e,n,t)}},t))},b.fromEvent=b.fromEventTarget,b.fromPoll=function(n,t){var e=new b.Desc(b,"fromPoll",[n,t]);return S(e,b.fromBinder(function(t){var e=b.scheduler.setInterval(t,n);return function(){return b.scheduler.clearInterval(e)}},t))},b.fromPromise=function(n,r){var t=arguments.length<=2||void 0===arguments[2]?Mt:arguments[2];return S(new b.Desc(b,"fromPromise",[n]),b.fromBinder(function(e){var t=n.then(e,function(t){return e(new $(t))});return t&&"function"==typeof t.done&&t.done(),r?function(){if("function"==typeof n.abort)return n.abort()}:function(){}},t))},b.Observable.prototype.groupBy=function(o){var a=arguments.length<=1||void 0===arguments[1]?b._.id:arguments[1],s={},c=this;return c.filter(function(t){return!s[o(t)]}).map(function(t){var e=o(t),n=c.filter(function(t){return o(t)===e}),r=b.once(t).concat(n),i=a(r,t).withHandler(function(t){if(this.push(t),t.isEnd())return delete s[e]});return s[e]=i})},b.fromArray=function(s){if(function(t){if(!p(t))throw new f("not an array : "+t)}(s),s.length){var c=0,l=new lt(new b.Desc(b,"fromArray",[s]),function(n){var r=!1,i=b.more,o=!1,a=!1;return function t(){if(a=!0,!o){for(o=!0;a;)if(a=!1,i!==b.noMore&&!r){var e=s[c++];(i=n(nt(e)))!==b.noMore&&(c===s.length?n(rt()):x.afterTransaction(l,t))}return o=!1}}(),function(){return r=!0}});return l}return S(new b.Desc(b,"fromArray",s),b.never())},b.EventStream.prototype.holdWhen=function(a){var s=!1,c=[],i=this,l=!1;return new lt(new b.Desc(this,"holdWhen",[a]),function(o){function n(t){if("function"==typeof t&&t(),e.empty()&&r)return o(rt())}var e=new st,r=!1;return e.add(function(t,i){return a.subscribeInternal(function(t){if(!t.hasValue())return t.isEnd()?n(i):o(t);if(!(s=t.value())){var r=c;return c=[],function(){for(var t,e=[],n=0;n<r.length;n++)t=r[n],e.push(o(et(t)));return l&&(e.push(o(rt())),i()),e}()}})}),e.add(function(t,e){return i.subscribeInternal(function(t){return s&&t.hasValue()?c.push(t.value()):t.isEnd()&&c.length?(l=!0,n(e)):o(t)})}),r=!0,n(),e.unsubscribe})},b.interval=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return S(new b.Desc(b,"interval",[t,e]),b.fromPoll(t,function(){return et(e)}))},b.$={},b.$.asEventStream=function(e,n,t){var r=this;return m.isFunction(n)&&(t=n,n=void 0),S(new b.Desc(this.selector||this,"asEventStream",[e]),b.fromBinder(function(t){return r.on(e,n,t),function(){return r.off(e,n,t)}},t))},"undefined"!=typeof jQuery&&jQuery&&(jQuery.fn.asEventStream=b.$.asEventStream),"undefined"!=typeof Zepto&&Zepto&&(Zepto.fn.asEventStream=b.$.asEventStream),b.Observable.prototype.last=function(){var e;return S(new b.Desc(this,"last",[]),this.withHandler(function(t){if(t.isEnd())return e&&this.push(e),this.push(rt()),b.noMore;e=t}))},b.Observable.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.subscribe(function(t){"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,e.concat([t.log()]))}),this},b.EventStream.prototype.merge=function(t){!function(t){if(!(null!=t?t._isEventStream:void 0))throw new f("not an EventStream : "+t)}(t);return S(new b.Desc(this,"merge",[t]),b.mergeAll(this,t))},b.mergeAll=function(){var o=pt(arguments);return o.length?new lt(new b.Desc(b,"mergeAll",o),function(r){var i=0,t=m.map(function(t){return function(n){return t.dispatcher.subscribe(function(t){if(t.isEnd())return++i===o.length?r(rt()):b.more;var e=r(t);return e===b.noMore&&n(),e})}},o);return new b.CompositeUnsubscribe(t).unsubscribe}):b.never()},b.repeatedly=function(t,e){var n=0;return S(new b.Desc(b,"repeatedly",[t,e]),b.fromPoll(t,function(){return e[n++%e.length]}))},b.repeat=function(s){var c=0;return b.fromBinder(function(e){var n=!1,r=b.more,i=function(){};function o(t){return t.isEnd()?n?a():n=!0:r=e(t)}function a(){var t;for(n=!0;n&&r!==b.noMore;)t=s(c++),n=!1,t?i=t.subscribeInternal(o):e(rt());return n=!0}return a(),function(){return i()}})},b.retry=function(t){if(!m.isFunction(t.source))throw new f("'source' option has to be a function");var i=t.source,o=t.retries||0,a=0,s=t.delay||function(){return 0},c=t.isRetryable||function(){return!0},l=!1,u=null;return S(new b.Desc(b,"retry",[t]),b.repeat(function(t){function e(){return i(t).endOnError().withHandler(function(t){return t.isError()?c((u=t).error)&&(0===o||a<o)?void 0:(l=!0,this.push(t)):(t.hasValue()&&(l=!(u=null)),this.push(t))})}if(l)return null;if(u){var n={error:u.error,retriesDone:a},r=b.later(s(n)).filter(!1);return a++,r.concat(b.once().flatMap(e))}return e()}))},b.sequentially=function(t,e){var n=0;return S(new b.Desc(b,"sequentially",[t,e]),b.fromPoll(t,function(){var t=e[n++];return n<e.length?t:n===e.length?[t,rt()]:rt()}))},b.Observable.prototype.skip=function(e){return S(new b.Desc(this,"skip",[e]),this.withHandler(function(t){return t.hasValue()&&0<e?(e--,b.more):this.push(t)}))},b.EventStream.prototype.skipUntil=function(t){var e=t.take(1).map(!0).toProperty(!1);return S(new b.Desc(this,"skipUntil",[t]),this.filter(e))},b.EventStream.prototype.skipWhile=function(t){o(t);for(var n=!1,e=arguments.length,r=Array(1<e?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];return Y(this,t,r,function(e){return S(new b.Desc(this,"skipWhile",[e]),this.withHandler(function(t){return!n&&t.hasValue()&&e(t.value())?b.more:(t.hasValue()&&(n=!0),this.push(t))}))})},b.Observable.prototype.slidingWindow=function(n){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return S(new b.Desc(this,"slidingWindow",[n,e]),this.scan([],function(t,e){return t.concat([e]).slice(-n)}).filter(function(t){return t.length>=e}))};var Ct=[];ot=function(e){if(Ct.length&&!ot.running)try{ot.running=!0,Ct.forEach(function(t){t(e)})}finally{delete ot.running}};function Et(t){this.observable=t}b.spy=function(t){return Ct.push(t)},b.Property.prototype.startWith=function(t){return S(new b.Desc(this,"startWith",[t]),this.scan(t,function(t,e){return e}))},b.EventStream.prototype.startWith=function(t){return S(new b.Desc(this,"startWith",[t]),b.once(t).concat(this))},b.Observable.prototype.takeWhile=function(t){o(t);for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(e){return S(new b.Desc(this,"takeWhile",[e]),this.withHandler(function(t){return t.filter(e)?this.push(t):(this.push(rt()),b.noMore)}))})},b.Observable.prototype.throttle=function(e){return this.delayChanges(new b.Desc(this,"throttle",[e]),function(t){return t.bufferWithTime(e).map(function(t){return t[t.length-1]})})},at.prototype.firstToPromise=function(t){var r=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new f("There isn't default Promise, use shim or parameter");t=Promise}return new t(function(e,n){return r.subscribe(function(t){return t.hasValue()&&e(t.value()),t.isError()&&n(t.error),b.noMore})})},at.prototype.toPromise=function(t){return this.last().firstToPromise(t)},b.try=function(e){return function(t){try{return b.once(e(t))}catch(t){return new b.Error(t)}}},b.update=function(t){function e(r){return function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return r.apply(void 0,[t].concat(e))}}}for(var n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=r.length-1;0<o;)r[o]instanceof Function||(r[o]=m.always(r[o])),r[o]=e(r[o]),o-=2;return S(new b.Desc(b,"update",[t].concat(r)),b.when.apply(b,r).scan(t,function(t,e){return e(t)}))},b.zipAsArray=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=pt(e);return S(new b.Desc(b,"zipAsArray",r),b.zipWith(r,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}))},b.zipWith=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=At(e),i=r[0],o=r[1];return i=m.map(function(t){return t.toEventStream()},i),S(new b.Desc(b,"zipWith",[o].concat(i)),b.when(i,o))},b.Observable.prototype.zip=function(t,e){return S(new b.Desc(this,"zip",[t]),b.zipWith([this,t],e||Array))},Et.prototype.subscribe=function(t,e,n){var r="function"==typeof t?{next:t,error:e,complete:n}:t,i={closed:!1,unsubscribe:function(){i.closed=!0,o()}},o=this.observable.subscribe(function(t){t.isError()?(r.error&&r.error(t.error),i.unsubscribe()):t.isEnd()?(i.closed=!0,r.complete&&r.complete()):r.next&&r.next(t.value())});return i},Et.prototype[r("observable")]=function(){return this},b.Observable.prototype.toESObservable=function(){return new Et(this)},b.Observable.prototype[r("observable")]=b.Observable.prototype.toESObservable,b.fromESObservable=function(t){var n;n=t[r("observable")]?t[r("observable")]():t;var e=new b.Desc(b,"fromESObservable",[n]);return new b.EventStream(e,function(e){var t=n.subscribe({error:function(){e(new b.Error),e(new b.End)},next:function(t){e(new b.Next(t,!0))},complete:function(){e(new b.End)}});return t.unsubscribe?function(){t.unsubscribe()}:t})},null!==Tt(24)&&null!=Tt(25)?(void 0===(kt=function(){return b}.apply(Dt,[]))||(It.exports=kt),null!=this&&(this.Bacon=b)):null!==It&&null!=It.exports?(It.exports=b).Bacon=b:this.Bacon=b}).call(this)}).call(this,Tt(22),Tt(23)(t))},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=E(n(3)),y=C(n(40)),l=C(n(26)),_=C(n(27)),o=C(n(18)),v=C(n(46)),u=C(n(13)),h=C(n(35)),w=C(n(47)),p=E(n(12)),a=C(n(36)),s=C(n(48)),c=C(n(62)),d=C(n(67)),f=C(n(70)),x=C(n(73)),A=C(n(74)),M=C(n(4)),g=n(0);n(77),n(84);var b=C(n(86));function C(t){return t&&t.__esModule?t:{default:t}}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var B=(I.prototype.load_model=function(t,e){var n=!(1<arguments.length&&void 0!==e)||e;M.default.isNull(t)?this.cobra_model=null:this.cobra_model=o.default.from_cobra_json(t),this.map&&(this.map.cobra_model=this.cobra_model,n&&this._updateData(!0,!1),this.settings.get("highlight_missing")&&this.map.draw_all_reactions(!1,!1)),this.callback_manager.run("load_model",null,t,n)},I.prototype.load_map=function(t,e){var n=this,r=!(1<arguments.length&&void 0!==e)||e,i={};if(this.settings.get("semantic_zoom")){var o=this.settings.get("semantic_zoom"),a=Array.isArray(o),s=0;for(o=a?o:o[Symbol.iterator]();;){var c;if(a){if(s>=o.length)break;c=o[s++]}else{if((s=o.next()).done)break;c=s.value}var l=c;Object.keys(l.options).map(function(t){void 0===i[t]&&(i[t]=n.settings.get(t))})}this.semanticOptions=Object.assign({},i)}m.remove_child_nodes(this.zoom_container.zoomedSel),m.remove_child_nodes(this.mapToolsContainer);var u=this.zoom_container.zoomedSel,h=this.zoom_container.svg;this.map&&this.map.key_manager.toggle(!1),this.map=null!==t?_.default.from_data(t,h,this.embeddedCss,u,this.zoom_container,this.settings,this.cobra_model,this.settings.get("enable_search")):new _.default(h,this.embeddedCss,u,this.zoom_container,this.settings,this.cobra_model,this.settings.get("canvas_size_and_loc"),this.settings.get("enable_search")),this._setupStatus(this.map),this.map.set_status("Loading map ..."),r&&this._updateData(!1,!0),this.build_input=new y.default(this.mapToolsContainer,this.map,this.zoom_container,this.settings),this.text_edit_input=new w.default(this.mapToolsContainer,this.map,this.zoom_container),this.brush=new v.default(u,!1,this.map,".canvas-group"),this.map.canvas.callbackManager.set("resize",function(){"brush"===n.mode&&n.brush.toggle(!0)}),this.setUpSettingsMenu(this.mapToolsContainer),this.setUpButtonPanel(this.mapToolsContainer);var d=this.mapToolsContainer.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline");this.setUpMenuBar(d),this.setUpSearchBar(d),this.tooltip_container=new x.default(this.mapToolsContainer,this.settings.get("tooltip_component"),this.zoom_container,this.map,this.settings),this.map.key_manager.assignedKeys=this.getKeys(),this.map.key_manager.inputList=[this.build_input,this.searchBarRef,function(){return n.settingsMenuRef},this.text_edit_input],this.settings.get("enable_keys_with_tooltip")||this.map.key_manager.inputList.push(this.tooltip_container),this.map.key_manager.update(),this.map.key_manager.toggle(this.settings.get("enable_keys")),this.settings.streams.enable_keys.onValue(function(t){n.map.key_manager.toggle(t)});var f=this.settings.get("disabled_buttons")||[];if(this.settings.get("reaction_data")||f.push("Clear reaction data"),this.settings.get("gene_data")||f.push("Clear gene data"),this.settings.get("metabolite_data")||f.push("Clear metabolite data"),this.settings.get("enable_search")||f.push("Find"),this.settings.get("enable_editing")||f.push("Show control points"),this.settings.set("disabled_buttons",f),this.settings.get("zoom_to_element")){var p=this.settings.get("zoom_to_element").type,A=this.settings.get("zoom_to_element").id;if(M.default.isUndefined(p)||-1===["reaction","node"].indexOf(p))throw new Error('zoom_to_element type must be "reaction" or "node"');if(M.default.isUndefined(A))throw new Error("zoom_to_element must include id");"reaction"===p?this.map.zoom_to_reaction(A):"node"===p&&this.map.zoom_to_node(A)}else if(t)this.map.zoom_extent_canvas();else if(this.settings.get("starting_reaction")&&null!==this.cobra_model){var g=this.zoom_container.get_size(),b={x:g.width/2,y:g.height/4};this.map.new_reaction_from_scratch(this.settings.get("starting_reaction"),b,90),this.map.zoom_extent_nodes()}else this.map.zoom_extent_canvas();this.settings.get("enable_editing")?this.zoom_mode():this.view_mode(),this.settings.streams.enable_editing.onValue(function(t){t?n.zoom_mode():n.view_mode()}),this.settings.get("enable_editing")&&this._setupConfirmBeforeExit(),this.map.draw_everything(),this.map.set_status(""),this.callback_manager.run("load_map",null,t,r)},I.prototype.passPropsSettingsMenu=function(t){var e=0<arguments.length&&void 0!==t?t:{};this.map.callback_manager.run("pass_props_settings_menu",null,e)},I.prototype.setUpSettingsMenu=function(t){var n=this;this.settingsMenuRef=null,(0,a.default)(s.default,function(t){n.settingsMenuRef=t},function(t){return n.map.callback_manager.set("pass_props_settings_menu",t)},t.append("div").node()),this.passPropsSettingsMenu({display:!1,settings:this.settings,map:this.map}),M.default.mapObject(this.settings.streams,function(t,e){t.onValue(function(t){n.passPropsSettingsMenu()})}),this.settings.streams.reaction_styles.map(function(t){return M.default.contains(t,"abs")}).skipDuplicates().onValue(function(){return n._updateData(!1,!0)}),this.settings.streams.metabolite_styles.map(function(t){return M.default.contains(t,"abs")}).skipDuplicates().onValue(function(){return n._updateData(!1,!0)})},I.prototype.passPropsMenuBar=function(t){var e=0<arguments.length&&void 0!==t?t:{};this.map.callback_manager.run("pass_props_menu_bar",null,e)},I.prototype.setUpMenuBar=function(t){var r=this;this.menuBarRef=null,(0,a.default)(c.default,function(t){r.menuBarRef=t},function(t){return r.map.callback_manager.set("pass_props_menu_bar",t)},t.append("div").node()),this.passPropsMenuBar({display:"all"===this.settings.get("menu"),settings:this.settings,sel:this.selection,mode:this.mode,map:this.map,saveMap:function(){r.semanticOptions&&(Object.entries(r.semanticOptions).map(function(t){var e=t[0],n=t[1];r.settings.set(e,n)}),r._updateData()),r.map.save()},loadMap:function(t){return r.load_map(t)},assignKeyLoadMap:function(t){r.map.key_manager.assignedKeys.load_map.fn=t},save_svg:function(){return r.map.save_svg()},save_png:function(){return r.map.save_png()},clear_map:function(){r.clear_map()},loadModel:function(t){return r.load_model(t,!0)},assignKeyLoadModel:function(t){r.map.key_manager.assignedKeys.load_model.fn=t},clearModel:function(){r.load_model(null),r.callback_manager.run("clear_model")},updateRules:function(){return r.map.convert_map()},setReactionData:function(t){return r.set_reaction_data(t)},clearReactionData:function(){return r.set_reaction_data(null)},setGeneData:function(t){return r.set_gene_data(t)},clearGeneData:function(){return r.set_gene_data(null,!0)},setMetaboliteData:function(t){return r.set_metabolite_data(t)},clearMetaboliteData:function(t){return r.set_metabolite_data(null)},setMode:function(t){return r._setMode(t)},deleteSelected:function(){return r.map.delete_selected()},undo:function(){return r.map.undo_stack.undo()},redo:function(){return r.map.undo_stack.redo()},align_vertical:function(){return r.map.align_vertical()},align_horizontal:function(){return r.map.align_horizontal()},togglePrimary:function(){return r.map.toggle_selected_node_primary()},cyclePrimary:function(){return r.map.cycle_primary_node()},selectAll:function(){return r.map.select_all()},selectNone:function(){return r.map.select_none()},invertSelection:function(){return r.map.invert_selection()},zoom_in:function(){return r.zoom_container.zoom_in()},zoom_out:function(){return r.zoom_container.zoom_out()},zoomExtentNodes:function(){return r.map.zoom_extent_nodes()},zoomExtentCanvas:function(){return r.map.zoom_extent_canvas()},full_screen:function(){return r.full_screen()},search:function(){return r.passPropsSearchBar({display:!0})},toggleBeziers:function(){return r.map.toggle_beziers()},renderSettingsMenu:function(){return r.passPropsSettingsMenu({display:!0})}}),this.map.callback_manager.set("toggle_beziers",function(){r.passPropsMenuBar()}),this.settings.streams.disabled_buttons.onValue(function(t){r.passPropsMenuBar()}),this.callback_manager.set("set_mode",function(t){r.passPropsMenuBar({mode:t})}),this.settings.streams.menu.onValue(function(t){r.passPropsMenuBar({display:"all"===t})}),this.settings.streams.full_screen_button.onValue(function(t){r.passPropsMenuBar()})},I.prototype.passPropsSearchBar=function(t){var e=0<arguments.length&&void 0!==t?t:{};this.map.callback_manager.run("pass_props_search_bar",null,e)},I.prototype.setUpSearchBar=function(t){var e=this;this.searchBarRef=null,(0,a.default)(d.default,function(t){e.searchBarRef=t},function(t){return e.map.callback_manager.set("pass_props_search_bar",t)},t.append("div").node()),this.passPropsSearchBar({display:!1,searchIndex:this.map.search_index,map:this.map})},I.prototype.passPropsButtonPanel=function(t){var e=0<arguments.length&&void 0!==t?t:{};this.map.callback_manager.run("pass_props_button_panel",null,e)},I.prototype.setUpButtonPanel=function(t){var e=this;(0,a.default)(f.default,null,function(t){return e.map.callback_manager.set("pass_props_button_panel",t)},t.append("div").node()),this.passPropsButtonPanel({display:M.default.contains(["all","zoom"],this.settings.get("menu")),mode:this.mode,settings:this.settings,setMode:function(t){return e._setMode(t)},zoomContainer:this.zoom_container,map:this.map,buildInput:this.build_input,full_screen:function(){return e.full_screen()}}),this.callback_manager.set("set_mode",function(t){e.passPropsButtonPanel({mode:t})}),this.settings.streams.full_screen_button.onValue(function(t){e.passPropsButtonPanel()})},I.prototype._setMode=function(t){this.mode=t,this.build_input.toggle("build"===t),this.build_input.direction_arrow.toggle("build"===t),this.brush.toggle("brush"===t),this.zoom_container.togglePanDrag("zoom"===t||"view"===t),this.map.canvas.toggleResize("view"!==t),"rotate"===t?(this.map.behavior.toggleSelectableDrag(!1),this.map.behavior.toggleRotationMode(!0)):(this.map.behavior.toggleRotationMode("rotate"===t),this.map.behavior.toggleSelectableDrag("brush"===t)),this.map.behavior.toggleSelectableClick("build"===t||"brush"===t),this.map.behavior.toggleLabelDrag("brush"===t),this.map.behavior.toggleTextLabelEdit("text"===t),this.map.behavior.toggleBezierDrag("brush"===t),"view"!==t&&"text"!==t||this.map.select_none(),"rotate"===t&&this.map.deselect_text_labels(),this.map.draw_everything(),this.callback_manager.run("set_mode",null,t)},I.prototype.view_mode=function(){this.callback_manager.run("view_mode"),this._setMode("view")},I.prototype.build_mode=function(){this.callback_manager.run("build_mode"),this._setMode("build")},I.prototype.brush_mode=function(){this.callback_manager.run("brush_mode"),this._setMode("brush")},I.prototype.zoom_mode=function(){this.callback_manager.run("zoom_mode"),this._setMode("zoom")},I.prototype.rotate_mode=function(){this.callback_manager.run("rotate_mode"),this._setMode("rotate")},I.prototype.text_mode=function(){this.callback_manager.run("text_mode"),this._setMode("text")},I.prototype._reactionCheckAddAbs=function(){var t=this,e=this.settings.get("reaction_styles");return!this.settings.get("reaction_data")||this.has_custom_reaction_styles||M.default.contains(e,"abs")?null:(this.settings.set("reaction_styles",e.concat("abs")),function(){t.map.set_status("Visualizing absolute value of reaction data. Change this option in Settings.",5e3)})},I.prototype.set_reaction_data=function(t){this.settings.set("reaction_data",t),t&&(this.settings._options.gene_data=null);var e=this._reactionCheckAddAbs();this._updateData(!0,!0,["reaction"]),e?e():this.map.set_status("");var n=this.settings.get("disabled_buttons")||[],r="Clear reaction data",i="Clear gene data",o=n.indexOf(r);t&&-1!==o?(n.splice(o,1),-1===n.indexOf(i)&&n.push(i),this.settings.set("disabled_buttons",n)):t||-1!==o||(n.push(r),this.settings.set("disabled_buttons",n))},I.prototype.set_gene_data=function(t,e){var n=1<arguments.length&&void 0!==e&&e;this.settings.set("gene_data",t),n&&this.settings.set("show_gene_reaction_rules",!1),t&&(this.settings._options.reaction_data=null,this.settings.set("show_gene_reaction_rules",!0)),this._updateData(!0,!0,["reaction"]),this.map.set_status("");var r=this.settings.get("disabled_buttons")||[],i=r.indexOf("Clear gene data");-1<i&&t?(r.splice(i,1),-1===r.indexOf("Clear reaction data")&&r.push("Clear reaction data"),this.settings.set("disabled_buttons",r)):-1!==i||t||(r.push("Clear gene data"),this.settings.set("disabled_buttons",r))},I.prototype.set_metabolite_data=function(t){this.settings.set("metabolite_data",t),this._updateData(!0,!0,["metabolite"]),this.map.set_status("");var e=this.settings.get("disabled_buttons")||[],n="Clear metabolite data",r=e.indexOf(n);-1<r&&t?(e.splice(r,1),this.settings.set("disabled_buttons",e)):-1!==r||t||(e.push(n),this.settings.set("disabled_buttons",e))},I.prototype._makeGeneDataObject=function(t,e,n){var r={};return null!==e&&m.extend(r,e.reactions),null!==n&&m.extend(r,n.reactions,!0),p.importAndCheck(t,"gene_data",r)},I.prototype.clear_map=function(){this.callback_manager.run("clear_map"),this.map.clearMapData(),this._updateData(!0,!0,["reaction","metabolite"],!1),this.map.draw_everything()},I.prototype._updateData=function(t,e,n,r){var i=0<arguments.length&&void 0!==t&&t,o=1<arguments.length&&void 0!==e&&e,a=this,s=2<arguments.length&&void 0!==n?n:["reaction","metabolite"],c=!(3<arguments.length&&void 0!==r)||r,l=M.default.contains(s,"reaction"),u=M.default.contains(s,"metabolite"),h=void 0,d=void 0,f=void 0;u&&o&&null!==this.map&&(h=p.importAndCheck(this.settings.get("metabolite_data"),"metabolite_data"),this.map.apply_metabolite_data_to_map(h),c&&this.map.draw_all_nodes(!1)),l&&(this.settings.get("reaction_data")&&o&&null!==this.map?(d=p.importAndCheck(this.settings.get("reaction_data"),"reaction_data"),this.map.apply_reaction_data_to_map(d),c&&this.map.draw_all_reactions(!1,!1)):this.settings.get("gene_data")&&o&&null!==this.map?(f=this._makeGeneDataObject(this.settings.get("gene_data"),this.cobra_model,this.map),this.map.apply_gene_data_to_map(f),c&&this.map.draw_all_reactions(!1,!1)):o&&null!==this.map&&(this.map.apply_reaction_data_to_map(null),c&&this.map.draw_all_reactions(!1,!1))),this.update_model_timer&&clearTimeout(this.update_model_timer),this.update_model_timer=setTimeout(function(){u&&i&&null!==a.cobra_model&&(h=h||p.importAndCheck(a.settings.get("metabolite_data"),"metabolite_data"),a.cobra_model.apply_metabolite_data(h,a.settings.get("metabolite_styles"),a.settings.get("metabolite_compare_style"))),l&&(a.settings.get("reaction_data")&&i&&null!==a.cobra_model?(d=d||p.importAndCheck(a.settings.get("reaction_data"),"reaction_data"),a.cobra_model.apply_reaction_data(d,a.settings.get("reaction_styles"),a.settings.get("reaction_compare_style"))):a.settings.get("gene_data")&&i&&null!==a.cobra_model?(f=f||a._makeGeneDataObject(a.settings.get("gene_data"),a.cobra_model,a.map),a.cobra_model.apply_gene_data(f,a.settings.get("reaction_styles"),a.settings.get("identifiers_on_map"),a.settings.get("reaction_compare_style"),a.settings.get("and_method_in_gene_reaction_rule"))):i&&null!==a.cobra_model&&a.cobra_model.apply_reaction_data(null,a.settings.get("reaction_styles"),a.settings.get("reaction_compare_style"))),a.callback_manager.run("update_data",null,i,o,s,c)},5)},I.prototype._createStatus=function(t){this.status_bar=t.append("div").attr("id","status")},I.prototype._setupStatus=function(t){var e=this;t.callback_manager.set("set_status",function(t){return e.status_bar.html(t)})},I.prototype.getKeys=function(){var t=this,e=this.map,n=this.zoom_container;return{save:{key:"ctrl+s",target:e,fn:e.save},save_svg:{key:"ctrl+shift+s",target:e,fn:e.save_svg},save_png:{key:"ctrl+shift+p",target:e,fn:e.save_png},load_map:{key:"ctrl+o",fn:null},convert_map:{target:e,fn:e.convert_map},load_model:{key:"ctrl+m",fn:null},zoom_in_ctrl:{key:"ctrl+=",target:n,fn:n.zoom_in},zoom_in:{key:"=",target:n,fn:n.zoom_in,ignoreWithInput:!0},zoom_out_ctrl:{key:"ctrl+-",target:n,fn:n.zoom_out},zoom_out:{key:"-",target:n,fn:n.zoom_out,ignoreWithInput:!0},extent_nodes_ctrl:{key:"ctrl+0",target:e,fn:e.zoom_extent_nodes},extent_nodes:{key:"0",target:e,fn:e.zoom_extent_nodes,ignoreWithInput:!0},extent_canvas_ctrl:{key:"ctrl+1",target:e,fn:e.zoom_extent_canvas},extent_canvas:{key:"1",target:e,fn:e.zoom_extent_canvas,ignoreWithInput:!0},view_mode:{target:this,fn:this.view_mode,ignoreWithInput:!0},show_settings_ctrl:{key:"ctrl+,",fn:function(){return t.passPropsSettingsMenu({display:!0})}},show_settings:{key:",",fn:function(){return t.passPropsSettingsMenu({display:!0})},ignoreWithInput:!0},build_mode:{key:"n",target:this,fn:this.build_mode,ignoreWithInput:!0,requires:"enable_editing"},zoom_mode:{key:"z",target:this,fn:this.zoom_mode,ignoreWithInput:!0,requires:"enable_editing"},brush_mode:{key:"v",target:this,fn:this.brush_mode,ignoreWithInput:!0,requires:"enable_editing"},rotate_mode:{key:"r",target:this,fn:this.rotate_mode,ignoreWithInput:!0,requires:"enable_editing"},text_mode:{key:"t",target:this,fn:this.text_mode,ignoreWithInput:!0,requires:"enable_editing"},toggle_beziers:{key:"b",target:e,fn:e.toggle_beziers,ignoreWithInput:!0,requires:"enable_editing"},delete_ctrl:{key:"ctrl+backspace",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},delete:{key:"backspace",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},delete_del:{key:"del",target:e,fn:e.delete_selected,ignoreWithInput:!0,requires:"enable_editing"},align_vertical:{key:"alt+l",target:e,fn:e.align_vertical},align_horizontal:{key:"shift+alt+l",target:e,fn:e.align_horizontal},toggle_primary:{key:"p",target:e,fn:e.toggle_selected_node_primary,ignoreWithInput:!0,requires:"enable_editing"},cycle_primary:{key:"c",target:e,fn:e.cycle_primary_node,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_right:{key:"right",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.right,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_down:{key:"down",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.down,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_left:{key:"left",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.left,ignoreWithInput:!0,requires:"enable_editing"},direction_arrow_up:{key:"up",target:this.build_input.direction_arrow,fn:this.build_input.direction_arrow.up,ignoreWithInput:!0,requires:"enable_editing"},undo:{key:"ctrl+z",target:e.undo_stack,fn:e.undo_stack.undo,requires:"enable_editing"},redo:{key:"ctrl+shift+z",target:e.undo_stack,fn:e.undo_stack.redo,requires:"enable_editing"},select_all:{key:"ctrl+a",target:e,fn:e.select_all,ignoreWithInput:!0,requires:"enable_editing"},select_none:{key:"ctrl+shift+a",target:e,fn:e.select_none,ignoreWithInput:!0,requires:"enable_editing"},invert_selection:{target:e,fn:e.invert_selection,requires:"enable_editing"},search_ctrl:{key:"ctrl+f",fn:function(){return t.passPropsSearchBar({display:!0})},requires:"enable_search"},search:{key:"f",fn:function(){return t.passPropsSearchBar({display:!0})},ignoreWithInput:!0,requires:"enable_search"}}},I.prototype._setupConfirmBeforeExit=function(){var e=this;window.onbeforeunload=function(t){return e.settings.get("never_ask_before_quit")?null:"You will lose any unsaved changes."}},I.prototype.full_screen=function(){var i=this,o=["menu","scroll_behavior","enable_editing","enable_keys","enable_tooltips"];if(this.isFullScreen){if((0,g.select)("html").classed("fill-screen",!1),(0,g.select)("body").classed("fill-screen",!1),this.selection.classed("fill-screen-div",!1),this.isFullScreen=!1,this.clearFullScreenEscape&&(this.clearFullScreenEscape(),this.clearFullScreenEscape=null),this.savedFullScreenParent){var t=this.savedFullScreenParent.node();t.insertBefore(this.selection.remove().node(),t.firstChild),this.savedFullScreenParent=null}null!==this.savedFullScreenSettings&&M.default.mapObject(this.savedFullScreenSettings,function(t,e){i.settings.set(e,t)}),this.savedFullScreenSettings=null}else{var e=this.settings.get("full_screen_button");M.default.isObject(e)&&(this.savedFullScreenSettings=M.default.chain(e).pairs().map(function(t){var e=t[0],n=t[1];if(M.default.contains(o,e)){var r=i.settings.get(e);return i.settings.set(e,n),[e,r]}return console.warn(e+" not recognized as an option for full_screen_button"),[null,null]}).filter(function(t){var e=t[0];return t[1],e}).object().value()),(0,g.select)("html").classed("fill-screen",!0),(0,g.select)("body").classed("fill-screen",!0),this.selection.classed("fill-screen-div",!0),this.isFullScreen=!0,this.savedFullScreenParent=(0,g.select)(this.selection.node().parentNode);var n=(0,g.select)("body").node();n.insertBefore(this.selection.remove().node(),n.firstChild),this.clearFullScreenEscape=this.map.key_manager.addEscapeListener(function(){return i.full_screen()})}this.map.zoom_extent_canvas(),this.passPropsButtonPanel({isFullScreen:this.isFullScreen}),this.passPropsMenuBar({isFullScreen:this.isFullScreen})},r(I,[{key:"options",get:function(){throw new Error("builder.options is deprecated. Use builder.settings.get() and builder.settings.set() instead.")},set:function(t){throw new Error("builder.options is deprecated. Use builder.settings.get() and builder.settings.set() instead.")}}]),I);function I(t,e,n,r,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,I),r?r instanceof g.selection||(r="node"in r?(0,g.select)(r.node()):(0,g.select)(r)):r=(0,g.select)("body").append("div"),i=i||{},n=n||b.default,this.map_data=t,this.model_data=e,this.embeddedCss=n,this.selection=r,this.menu_div=null,this.button_div=null,this.search_bar_div=null,this.searchBarRef=null,this.semanticOptions=null,this.mode="zoom",this.selection.datum(this),(this.selection.__builder__=this).has_custom_reaction_styles=Boolean(i.reaction_styles);var a=m.set_options(i,{menu:"all",scroll_behavior:"pan",use_3d_transform:!1,enable_editing:!0,enable_keys:!0,enable_search:!0,fill_screen:!1,zoom_to_element:null,full_screen_button:!1,ignore_bootstrap:!1,disabled_buttons:null,semantic_zoom:null,starting_reaction:null,never_ask_before_quit:!1,unique_map_id:null,primary_metabolite_radius:20,secondary_metabolite_radius:10,marker_radius:5,gene_font_size:18,hide_secondary_metabolites:!1,show_gene_reaction_rules:!1,hide_all_labels:!1,canvas_size_and_loc:null,reaction_data:null,reaction_styles:["color","size","text"],reaction_compare_style:"log2_fold",reaction_scale:null,reaction_scale_preset:"GaBuGeRd",reaction_no_data_color:"#dcdcdc",reaction_no_data_size:8,gene_data:null,and_method_in_gene_reaction_rule:"mean",metabolite_data:null,metabolite_styles:["color","size","text"],metabolite_compare_style:"log2_fold",metabolite_scale:null,metabolite_scale_preset:"WhYlRd",metabolite_no_data_color:"#ffffff",metabolite_no_data_size:10,identifiers_on_map:"bigg_id",highlight_missing:!1,allow_building_duplicate_reactions:!1,cofactors:["atp","adp","nad","nadh","nadp","nadph","gtp","gdp","h","coa","ump","h2o","ppi"],tooltip_component:A.default,enable_tooltips:["label"],enable_keys_with_tooltip:!0,first_load_callback:null},{primary_metabolite_radius:!0,secondary_metabolite_radius:!0,marker_radius:!0,gene_font_size:!0,reaction_no_data_size:!0,metabolite_no_data_size:!0});if(m.check_for_parent_tag(this.selection,"svg"))throw new Error("Builder cannot be placed within an svg node because UI elements are html-based.");this.settings=new h.default(a,["identifiers_on_map","scroll_behavior","hide_secondary_metabolites","show_gene_reaction_rules","hide_all_labels","allow_building_duplicate_reactions","highlight_missing","enable_tooltips","reaction_scale_preset","reaction_no_data_color","reaction_no_data_size","reaction_scale","reaction_styles","reaction_compare_style","and_method_in_gene_reaction_rule","metabolite_scale_preset","metabolite_scale","metabolite_styles","metabolite_compare_style","metabolite_no_data_color","metabolite_no_data_size"]),this.settings.get("fill_screen")&&this.settings.get("full_screen_button")&&(this.settings.set("full_screen_button",!1),console.warn("The option full_screen_button has no effect when fill_screen is true")),this.isFullScreen=!1,this.settings.get("fill_screen")&&((0,g.select)("html").classed("fill-screen",!0),(0,g.select)("body").classed("fill-screen",!0),this.selection.classed("fill-screen-div",!0),this.isFullScreen=!0),this.savedFullScreenSettings=null,this.savedFullScreenParent=null,this.clearFullScreenEscape=null,this.callback_manager=new u.default;var s=this.settings.get("first_load_callback");null!==s&&this.callback_manager.set("first_load",function(){s(o)}),this.zoom_container=new l.default(this.selection,this.settings.get("scroll_behavior"),this.settings.get("use_3d_transform")),this.zoom_container.callbackManager.set("zoom_change",function(){if(o.settings.get("semantic_zoom")){var e=o.zoom_container.windowScale,t=o.settings.get("semantic_zoom").sort(function(t,e){return t.zoomLevel-e.zoomLevel}).find(function(t){return t.zoomLevel>e});if(t){var n=!1;M.default.mapObject(t.options,function(t,e){o.settings.get(e)!==t&&(o.settings.set(e,t),n=!0)}),n&&o._updateData(!1,!0)}}}),this.settings.streams.use_3d_transform.onValue(function(t){o.zoom_container.setUse3dTransform(t)}),this.settings.streams.scroll_behavior.onValue(function(t){o.zoom_container.setScrollBehavior(t)}),this.mapToolsContainer=this.selection.append("div").attr("class","map-tools-container"),this._createStatus(this.selection),this.load_model(this.model_data,!1);var c=this.selection.append("div").attr("class","search-menu-container").append("div").attr("class","search-menu-container-inline");this.menu_div=c.append("div"),this.search_bar_div=c.append("div"),this.button_div=this.selection.append("div"),M.default.delay(function(){o.load_map(o.map_data,!1);var t=o._reactionCheckAddAbs();o._updateData(!0,!0),o.settings.statusBus.onValue(function(t){if("accept"===t){if(o._updateData(!0,!0,["reaction","metabolite"],!1),null!==o.zoom_container){var e=o.settings.get("scroll_behavior");o.zoom_container.setScrollBehavior(e)}null!==o.map&&(o.map.draw_all_nodes(!1),o.map.draw_all_reactions(!0,!1),o.map.select_none())}}),null!==t&&setTimeout(t,500),M.default.defer(function(){return o.callback_manager.run("first_load",o)})},50)}e.default=m.class_with_optional_new(B)},function(t,e){
/**
* vkBeautify - javascript plugin to pretty-print or minify text in XML, JSON, CSS and SQL formats.
*
* Copyright (c) 2012 Vadim Kiryukhin
* vkiryukhin @ gmail.com
* http://www.eslinstructor.net/vkbeautify/
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*   Pretty print
*
*        vkbeautify.xml(text [,indent_pattern]);
*        vkbeautify.json(text [,indent_pattern]);
*        vkbeautify.css(text [,indent_pattern]);
*        vkbeautify.sql(text [,indent_pattern]);
*
*        @text - String; text to beatufy;
*        @indent_pattern - Integer | String;
*                Integer:  number of white spaces;
*                String:   character string to visualize indentation ( can also be a set of white spaces )
*   Minify
*
*        vkbeautify.xmlmin(text [,preserve_comments]);
*        vkbeautify.jsonmin(text);
*        vkbeautify.cssmin(text [,preserve_comments]);
*        vkbeautify.sqlmin(text);
*
*        @text - String; text to minify;
*        @preserve_comments - Bool; [optional];
*                Set this flag to true to prevent removing comments from @text ( minxml and mincss functions only. )
*
*   Examples:
*        vkbeautify.xml(text); // pretty print XML
*        vkbeautify.json(text, 4 ); // pretty print JSON
*        vkbeautify.css(text, '. . . .'); // pretty print CSS
*        vkbeautify.sql(text, '----'); // pretty print SQL
*
*        vkbeautify.xmlmin(text, true);// minify XML, preserve comments
*        vkbeautify.jsonmin(text);// minify JSON
*        vkbeautify.cssmin(text);// minify CSS, remove comments ( default )
*        vkbeautify.sqlmin(text);// minify SQL
*
*/
function p(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}for(var n=["\n"],r=0;r<100;r++)n.push(n[r]+e);return n}function n(){this.step="    ",this.shift=p(this.step)}n.prototype.xml=function(t,e){var n=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),r=n.length,i=!1,o=0,a="",s=0,c=e?p(e):this.shift;for(s=0;s<r;s++)-1<n[s].search(/<!/)?(a+=c[o]+n[s],i=!0,(-1<n[s].search(/-->/)||-1<n[s].search(/\]>/)||-1<n[s].search(/!DOCTYPE/))&&(i=!1)):-1<n[s].search(/-->/)||-1<n[s].search(/\]>/)?(a+=n[s],i=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(a+=n[s],i||o--):-1<n[s].search(/<\w/)&&-1==n[s].search(/<\//)&&-1==n[s].search(/\/>/)?a=a+=i?n[s]:c[o++]+n[s]:-1<n[s].search(/<\w/)&&-1<n[s].search(/<\//)?a=a+=i?n[s]:c[o]+n[s]:-1<n[s].search(/<\//)?a=a+=i?n[s]:c[--o]+n[s]:-1<n[s].search(/\/>/)?a=a+=i?n[s]:c[o]+n[s]:-1<n[s].search(/<\?/)?a+=c[o]+n[s]:-1<n[s].search(/xmlns\:/)||-1<n[s].search(/xmlns\=/)?a+=c[o]+n[s]:a+=n[s];return"\n"==a[0]?a.slice(1):a},n.prototype.json=function(t,e){e=e||this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},n.prototype.css=function(t,e){var n=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),r=n.length,i=0,o="",a=0,s=e?p(e):this.shift;for(a=0;a<r;a++)/\{/.exec(n[a])?o+=s[i++]+n[a]:/\}/.exec(n[a])?o+=s[--i]+n[a]:(/\*\\/.exec(n[a]),o+=s[i]+n[a]);return o.replace(/^\n{1,}/,"")},n.prototype.sql=function(t,e){var n,r,i,o=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),a=o.length,s=[],c=0,l=this.step,u=0,h="",d=0,f=e?p(e):this.shift;for(d=0;d<a;d++)s=d%2?s.concat(o[d]):s.concat((n=o[d],r=l,n.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+r+r+"AND ").replace(/ BETWEEN /gi,"~::~"+r+"BETWEEN ").replace(/ CASE /gi,"~::~"+r+"CASE ").replace(/ ELSE /gi,"~::~"+r+"ELSE ").replace(/ END /gi,"~::~"+r+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+r+"ON ").replace(/ OR /gi,"~::~"+r+r+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+r+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+r).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+r+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")));for(a=s.length,d=0;d<a;d++){i=s[d],u=u-(i.replace(/\(/g,"").length-i.replace(/\)/g,"").length),/\s{0,}\s{0,}SELECT\s{0,}/.exec(s[d])&&(s[d]=s[d].replace(/\,/g,",\n"+l+l)),/\s{0,}\s{0,}SET\s{0,}/.exec(s[d])&&(s[d]=s[d].replace(/\,/g,",\n"+l+l)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(s[d])?h+=f[++c]+s[d]:/\'/.exec(s[d])?(u<1&&c&&c--,h+=s[d]):(h+=f[c]+s[d],u<1&&c&&c--)}return h=h.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},n.prototype.xmlmin=function(t,e){return(e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},n.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},n.prototype.cssmin=function(t,e){return(e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},n.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},t.exports=new n},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(t,e,n){"use strict";e.__esModule=!0;var s=r(n(3)),c=r(n(13)),i=r(n(4)),l=n(0),o=n(91);function r(t){return t&&t.__esModule?t:{default:t}}var a=(u.prototype.setScrollBehavior=function(t){this._scrollBehavior=t,this._updateScroll()},u.prototype.setUse3dTransform=function(t){this._use3dTransform=t},u.prototype.togglePanDrag=function(t){i.default.isUndefined(t)?this._panDragOn=!this._panDragOn:this._panDragOn=t,this._panDragOn?this.zoomedSel.style("cursor","grab"):i.default.contains(["grab","grabbing"],this.zoomedSel.style("cursor"))&&this.zoomedSel.style("cursor",null),this._updateScroll()},u.prototype._updateScroll=function(){var r=this;if(!i.default.contains(["zoom","pan","none"],this._scrollBehavior))throw Error("Bad value for scroll_behavior: "+this._scrollBehavior);if(this.container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null).on("dblclick.zoom",null).on("mousewheel.escher",null).on("DOMMouseScroll.escher",null).on("wheel.escher",null).on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),this._zoomBehavior=(0,o.zoom)().on("start",function(){l.event.sourceEvent&&"mousedown"===l.event.sourceEvent.type&&r.zoomedSel.style("cursor","grabbing"),null!==l.event.sourceEvent&&(l.event.sourceEvent.stopPropagation(),l.event.sourceEvent.preventDefault())}).on("zoom",function(){r._goToCallback(l.event.transform.k,{x:l.event.transform.x,y:l.event.transform.y})}).on("end",function(){l.event.sourceEvent&&"mouseup"===l.event.sourceEvent.type&&r.zoomedSel.style("cursor","grab")}),this.container.call(this._zoomBehavior),this.container.on("dblclick.zoom",null),this._panDragOn||this.container.on("mousedown.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null).on("touchend.zoom",null),"zoom"!==this._scrollBehavior&&this.container.on("mousewheel.zoom",null).on("DOMMouseScroll.zoom",null).on("wheel.zoom",null),"pan"===this._scrollBehavior){var t=function(){var t=l.event;function e(t,e){return.5*(i.default.isUndefined(t)?e:-t/1.5)}t.stopPropagation(),t.preventDefault(),t.returnValue=!1;var n={x:r.windowTranslate.x-e(t.wheelDeltaX,t.deltaX),y:r.windowTranslate.y-e(t.wheelDeltaY,t.deltaY)};r.goTo(r.windowScale,n)};this.container.on("mousewheel.escher",t),this.container.on("DOMMouseScroll.escher",t),this.container.on("wheel.escher",t)}this.goTo(this.windowScale,this.windowTranslate)},u.prototype.goTo=function(t,e){if(t)if(e&&"x"in e&&"y"in e&&!i.default.isNaN(e.x)&&!i.default.isNaN(e.y)){var n=o.zoomIdentity.translate(e.x,e.y).scale(t);this.container.call(this._zoomBehavior.transform,n)}else console.error("Bad translate value");else console.error("Bad scale value")},u.prototype._goToCallback=function(t,e){var n=this;this.windowScale!==t&&(this.windowScale=t,this.callbackManager.run("zoom_change")),this.windowTranslate=e,this._use3dTransform?(i.default.isNull(this._zoomTimeout)||clearTimeout(this._zoomTimeout),this._goTo3d(t,e,this._svgScale,this._svgTranslate),this._zoomTimeout=i.default.delay(function(){n._goToSvg(t,e)},100)):this._goToSvg(t,e),this.callbackManager.run("go_to")},u.prototype._goTo3d=function(t,e,n,r){var i=t/n,o=s.default.c_minus_c(e,s.default.c_times_scalar(r,i)),a="translate("+o.x+"px,"+o.y+"px) scale("+i+")";this.css3TransformContainer.style("transform",a),this.css3TransformContainer.style("-webkit-transform",a),this.css3TransformContainer.style("transform-origin","0 0"),this.css3TransformContainer.style("-webkit-transform-origin","0 0")},u.prototype._clear3d=function(){this.css3TransformContainer.style("transform",null),this.css3TransformContainer.style("-webkit-transform",null),this.css3TransformContainer.style("transform-origin",null),this.css3TransformContainer.style("-webkit-transform-origin",null)},u.prototype._goToSvg=function(t,e,n){var r=this;this.callbackManager.run("svg_start"),i.default.defer(function(){r._clear3d(),r.zoomedSel.attr("transform","translate("+e.x+","+e.y+") scale("+t+")"),r._svgScale=t,r._svgTranslate=e,i.default.defer(function(){r.callbackManager.run("svg_finish"),i.default.isUndefined(n)||n()})})},u.prototype.zoomBy=function(t){var e=this.get_size(),n={x:e.width/2-((e.width/2-this.windowTranslate.x)*t+this.windowTranslate.x),y:e.height/2-((e.height/2-this.windowTranslate.y)*t+this.windowTranslate.y)};this.goTo(this.windowScale*t,s.default.c_plus_c(this.windowTranslate,n))},u.prototype.zoom_in=function(){this.zoomBy(1.5)},u.prototype.zoom_out=function(){this.zoomBy(.667)},u.prototype.get_size=function(){var t=this.selection.node().getBoundingClientRect();return{width:t.width,height:t.height}},u.prototype.translateOffScreen=function(t){var e=this.get_size(),n={min:-this.windowTranslate.x/this.windowScale+120/this.windowScale,max:-this.windowTranslate.x/this.windowScale+(e.width-120)/this.windowScale},r={min:-this.windowTranslate.y/this.windowScale+120/this.windowScale,max:-this.windowTranslate.y/this.windowScale+(e.height-120)/this.windowScale};t.x<n.min?(this.windowTranslate.x=this.windowTranslate.x-(t.x-n.min)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)):t.x>n.max&&(this.windowTranslate.x=this.windowTranslate.x-(t.x-n.max)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)),t.y<r.min?(this.windowTranslate.y=this.windowTranslate.y-(t.y-r.min)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate)):t.y>r.max&&(this.windowTranslate.y=this.windowTranslate.y-(t.y-r.max)*this.windowScale,this.goTo(this.windowScale,this.windowTranslate))},u);function u(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),t.classed("escher-container",!0),navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Mozilla")&&t.on("touchstart touchmove",function(){l.event.stopPropagation()});var r=t.append("div").attr("class","escher-zoom-container"),i=r.append("div").attr("class","escher-3d-transform-container"),o=i.append("svg").attr("class","escher-svg").attr("xmlns","http://www.w3.org/2000/svg");o.select(".zoom-g").remove();var a=o.append("g").attr("class","zoom-g");this.selection=t,this.container=r,this.css3TransformContainer=i,this.svg=o,this.zoomedSel=a,this.windowTranslate={x:0,y:0},this.windowScale=1,this._scrollBehavior=e,this._use3dTransform=n,this._panDragOn=!0,this._zoomBehavior=null,this._zoomTimeout=null,this._svgScale=this.windowScale,this._svgTranslate=this.windowTranslate,this.callbackManager=new c.default,this._updateScroll()}e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},B=i(n(3)),d=r(n(43)),f=r(n(28)),p=r(n(44)),I=i(n(29)),A=r(n(31)),g=r(n(13)),b=r(n(32)),m=r(n(45)),s=i(n(12)),y=r(n(34)),k=(r(n(19)),r(n(4))),l=n(0);function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(e){return function(t){return e.apply(null,t)}}var a=(D.from_data=function(t,e,n,r,i,o,a,s){var c=new D(e,n,r,i,o,a,t[1].canvas,s,t[0].map_name,t[0].map_id,t[0].map_description.replace(/(\nLast Modified.*)+$/g,"")+"\nLast Modified "+Date(Date.now()).toString());for(var l in c.reactions=t[1].reactions,c.nodes=t[1].nodes,c.text_labels=t[1].text_labels,c.nodes){var u=c.nodes[l];if(u.connected_segments=[],s){if("metabolite"!==u.node_type)continue;c.search_index.insert("n"+l,{name:u.bigg_id,data:{type:"metabolite",node_id:l}}),c.search_index.insert("n_name"+l,{name:u.name,data:{type:"metabolite",node_id:l}})}}for(var h in c.reactions){var d=c.reactions[h];if(s)for(var f in c.search_index.insert("r"+h,{name:d.bigg_id,data:{type:"reaction",reaction_id:h}}),c.search_index.insert("r_name"+h,{name:d.name,data:{type:"reaction",reaction_id:h}}),d.genes){var p=d.genes[f];c.search_index.insert("r"+h+"_g"+f,{name:p.bigg_id,data:{type:"reaction",reaction_id:h}}),c.search_index.insert("r"+h+"_g_name"+f,{name:p.name,data:{type:"reaction",reaction_id:h}})}var A=[],g=function(){if((m=d.segments[b]).reversibility=d.reversibility,!(m.from_node_id in c.nodes&&m.to_node_id in c.nodes))return console.warn("Bad node references in segment "+b+". Deleting segment."),A.push(b),"continue";var e=c.nodes[m.from_node_id],n=c.nodes[m.to_node_id];d.metabolites.forEach(function(t){t.bigg_id===e.bigg_id?m.from_node_coefficient=t.coefficient:t.bigg_id===n.bigg_id&&(m.to_node_coefficient=t.coefficient)}),[e,n].forEach(function(t){t.connected_segments.push({segment_id:b,reaction_id:h})}),y=c.nodes[m.from_node_id],_=c.nodes[m.to_node_id],"metabolite"!=y.node_type&&"metabolite"!=_.node_type||(v=B.c_plus_c(y,B.c_times_scalar(B.c_minus_c(_,y),.5)),null===m.b1&&(m.b1=v),null===m.b2&&(m.b2=v))};for(var b in d.segments){var m,y,_,v;g()}A.forEach(function(t){delete d.segments[t]})}if(s)for(var w in c.text_labels){var x=c.text_labels[w];c.search_index.insert("l"+w,{name:x.text,data:{type:"text_label",text_label_id:w}})}c.beziers=I.newBeziersForReactions(c.reactions),c.largest_ids.reactions=E(c.reactions),c.largest_ids.nodes=E(c.nodes),c.largest_ids.text_labels=E(c.text_labels);var M=0;for(var C in c.reactions)M=E(c.reactions[C].segments,M);return c.largest_ids.segments=M,c.apply_reaction_data_to_map(null),c.apply_metabolite_data_to_map(null),c.apply_gene_data_to_map(null),c;function E(t,e){return k.default.isUndefined(e)&&(e=0),k.default.isUndefined(t)?e:Math.max.apply(null,Object.keys(t).map(function(t){return parseInt(t)}).concat([e]))}},D.prototype.setup_containers=function(t){t.append("g").attr("id","reactions"),t.append("g").attr("id","nodes"),t.append("g").attr("id","beziers"),t.append("g").attr("id","text-labels")},D.prototype.reset_containers=function(){this.sel.select("#reactions").selectAll(".reaction").remove(),this.sel.select("#nodes").selectAll(".node").remove(),this.sel.select("#beziers").selectAll(".bezier").remove(),this.sel.select("#text-labels").selectAll(".text-label").remove()},D.prototype.set_status=function(t,e){this.callback_manager.run("set_status",null,t),clearTimeout(this._status_timer),this._status_timer=null,void 0!==e&&(this._status_timer=setTimeout(function(){this.callback_manager.run("set_status",null,"")}.bind(this),e))},D.prototype.clearMapData=function(){this.reactions={},this.beziers={},this.nodes={},this.text_labels={},this.map_name="new_map",this.map_id=B.generate_map_id(),this.map_description=""},D.prototype.has_cobra_model=function(){return null!==this.cobra_model},D.prototype.draw_everything=function(){this.draw_all_reactions(!0,!0),this.draw_all_nodes(!0),this.draw_all_text_labels()},D.prototype.draw_all_reactions=function(t,e){k.default.isUndefined(t)&&(t=!0),k.default.isUndefined(e)&&(e=!0);var n=[];for(var r in this.reactions)n.push(r);this.draw_these_reactions(n,!1),t&&this.beziers_enabled&&this.draw_all_beziers(),e&&this.clear_deleted_reactions(t)},D.prototype.draw_these_reactions=function(t,e){k.default.isUndefined(e)&&(e=!0);var n=B.object_slice_for_ids_ref(this.reactions,t),r=function(t){return this.draw.update_reaction(t,this.scale,this.cobra_model,this.nodes,this.defs,this.has_data_on_reactions)}.bind(this);if(B.draw_an_object(this.sel,"#reactions",".reaction",n,"reaction_id",this.draw.create_reaction.bind(this.draw),r),e){var i=I.bezierIdsForReactionIds(n);this.draw_these_beziers(i)}},D.prototype.clear_deleted_reactions=function(t){k.default.isUndefined(t)&&(t=!0),B.draw_an_object(this.sel,"#reactions",".reaction",this.reactions,"reaction_id",null,function(t){B.draw_a_nested_object(t,".segment-group","segments","segment_id",null,null,function(t){t.remove()})},function(t){t.remove()}),!0===t&&this.clear_deleted_beziers()},D.prototype.draw_all_nodes=function(t){void 0===t&&(t=!0);var e=[];for(var n in this.nodes)e.push(n);this.draw_these_nodes(e),t&&this.clear_deleted_nodes()},D.prototype.draw_these_nodes=function(t){var e=B.object_slice_for_ids_ref(this.nodes,t),n=function(t){return this.draw.create_node(t,this.nodes,this.reactions)}.bind(this),r=function(t){return this.draw.update_node(t,this.scale,this.has_data_on_nodes,this.behavior.selectableMousedown,this.behavior.selectableClick,this.behavior.nodeMouseover,this.behavior.nodeMouseout,this.behavior.selectableDrag,this.behavior.nodeLabelDrag)}.bind(this);B.draw_an_object(this.sel,"#nodes",".node",e,"node_id",n,r)},D.prototype.clear_deleted_nodes=function(){B.draw_an_object(this.sel,"#nodes",".node",this.nodes,"node_id",null,null,function(t){t.remove()})},D.prototype.draw_all_text_labels=function(){this.draw_these_text_labels(Object.keys(this.text_labels)),this.clear_deleted_text_labels()},D.prototype.draw_these_text_labels=function(t){var e=B.object_slice_for_ids_ref(this.text_labels,t);B.draw_an_object(this.sel,"#text-labels",".text-label",e,"text_label_id",this.draw.create_text_label.bind(this.draw),this.draw.update_text_label.bind(this.draw))},D.prototype.clear_deleted_text_labels=function(){B.draw_an_object(this.sel,"#text-labels",".text-label",this.text_labels,"text_label_id",null,null,function(t){t.remove()})},D.prototype.draw_all_beziers=function(){var t=[];for(var e in this.beziers)t.push(e);this.draw_these_beziers(t),this.clear_deleted_beziers()},D.prototype.draw_these_beziers=function(t){var e=B.object_slice_for_ids_ref(this.beziers,t),n=function(t){return this.draw.update_bezier(t,this.beziers_enabled,this.behavior.bezierDrag,this.behavior.bezierMouseover,this.behavior.bezierMouseout,this.nodes,this.reactions)}.bind(this);B.draw_an_object(this.sel,"#beziers",".bezier",e,"bezier_id",this.draw.create_bezier.bind(this.draw),n)},D.prototype.clear_deleted_beziers=function(){B.draw_an_object(this.sel,"#beziers",".bezier",this.beziers,"bezier_id",null,null,function(t){t.remove()})},D.prototype.show_beziers=function(){this.toggle_beziers(!0)},D.prototype.hide_beziers=function(){this.toggle_beziers(!1)},D.prototype.toggle_beziers=function(t){k.default.isUndefined(t)?this.beziers_enabled=!this.beziers_enabled:this.beziers_enabled=t,this.draw_all_beziers(),this.callback_manager.run("toggle_beziers",null,this.beziers_enabled)},D.prototype.apply_reaction_data_to_map=function(t,e){var n=this.settings.get("reaction_styles"),r=this.settings.get("reaction_compare_style"),i=s.apply_reaction_data_to_reactions(this.reactions,t,n,r,e);return this.has_data_on_reactions=i,this.imported_reaction_data=i?t:null,this.calc_data_stats("reaction")},D.prototype.apply_metabolite_data_to_map=function(t,e){var n=this.settings.get("metabolite_styles"),r=this.settings.get("metabolite_compare_style"),i=s.apply_metabolite_data_to_nodes(this.nodes,t,n,r,e);return this.has_data_on_nodes=i,this.imported_metabolite_data=i?t:null,this.calc_data_stats("metabolite")},D.prototype.apply_gene_data_to_map=function(t,e){var n=this.settings.get("reaction_styles"),r=this.settings.get("reaction_compare_style"),i=this.settings.get("identifiers_on_map"),o=this.settings.get("and_method_in_gene_reaction_rule"),a=s.apply_gene_data_to_reactions(this.reactions,t,n,i,r,o,e);return this.has_data_on_reactions=a,this.imported_gene_data=a?t:null,this.calc_data_stats("reaction")},D.prototype.get_data_statistics=function(){return this.data_statistics},D.prototype.calc_data_stats=function(r){if(-1===["reaction","metabolite"].indexOf(r))throw new Error("Bad type "+r);"data_statistics"in this?r in this.data_statistics||(this.data_statistics[r]=null):(this.data_statistics={},this.data_statistics[r]=null);var i=[];if("metabolite"===r)for(var t in this.nodes){var e=this.nodes[t];k.default.isUndefined(e.data)?console.error("metabolite missing "):null!==e.data&&i.push(e.data)}else if("reaction"==r)for(var n in this.reactions){var o=this.reactions[n];k.default.isUndefined(o.data)?console.error("reaction data missing "):null!==o.data&&i.push(o.data)}if(0===i.length){var a=null===this.data_statistics[r];return this.data_statistics[r]=null,"reaction"===r?this.callback_manager.run("calc_data_stats__reaction",null,!a):this.callback_manager.run("calc_data_stats__metabolite",null,!a),!a}null===this.data_statistics[r]&&(this.data_statistics[r]={});var s=!0,c=B.quartiles(i);if([["min",h(Math.min)],["max",h(Math.max)],["mean",B.mean],["Q1",function(){return c[0]}],["median",function(){return c[1]}],["Q3",function(){return c[2]}]].forEach(function(t){var e,n=t[0];(e=0===i.length?null:(0,t[1])(i))!=this.data_statistics[r][n]&&(s=!1),this.data_statistics[r][n]=e}.bind(this)),this.data_statistics[r].min===this.data_statistics[r].max&&null!==this.data_statistics[r].min){var l=this.data_statistics[r].min,u=this.data_statistics[r].max;this.data_statistics[r].min=l-1-.1*Math.abs(l),this.data_statistics[r].max=u+1+.1*Math.abs(u)}return"reaction"===r?this.callback_manager.run("calc_data_stats__reaction",null,!s):this.callback_manager.run("calc_data_stats__metabolite",null,!s),!s},D.prototype.get_coords_for_node=function(t){var e=this.nodes[t];return{x:e.x,y:e.y}},D.prototype.get_selected_node_ids=function(){var e=[];return this.sel.select("#nodes").selectAll(".selected").each(function(t){e.push(t.node_id)}),e},D.prototype.getSelectedNodes=function(){var e={};return this.sel.select("#nodes").selectAll(".selected").each(function(t){e[t.node_id]=this.nodes[t.node_id]}.bind(this)),e},D.prototype.get_selected_text_label_ids=function(){var e=[];return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e.push(t.text_label_id)}),e},D.prototype.get_selected_text_labels=function(){var e={};return this.sel.select("#text-labels").selectAll(".selected").each(function(t){e[t.text_label_id]=this.text_labels[t.text_label_id]}.bind(this)),e},D.prototype.select_all=function(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",!0)},D.prototype.select_none=function(){this.sel.selectAll(".selected").classed("selected",!1)},D.prototype.invert_selection=function(){this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label").classed("selected",function(){return!(0,l.select)(this).classed("selected")})},D.prototype.select_metabolite_with_id=function(n){var r,i;this.deselect_text_labels(),this.sel.select("#nodes").selectAll(".node").classed("selected",function(t){var e=String(t.node_id)==String(n);return e&&(r={x:(i=t).x,y:t.y}),e}),this.sel.selectAll(".start-reaction-target").style("visibility","hidden"),this.callback_manager.run("select_metabolite_with_id",null,i,r)},D.prototype.select_selectable=function(t,e,n){n=!k.default.isUndefined(n)&&n;var r,i=this.sel.selectAll("#nodes,#text-labels").selectAll(".node,.text-label");r=-1==(0,l.select)(t).attr("class").indexOf("text-label")?t.parentNode:t,n?(0,l.select)(r).classed("selected",!(0,l.select)(r).classed("selected")):(i.classed("selected",!1),(0,l.select)(r).classed("selected",!0));var o,a,s=this.sel.select("#nodes").selectAll(".selected"),c=0;s.each(function(t){o={x:(a=t).x,y:t.y},c++}),this.callback_manager.run("select_selectable",null,c,a,o)},D.prototype.select_single_node=function(){var n=null;return this.sel.select("#nodes").selectAll(".selected").classed("selected",function(t,e){return 0===e&&(n=t,!0)}),n},D.prototype.deselect_nodes=function(){this.sel.select("#nodes").selectAll(".node").classed("selected",!1),this.callback_manager.run("deselect_nodes")},D.prototype.select_text_label=function(t,e){this.deselect_nodes(),this.sel.select("#text-labels").selectAll(".text-label").classed("selected",function(t){return e===t}),this.sel.select("#text-labels").selectAll(".selected").each(function(t){t.x,t.y}),this.callback_manager.run("select_text_label")},D.prototype.deselect_text_labels=function(){this.sel.select("#text-labels").selectAll(".text-label").classed("selected",!1)},D.prototype.align_vertical=function(){return this._align(!1)},D.prototype.align_horizontal=function(){return this._align(!0)},D.prototype._align=function(h){var d=this,f=this.getSelectedNodes(),t=k.default.pick(f,function(t){return"metabolite"!==t.node_type||t.node_is_primary}),e=0<Object.keys(t).length,n=e?t:f,r=Object.keys(n),p=r.reduce(function(t,e){return t+(h?n[e].y:n[e].x)},0)/r.length,A=k.default.pairs(n).map(function(t){var e=t[0],n=t[1];return{nodeId:e,displacement:h?{x:0,y:p-n.y}:{x:p-n.x,y:0}}}),g=[],b={};function i(t,e){var r=[];t.map(function(t){var e=d.nodes[t.nodeId],n=I.moveNodeAndDependents(e,t.nodeId,d.reactions,d.beziers,t.displacement);r=B.uniqueConcat([r,n.reaction_ids])}),e.map(function(t){var e=d.reactions[t.reactionId].segments[t.segmentId];e[t.bez]=B.c_plus_c(e[t.bez],t.displacement),d.beziers[t.bezierId].x=e[t.bez].x,d.beziers[t.bezierId].y=e[t.bez].y}),d.draw_these_nodes(t.map(function(t){return t.nodeId})),d.draw_these_reactions(r,!0)}e&&k.default.mapObject(n,function(u,t){u.connected_segments.map(function(t){var n=t.segment_id,r=t.reaction_id,e=d.reactions[r].segments[n],i=e.to_node_id===u.node_id,o=i?e.from_node_id:e.to_node_id,a=d.nodes[o],s=i?"b2":"b1";if(a.node_id in f&&e[s]){var c=I.bezierIdForSegmentId(n,s);if(g.push({reactionId:r,segmentId:n,bez:s,bezierId:c,displacement:h?{x:0,y:u.y-e[s].y}:{x:u.x-e[s].x,y:0}}),!("metabolite"!==a.node_type||a.node_is_primary||o in b)){var l=a.connected_segments.filter(function(t){var e=d.reactions[r].segments[n];return e.to_node_id===a.node_id?e.from_node_id in f:e.to_node_id in f});a.connected_segments.length<=l.length&&(A.push({nodeId:o,displacement:h?{x:0,y:p-u.y}:{x:p-u.x,y:0}}),b[o]=!0)}}})}),this.undo_stack.push(function(){function t(t){return t.map(function(t){return o({},t,{displacement:{x:-t.displacement.x,y:-t.displacement.y}})})}i(t(A),t(g))},function(){i(A,g)}).do(),this.set_status(e?"Aligned reactions":"Aligned nodes",3e3)},D.prototype.delete_selected=function(){var t=this.getSelectedNodes(),e=this.get_selected_text_labels();(1<=Object.keys(t).length||1<=Object.keys(e).length)&&this.delete_selectable(t,e,!0)},D.prototype.delete_selectable=function(c,l,u){var t=this.segments_and_reactions_for_nodes(c),h=t.segment_objs_w_segments,d=t.reactions,f=B.clone(c),p=B.clone(h),A=B.clone(d),g=B.clone(l),e=function(t,e,n,r){this.delete_node_data(Object.keys(c)),this.delete_segment_data(n),this.delete_reaction_data(Object.keys(e)),this.delete_text_label_data(Object.keys(r));var i=!1,o=!1;this.has_data_on_reactions&&(i=this.calc_data_stats("reaction")),this.has_data_on_nodes&&(o=this.calc_data_stats("metabolite")),u&&(i?this.draw_all_reactions(!0,!0):this.clear_deleted_reactions(),o?this.draw_all_nodes(!0):this.clear_deleted_nodes(),this.clear_deleted_text_labels())}.bind(this);e(c,d,h,l),this.undo_stack.push(function(){this.extend_nodes(f),this.extend_reactions(A);var t=Object.keys(A);for(var e in p){var n=p[e],r=n.segment;[(this.reactions[n.reaction_id].segments[n.segment_id]=r).from_node_id,r.to_node_id].forEach(function(t){t in f||this.nodes[t].connected_segments.push({reaction_id:n.reaction_id,segment_id:n.segment_id})}.bind(this));var i=n.segment_id,o=n.reaction_id,a={};a[i]=n.segment,B.extend(this.beziers,I.newBeziersForSegments(a,o)),-1===t.indexOf(n.reaction_id)&&t.push(n.reaction_id)}if(this.has_data_on_reactions?this.calc_data_stats("reaction")?this.draw_all_reactions(!0,!1):this.draw_these_reactions(t):u&&this.draw_these_reactions(t),this.has_data_on_nodes){var s=this.calc_data_stats("metabolite");u&&(s?this.draw_all_nodes(!1):this.draw_these_nodes(Object.keys(f)))}else u&&this.draw_these_nodes(Object.keys(f));B.extend(this.text_labels,g),u&&this.draw_these_text_labels(Object.keys(g)),l=B.clone(g),c=B.clone(f),h=B.clone(p),d=B.clone(A)}.bind(this),function(){e(c,d,h,l)}.bind(this))},D.prototype.delete_node_data=function(t){var e=this;t.forEach(function(t){e.enable_search&&"metabolite"===e.nodes[t].node_type&&(e.search_index.remove("n"+t)&&e.search_index.remove("n_name"+t)||console.warn("Could not find deleted metabolite in search index")),delete e.nodes[t]})},D.prototype.delete_segment_data=function(t){for(var e in t){var n=t[e],r=this.reactions[n.reaction_id];if(!(n.segment_id in r.segments))return;var i=r.segments[n.segment_id];[i.from_node_id,i.to_node_id].forEach(function(t){if(t in this.nodes){var e=this.nodes[t];e.connected_segments=e.connected_segments.filter(function(t){return t.segment_id!=n.segment_id})}}.bind(this)),["b1","b2"].forEach(function(t){var e=I.bezierIdForSegmentId(n.segment_id,t);delete this.beziers[e]}.bind(this)),delete r.segments[n.segment_id]}},D.prototype.delete_reaction_data=function(t){t.forEach(function(t){var e=this.reactions[t];for(var n in e.segments)["b1","b2"].forEach(function(t){var e=I.bezierIdForSegmentId(n,t);delete this.beziers[e]}.bind(this));delete this.reactions[t];var r=this.search_index.remove("r"+t)&&this.search_index.remove("r_name"+t);for(var i in r||console.warn("Could not find deleted reaction "+t+" in search index"),e.genes)(r=this.search_index.remove("r"+t+"_g"+i)&&this.search_index.remove("r"+t+"_g_name"+i))||console.warn("Could not find deleted gene "+i+" in search index")}.bind(this))},D.prototype.delete_text_label_data=function(t){t.forEach(function(t){delete this.text_labels[t],this.search_index.remove("l"+t)||console.warn("Could not find deleted text label in search index")}.bind(this))},D.prototype._extend_and_draw_metabolite=function(t,e){this.extend_nodes(t);var n=[e];if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");this.apply_metabolite_data_to_map(this.imported_metabolite_data,n)?this.draw_all_nodes(!1):this.draw_these_nodes(n)}else this.draw_these_nodes(n)},D.prototype.new_reaction_from_scratch=function(t,e,n){var r=this;if(this.cobra_model){var i=B.clone(this.cobra_model.reactions[t]);if(0===k.default.size(i.metabolites))throw Error("No metabolites in reaction "+i.bigg_id);var o=k.default.map(i.metabolites,function(t,e){return[t,e]}).filter(function(t){return t[0]<0}).map(function(t){return t[1]}),a=0<o.length?o[0]:Object.keys(i.metabolites)[0],s=this.cobra_model.metabolites[a],c=String(++this.largest_ids.nodes),l=I.getMetLabelLoc(B.to_radians(n),0,1,!0,a,!0),u={connected_segments:[],x:e.x,y:e.y,node_is_primary:!0,label_x:e.x+l.x,label_y:e.y+l.y,name:s.name,bigg_id:a,node_type:"metabolite"},h={};h[c]=u,this._extend_and_draw_metabolite(h,c);var d=B.clone(h),f=this.new_reaction_for_metabolite(t,c,n,!1),p=f.redo,A=f.undo;this.undo_stack.push(function(){A(),r.delete_node_data(Object.keys(h)),h=B.clone(d),r.clear_deleted_nodes(),r.deselect_nodes()},function(){r._extend_and_draw_metabolite(h,c),p()})}else console.error("No CobraModel. Cannot build new reaction")},D.prototype.extend_nodes=function(t){if(this.enable_search)for(var e in t){var n=t[e];"metabolite"==n.node_type&&(this.search_index.insert("n"+e,{name:n.bigg_id,data:{type:"metabolite",node_id:e}}),this.search_index.insert("n_name"+e,{name:n.name,data:{type:"metabolite",node_id:e}}))}B.extend(this.nodes,t)},D.prototype.extend_reactions=function(t){if(this.enable_search)for(var e in t){var n=t[e];for(var r in this.search_index.insert("r"+e,{name:n.bigg_id,data:{type:"reaction",reaction_id:e}}),this.search_index.insert("r_name"+e,{name:n.name,data:{type:"reaction",reaction_id:e}}),n.genes){var i=n.genes[r];this.search_index.insert("r"+e+"_g"+r,{name:i.bigg_id,data:{type:"reaction",reaction_id:e}}),this.search_index.insert("r"+e+"_g_name"+r,{name:i.name,data:{type:"reaction",reaction_id:e}})}}B.extend(this.reactions,t)},D.prototype._extend_and_draw_reaction=function(t,e,n,r){this.extend_reactions(e),B.extend(this.beziers,n),this.delete_node_data([r]),this.extend_nodes(t);var i=Object.keys(e);if(this.has_data_on_reactions){var o=!1;if(this.imported_reaction_data)o=this.apply_reaction_data_to_map(this.imported_reaction_data,i);else{if(!this.imported_gene_data)throw new Error("imported_gene_data or imported_reaction_data should not be null");o=this.apply_gene_data_to_map(this.imported_gene_data,i)}o?this.draw_all_reactions(!0,!1):this.draw_these_reactions(i)}else this.draw_these_reactions(i);var a=Object.keys(t);if(this.has_data_on_nodes){if(null===this.imported_metabolite_data)throw new Error("imported_metabolite_data should not be null");(o=this.apply_metabolite_data_to_map(this.imported_metabolite_data,a))?this.draw_all_nodes(!1):this.draw_these_nodes(a)}else this.draw_these_nodes(a);for(var s in t){var c=t[s];if(c.node_is_primary&&s!=r){this.select_metabolite_with_id(s);var l={x:c.x,y:c.y};this.zoomContainer&&this.zoomContainer.translateOffScreen(l)}}},D.prototype.new_reaction_for_metabolite=function(t,e,n,r){var i=this;void 0===r&&(r=!0);var o=this.nodes[e],a=this.cobra_model.reactions[t],s=I.newReaction(t,a,this.cobra_model.metabolites,e,B.clone(o),this.largest_ids,this.settings.get("cofactors"),n),c=s.new_nodes,l=s.new_reactions,u=s.new_beziers;function h(){delete c[e],i.delete_node_data(Object.keys(c)),i.delete_reaction_data(Object.keys(l)),i.select_metabolite_with_id(e),c=B.clone(f),l=B.clone(p),u=B.clone(A),i.has_data_on_reactions&&i.calc_data_stats("reaction")?i.draw_all_reactions(!0,!0):i.clear_deleted_reactions(!0),i.has_data_on_nodes&&i.calc_data_stats("metabolite")?i.draw_all_nodes(!0):i.clear_deleted_nodes()}function d(){i._extend_and_draw_reaction(c,l,u,e)}this._extend_and_draw_reaction(c,l,u,e);var f=B.clone(c),p=B.clone(l),A=B.clone(u);return r&&this.undo_stack.push(h,d),{undo:h,redo:d}},D.prototype.cycle_primary_node=function(){var t=this.getSelectedNodes();if(!k.default.isEmpty(t)){var n,r=Object.keys(t)[0],s=(t[r],this.reactions),c=this.nodes,i=[];if(c[r].connected_segments.forEach(function(e){var t;n=[e.reaction_id];try{if(void 0===(t=s[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}i.push(t.from_node_id==r?t.to_node_id:t.from_node_id)}),1==i.length){var o=i[0],a=[r];c[o].connected_segments.forEach(function(e){var t;try{if(void 0===(t=s[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}var n=t.from_node_id==o?t.to_node_id:t.from_node_id;"metabolite"==c[n].node_type&&n!=r&&a.push(String(n))});for(var e=0;e<a.length;e++)if(1<c[a[e]].connected_segments.length)return void console.error("Only connected nodes with a single reaction can be selected");for(var l in t)if(l!=r&&-1==a.indexOf(l))return void console.warn("Selected nodes are not on the same reaction");var u=[],h=a.length-1,d=c[a[h]],f=d.node_is_primary,p={x:d.x,y:d.y,label_x:d.label_x,label_y:d.label_y};1<d.connected_segments.length&&console.warn("Too many connected segments for node "+d.node_id);var A,g=d.connected_segments[0];try{if(void 0===(A=s[g.reaction_id].segments[g.segment_id]))throw new Error("undefined segment")}catch(t){return void console.error("Could not find connected segment "+g.segment_id)}var b,m={b1:A.b1,b2:A.b2};a.forEach(function(t){var e=c[t],n=e.node_is_primary,r={x:e.x,y:e.y,label_x:e.label_x,label_y:e.label_y},i=e.connected_segments[0],o=s[i.reaction_id].segments[i.segment_id],a={b1:o.b1,b2:o.b2};e.node_is_primary=f,e.x=p.x,e.y=p.y,e.label_x=p.label_x,e.label_y=p.label_y,o.b1=m.b1,o.b2=m.b2,f=n,p=r,m=a,e.node_is_primary&&(b=t),u.push(t)});var y=c[o].connected_segments,_=[y[h=y.length-1]];y.forEach(function(t,e){h!=e&&_.push(t)}),c[o].connected_segments=_,this.draw_these_nodes(u),this.draw_these_reactions(n),this.select_metabolite_with_id(b)}else console.error("Only connected nodes with a single reaction can be selected")}},D.prototype.toggle_selected_node_primary=function(){var t=this.get_selected_node_ids(),e=function(t){var n={},e=this.settings.get("hide_secondary_metabolites");if(t.forEach(function(t){if(t in this.nodes){var e=this.nodes[t];"metabolite"==e.node_type&&(e.node_is_primary=!e.node_is_primary,n[t]=e)}else console.warn("Could not find node: "+t)}.bind(this)),this.draw_these_nodes(Object.keys(n)),e){var r=this.segments_and_reactions_for_nodes(n),i={};for(var o in r.segment_objs_w_segments)i[r.segment_objs_w_segments[o].reaction_id]=!0;this.draw_these_reactions(Object.keys(i))}}.bind(this);e(t),this.undo_stack.push(function(){e(t)},function(){e(t)})},D.prototype.segments_and_reactions_for_nodes=function(t){var r={},e={},i={},o=this.reactions;for(var n in t)t[n].connected_segments.forEach(function(t){var e;try{if(void 0===(e=o[t.reaction_id].segments[t.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segments for node")}var n=B.clone(t);n.segment=B.clone(e),r[t.segment_id]=n,t.reaction_id in i||(i[t.reaction_id]=[]),i[t.reaction_id].push(t.segment_id)});for(var a in i){var s=o[a],c=i[a],l=!0;for(var u in s.segments)-1==c.indexOf(u)&&(l=!1);l&&(e[a]=s)}return{segment_objs_w_segments:r,reactions:e}},D.prototype.add_label_to_search_index=function(t,e){this.search_index.insert("l"+t,{name:e,data:{type:"text_label",text_label_id:t}})},D.prototype.new_text_label=function(t,e){var n=I.newTextLabel(this.largest_ids,e,t);return this.text_labels[n.id]=n.label,this.draw_these_text_labels([n.id]),""!==e&&this.add_label_to_search_index(n.id,e),n.id},D.prototype.edit_text_label=function(i,t,e,o){if(k.default.isUndefined(o)&&(o=!1),""===t)throw new Error("Should not be called for empty string");var n=function(t,e){this.text_labels[i].text=t,e&&this.draw_these_text_labels([i]);var n="l"+i,r=this.search_index.remove(n);o||r||console.warn("Could not find modified text label in search index"),this.search_index.insert(n,{name:t,data:{type:"text_label",text_label_id:i}})}.bind(this),r=B.clone(this.text_labels[i]);n(t,e),this.undo_stack.push(function(){o?(this.delete_text_label_data([i]),this.clear_deleted_text_labels()):n(r.text,!0)}.bind(this),function(){o?(this.text_labels[i]=B.clone(r),this.text_labels[i].text=t,this.draw_these_text_labels([i]),this.add_label_to_search_index(i,t)):n(t,!0)}.bind(this))},D.prototype.zoom_extent_nodes=function(t){this._zoom_extent(t,"nodes")},D.prototype.zoom_extent_canvas=function(t){this._zoom_extent(t,"canvas")},D.prototype._zoom_extent=function(t,e){var n,r;k.default.isUndefined(t)&&(t="nodes"===e?.2:0),k.default.isUndefined(e)&&(e="canvas");var i=this.get_size();if(t*=i.height,"nodes"===e){var o={x:null,y:null},a={x:null,y:null};for(var s in this.nodes){var c=this.nodes[s];null===o.x&&(o.x=c.x),null===o.y&&(o.y=c.y),null===a.x&&(a.x=c.x),null===a.y&&(a.y=c.y),o.x=Math.min(o.x,c.x),o.y=Math.min(o.y,c.y),a.x=Math.max(a.x,c.x),a.y=Math.max(a.y,c.y)}n=Math.min((i.width-2*t)/(a.x-o.x),(i.height-2*t)/(a.y-o.y)),r={x:-o.x*n+t+(i.width-2*t-(a.x-o.x)*n)/2,y:-o.y*n+t+(i.height-2*t-(a.y-o.y)*n)/2}}else{if("canvas"!=e)return console.error("Did not recognize mode");n=Math.min((i.width-2*t)/this.canvas.width,(i.height-2*t)/this.canvas.height),r={x:-this.canvas.x*n+t+(i.width-2*t-this.canvas.width*n)/2,y:-this.canvas.y*n+t+(i.height-2*t-this.canvas.height*n)/2}}return this.zoomContainer.goTo(n,r),null},D.prototype.get_size=function(){return this.zoomContainer.get_size()},D.prototype.zoom_to_reaction=function(t){var e=this.reactions[t],n=this.get_size(),r={x:.5*-e.label_x+n.width/2,y:.5*-e.label_y+n.height/2};this.zoomContainer.goTo(.5,r)},D.prototype.zoom_to_node=function(t){var e=this.nodes[t],n=this.get_size(),r={x:.5*-e.label_x+n.width/2,y:.5*-e.label_y+n.height/2};this.zoomContainer.goTo(.5,r)},D.prototype.zoom_to_text_label=function(t){var e=this.text_labels[t],n=this.get_size(),r={x:.5*-e.x+n.width/2,y:.5*-e.y+n.height/2};this.zoomContainer.goTo(.5,r)},D.prototype.highlight_reaction=function(t){this.highlight(this.sel.selectAll("#r"+t).selectAll("text"))},D.prototype.highlight_node=function(t){this.highlight(this.sel.selectAll("#n"+t).selectAll("text"))},D.prototype.highlight_text_label=function(t){this.highlight(this.sel.selectAll("#l"+t).selectAll("text"))},D.prototype.highlight=function(t){this.sel.selectAll(".highlight").classed("highlight",!1),null!==t&&t.classed("highlight",!0)},D.prototype.save=function(){B.download_json(this.map_for_export(),this.map_name)},D.prototype.map_for_export=function(){var t=[{map_name:this.map_name,map_id:this.map_id,map_description:this.map_description,homepage:"https://escher.github.io",schema:"https://escher.github.io/escher/jsonschema/1-0-0#"},{reactions:B.clone(this.reactions),nodes:B.clone(this.nodes),text_labels:B.clone(this.text_labels),canvas:this.canvas.sizeAndLocation()}];for(var e in t[1].reactions){var n=t[1].reactions[e],r={},i=["name","bigg_id","reversibility","label_x","label_y","gene_reaction_rule","genes","metabolites"];for(var o in i.forEach(function(t){r[t]=n[t]}),r.segments={},n.segments){var a=n.segments[o],s={};(i=["from_node_id","to_node_id","b1","b2"]).forEach(function(t){s[t]=a[t]}),r.segments[o]=s}t[1].reactions[e]=r}for(var c in t[1].nodes){var l=t[1].nodes[c],u={};(i="metabolite"===l.node_type?["node_type","x","y","bigg_id","name","label_x","label_y","node_is_primary"]:["node_type","x","y"]).forEach(function(t){u[t]=l[t]}),t[1].nodes[c]=u}for(var h in t[1].text_labels){var d=t[1].text_labels[h],f={};(i=["x","y","text"]).forEach(function(t){f[t]=d[t]}),t[1].text_labels[h]=f}var p=t[1].canvas,A={};return(i=["x","y","width","height"]).forEach(function(t){A[t]=p[t]}),t[1].canvas=A,t},D.prototype.saveMap=function(t,e,n){var r=this;this.callback_manager.run(t);var i=this.zoomContainer.windowScale,o=this.zoomContainer.windowTranslate,a=this.canvas.sizeAndLocation(),s={w:this.canvas.mouseNode.attr("width"),h:this.canvas.mouseNode.attr("height"),transform:this.canvas.mouseNode.attr("transform")};this.zoomContainer._goToSvg(1,{x:-a.x,y:-a.y},function(){r.svg.attr("width",a.width),r.svg.attr("height",a.height),r.canvas.mouseNode.attr("width","0px"),r.canvas.mouseNode.attr("height","0px"),r.canvas.mouseNode.attr("transform",null);var t=r.sel.selectAll(".multimarker-circle,.midmarker-circle,#canvas,.bezier,#rotation-center,.direction-arrow,.start-reaction-target").style("visibility","hidden");"svg"===n?B.downloadSvg("saved_map",r.svg,!0):"png"===n&&B.downloadPng("saved_map",r.svg),r.zoomContainer._goToSvg(i,o,function(){r.svg.attr("width",null),r.svg.attr("height",null),r.canvas.mouseNode.attr("width",s.w),r.canvas.mouseNode.attr("height",s.h),r.canvas.mouseNode.attr("transform",s.transform),t.style("visibility",null),r.callback_manager.run(e)})})},D.prototype.save_svg=function(){this.saveMap("before_svg_export","after_svg_export","svg")},D.prototype.save_png=function(){this.saveMap("before_png_export","after_png_export","png")},D.prototype.convert_map=function(){var s=this;if(this.callback_manager.run("before_convert_map"),!this.has_cobra_model())throw Error("No COBRA model loaded.");var r=this.cobra_model,t={},c=["name","gene_reaction_rule","genes"],e={},n=["name"],l=!1;for(var i in this.reactions){var u=this.reactions[i];l=!1;var o=function(){var i=r.reactions[h];if(i.bigg_id==u.bigg_id){c.forEach(function(t){u[t]=i[t]});var o=!0,a=null,t=function(e){var t=i.metabolites[e],n=k.default.find(u.metabolites,function(t){return t.bigg_id===e});if(void 0===n)return o=!1,"break";var r=n.coefficient;return null===a&&(a=0<t!=0<r),!0===a&&0<t==0<r||!1===a&&0<t!=0<r?(o=!1,"break"):void 0};for(var e in i.metabolites)if("break"===t(e))break;if(a&&o){u.metabolites.forEach(function(t){t.coefficient=-t.coefficient});var n=function(){var e=u.segments[d];e.reversibility=u.reversibility;var n=s.nodes[e.from_node_id],r=s.nodes[e.to_node_id];u.metabolites.forEach(function(t){t.bigg_id===n.bigg_id?e.from_node_coefficient=t.coefficient:t.bigg_id===r.bigg_id&&(e.to_node_coefficient=t.coefficient)})};for(d in u.segments)n()}if(!o)return console.warn("Metabolites for "+i.bigg_id+" are different in model and map. Could\n not check and fix direction."),"break";l=!0}};for(var h in r.reactions){var d;if("break"===o())break}l||(t[i]=!0)}for(var a in this.nodes){var f=this.nodes[a];if("metabolite"==f.node_type){for(var p in l=!1,r.metabolites){var A=r.metabolites[p];A.bigg_id==f.bigg_id&&(n.forEach(function(t){f[t]=A[t]}),l=!0)}l||(e[a]=!0)}}var g=Object.keys(t).length,b=Object.keys(e).length;0===g&&0===b?this.set_status("Successfully converted attributes.",1e4):(0===b?this.set_status("Converted attributes, but count not find "+g+" reactions in the model.",1e4):0===g?this.set_status("Converted attributes, but count not find "+b+" metabolites in the model.",1e4):this.set_status("Converted attributes, but count not find "+g+" reactions and "+b+" metabolites in the model.",1e4),this.settings.set("highlight_missing",!0)),this.draw_everything(),this.callback_manager.run("after_convert_map")},D);function D(t,e,n,r,i,o,a,s,c,l,u){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,D),null===a){var h=r.get_size();a={x:-h.width,y:-h.height,width:3*h.width,height:3*h.height}}c=k.default.isUndefined(c)||null===c||""===c?"new_map":String(c),l=k.default.isUndefined(l)||null===l||""===l?B.generate_map_id():String(l),u=k.default.isUndefined(u)||null===u?"":String(u),this.callback_manager=new g.default,this.svg=t,this.defs=B.setup_defs(t,e),this.canvas=new m.default(n,a),this.setup_containers(n),this.sel=n,this.zoomContainer=r,this.settings=i,this.cobra_model=o,this.largest_ids={reactions:-1,nodes:-1,segments:-1,text_labels:-1},this.undo_stack=new A.default,this.behavior=new f.default(this,this.undo_stack),this.draw=new d.default(this.behavior,this.settings,this),this.key_manager=new b.default,this.key_manager.settings=i,this.key_manager.ctrlEqualsCmd=!0,this.enable_search=s,this.search_index=new y.default,this.map_name=c,this.map_id=l,this.map_description=u;this.beziers_enabled=!1,this.has_data_on_reactions=!1,this.has_data_on_nodes=!1,this.imported_reaction_data=null,this.imported_metabolite_data=null,this.imported_gene_data=null,this.nodes={},this.reactions={},this.beziers={},this.text_labels={},this.apply_reaction_data_to_map(null),this.apply_metabolite_data_to_map(null),this.apply_gene_data_to_map(null),this.scale=new p.default,this.scale.connectToSettings(this.settings,this,this.get_data_statistics.bind(this)),this.rotation_on=!1}e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(3),_=(r=i)&&r.__esModule?r:{default:r},v=o(n(29)),w=n(7),x=o(n(0));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var a=x.select,f=x.mouse,s=(c.prototype.turnEverythingOn=function(){this.toggleSelectableClick(!0),this.toggleSelectableDrag(!0),this.toggleLabelDrag(!0),this.toggleLabelMouseover(!0),this.toggleLabelTouch(!0),this.toggleObjectMouseover(!0),this.toggleObjectTouch(!0)},c.prototype.turnEverythingOff=function(){this.toggleSelectableClick(!1),this.toggleSelectableDrag(!1),this.toggleLabelDrag(!1),this.toggleLabelMouseover(!1),this.toggleLabelTouch(!1),this.toggleObjectMouseover(!1),this.toggleObjectTouch(!1)},c.prototype.averageLocation=function(t){var e=[],n=[];for(var r in t){var i=t[r];void 0!==i.x&&e.push(i.x),void 0!==i.y&&n.push(i.y)}return{x:_.default.mean(e),y:_.default.mean(n)}},c.prototype.showCenter=function(){var n=this,t=this.map.sel.selectAll("#rotation-center").data([0]),e=t.enter().append("g").attr("id","rotation-center");e.append("path").attr("d","M-32 0 L32 0").attr("class","rotation-center-line"),e.append("path").attr("d","M0 -32 L0 32").attr("class","rotation-center-line");var r=e.merge(t);r.attr("transform","translate("+this.center.x+","+this.center.y+")").attr("visibility","visible").on("mouseover",function(){var t=parseFloat(r.selectAll("path").style("stroke-width"));r.selectAll("path").style("stroke-width",2*t+"px")}).on("mouseout",function(){r.selectAll("path").style("stroke-width",null)}).call((0,w.drag)().on("drag",function(){var t=_.default.d3_transform_catch(r.attr("transform")),e=[x.event.dx+t.translate[0],x.event.dy+t.translate[1]];r.attr("transform","translate("+e+")"),n.center={x:e[0],y:e[1]}}))},c.prototype.hideCenter=function(){this.map.sel.select("#rotation-center").attr("visibility","hidden")},c.prototype.toggleRotationMode=function(t){var e=this;this.rotationModeEnabled=void 0===t?!this.rotationModeEnabled:t;var n=this.map.sel.selectAll(".node-circle"),r=this.map.sel.selectAll("#canvas");if(this.rotationModeEnabled){var o=this.map.getSelectedNodes();if(0===Object.keys(o).length)return void console.warn("No selected nodes");this.center=this.averageLocation(o),this.showCenter();var a=this.map,s=Object.keys(o),c=this.map.reactions,l=this.map.nodes,u=this.map.beziers;this.rotationDrag=this.getGenericAngularDrag(function(t){x.event.sourceEvent.stopPropagation()},function(t,e,n,r){var i=v.rotateNodes(o,c,u,e,r);a.draw_these_nodes(i.node_ids),a.draw_these_reactions(i.reaction_ids)},function(t){},function(t,e,n){var r={};s.forEach(function(t){r[t]=l[t]});var i=v.rotateNodes(r,c,u,-e,n);a.draw_these_nodes(i.node_ids),a.draw_these_reactions(i.reaction_ids)},function(t,e,n){var r={};s.forEach(function(t){r[t]=l[t]});var i=v.rotatenodes(r,c,u,e,n);a.draw_these_nodes(i.node_ids),a.draw_these_reactions(i.reaction_ids)},function(){return e.center},this.map.sel),r.call(this.rotationDrag),this.selectableDrag=this.rotationDrag}else this.hideCenter(),n.on("mousedown.center",null),r.on("mousedown.center",null),r.on("mousedown.drag",null),r.on("touchstart.drag",null),this.rotationDrag=null,this.selectableDrag=null},c.prototype.toggleSelectableClick=function(t){if(void 0===t&&(t=null===this.selectableMousedown),t){var e=this.map;this.selectableMousedown=function(t){x.event.stopPropagation()},this.selectableClick=function(t){x.event.stopPropagation(),x.event.defaultPrevented||e.select_selectable(this,t,x.event.shiftKey)},this.nodeMouseover=function(t){a(this).style("stroke-width",null);var e=parseFloat(a(this).style("stroke-width"));a(this.parentNode).classed("selected")||a(this).style("stroke-width",3*e+"px")},this.nodeMouseout=function(t){a(this).style("stroke-width",null)}}else this.selectableMousedown=null,this.selectableClick=null,this.nodeMouseover=null,this.nodeMouseout=null,this.map.sel.select("#nodes").selectAll(".node-circle").style("stroke-width",null)},c.prototype.toggleTextLabelEdit=function(t){if(void 0===t&&(t=null==this.textEditMousedown),t){var n=this.map;this.textLabelMousedown=function(){if(!x.event.defaultPrevented){var t=_.default.d3_transform_catch(a(this).attr("transform")).translate,e={x:t[0],y:t[1]};n.callback_manager.run("edit_text_label",null,a(this),e),x.event.stopPropagation()}},this.textLabelClick=null,this.map.sel.select("#text-labels").selectAll(".label").style("cursor","text"),this.map.sel.on("mousedown.new_text_label",function(t){x.event.preventDefault();var e={x:f(t)[0],y:f(t)[1]};this.map.callback_manager.run("new_text_label",null,e)}.bind(this,this.map.sel.node()))}else this.textLabelMousedown=this.selectableMousedown,this.textLabelClick=this.selectableClick,this.map.sel.select("#text-labels").selectAll(".label").style("cursor",null),this.map.sel.on("mousedown.new_text_label",null),this.map.callback_manager.run("hide_text_label_editor")},c.prototype.toggleSelectableDrag=function(t){void 0===t&&(t=this.selectableDrag===this.emptyBehavior),t?(this.selectableDrag=this.getSelectableDrag(this.map,this.undoStack),this.bezierDrag=this.getBezierDrag(this.map,this.undoStack)):(this.selectableDrag=this.emptyBehavior,this.bezierDrag=this.emptyBehavior)},c.prototype.toggleLabelDrag=function(t){void 0===t&&(t=this.labelDrag===this.emptyBehavior),t?(this.reactionLabelDrag=this.getReactionLabelDrag(this.map),this.nodeLabelDrag=this.getNodeLabelDrag(this.map)):(this.reactionLabelDrag=this.emptyBehavior,this.nodeLabelDrag=this.emptyBehavior)},c.prototype.toggleLabelMouseover=function(t){var n=this;void 0===t&&(t=this.labelMouseover===this.emptyBehavior),t?(this.labelMouseover=function(t,e){n.dragging||n.map.callback_manager.run("show_tooltip",null,t,e)},this.labelMouseout=function(){n.map.callback_manager.run("delay_hide_tooltip")}):this.labelMouseover=this.emptyBehavior},c.prototype.toggleLabelTouch=function(t){var n=this;void 0===t&&(t=null===this.labelTouch),this.labelTouch=t?function(t,e){n.dragging||n.map.callback_manager.run("show_tooltip",null,t,e)}:null},c.prototype.toggleObjectMouseover=function(t){var n=this;void 0===t&&(t=this.objectMouseover===this.emptyBehavior),t?(this.objectMouseover=function(t,e){n.dragging||n.map.callback_manager.run("show_tooltip",null,t,e)},this.objectMouseout=function(){n.map.callback_manager.run("delay_hide_tooltip")}):this.objectMouseover=this.emptyBehavior},c.prototype.toggleObjectTouch=function(t){var n=this;void 0===t&&(t=null===this.labelTouch),this.objectTouch=t?function(t,e){n.dragging||n.map.callback_manager.run("show_tooltip",null,t,e)}:null},c.prototype.toggleBezierDrag=function(t){void 0===t&&(t=this.bezierDrag===this.emptyBehavior),t?(this.bezierDrag=this.getBezierDrag(this.map),this.bezierMouseover=function(t){a(this).style("stroke-width","3px")},this.bezierMouseout=function(t){a(this).style("stroke-width","1px")}):(this.bezierDrag=this.emptyBehavior,this.bezierMouseover=null,this.bezierMouseout=null)},c.prototype.turnOffDrag=function(t){t.on("mousedown.drag",null),t.on("touchstart.drag",null)},c.prototype.combineNodesAndDraw=function(n,r){var i=this.map,t=i.nodes[r],o=i.nodes[n],a=[];return t.connected_segments.forEach(function(e){var t=null;try{if(void 0===(t=i.reactions[e.reaction_id].segments[e.segment_id]))throw new Error("undefined segment")}catch(t){return void console.warn("Could not find connected segment "+e.segment_id)}if(t.from_node_id===r)t.from_node_id=n;else{if(t.to_node_id!==r)return void console.error("Segment does not connect to dragged node");t.to_node_id=n}o.connected_segments.push(e),a.push(_.default.clone(e))}),i.delete_node_data([r]),i.sel.selectAll(".node-to-combine").classed("node-to-combine",!1),i.draw_everything(),a},c.prototype.getSelectableDrag=function(u,h){function d(t,e){var n=u.text_labels[t];n.x=n.x+e.x,n.y=n.y+e.y}function f(t){e.dragging=t}var e=this,t=(0,w.drag)(),p=null,A=null,g=null,b=null,m=null;t.on("start",function(t){if(f(!0),x.event.sourceEvent.stopPropagation(),A={x:0,y:0},-1===a(this).attr("class").indexOf("label")){var e=this.parentNode.__data__,n=e.bigg_id,r=this.parentNode;p=setTimeout(function(){r.parentNode.insertBefore(r,r.parentNode.firstChild)},200),u.sel.selectAll(".metabolite-circle").on("mouseover.combine",function(t){t.bigg_id===n&&t.node_id!==e.node_id&&a(this).classed("node-to-combine",!0)}).on("mouseout.combine",function(t){t.bigg_id===n&&u.sel.selectAll(".node-to-combine").classed("node-to-combine",!1)})}}),t.on("drag",function(t){a(this.parentNode).classed("selected")||u.select_selectable(this,t);var e={};-1===a(this).attr("class").indexOf("label")?(e.type="node",e.id=this.parentNode.__data__.node_id):(e.type="label",e.id=this.__data__.text_label_id);var n=u.get_selected_node_ids(),r=u.get_selected_text_label_ids();g=[],m=[],"node"===e.type&&-1===n.indexOf(e.id)?g.push(e.id):"label"===e.type&&-1===r.indexOf(e.id)?m.push(e.id):(g=n,m=r),b=[];var i={x:x.event.dx,y:x.event.dy};A=_.default.c_plus_c(A,i),g.forEach(function(t){var e=u.nodes[t],n=v.moveNodeAndDependents(e,t,u.reactions,u.beziers,i);b=_.default.uniqueConcat([b,n.reaction_ids])}),m.forEach(function(t){d(t,i)}),u.draw_these_nodes(g),u.draw_these_reactions(b),u.draw_these_text_labels(m)});var y=this.combineNodesAndDraw.bind(this);return t.on("end",function(){if(f(!1),null!==g){var e=[];if(u.sel.selectAll(".node-to-combine").each(function(t){e.push(t.node_id)}),1===e.length){var i=e[0],o=this.parentNode.__data__.node_id,t=_.default.clone(u.nodes[o]),a=y(i,o),s=_.default.clone(A);h.push(function(){u.nodes[o]=t;var n=u.nodes[i],r=[];a.forEach(function(e){var t=u.reactions[e.reaction_id].segments[e.segment_id];t.from_node_id===i?t.from_node_id=o:t.to_node_id===i?t.to_node_id=o:console.error("Segment does not connect to fixed node"),n.connected_segments=n.connected_segments.filter(function(t){return!(t.reaction_id===e.reaction_id&&t.segment_id===e.segment_id)}),-1===r.indexOf(e.reaction_id)&&r.push(e.reaction_id)}),v.moveNodeAndDependents(t,o,u.reactions,u.beziers,_.default.c_times_scalar(s,-1)),u.draw_these_nodes([o]),u.draw_these_reactions(r)},function(){v.moveNodeAndDependents(t,o,u.reactions,u.beziers,_.default.c_times_scalar(s,1)),y(i,o)})}else{var n=_.default.clone(A),r=_.default.clone(g),c=_.default.clone(m),l=_.default.clone(b);h.push(function(){r.forEach(function(t){var e=u.nodes[t];v.moveNodeAndDependents(e,t,u.reactions,u.beziers,_.default.c_times_scalar(n,-1))}),c.forEach(function(t){d(t,_.default.c_times_scalar(n,-1))}),u.draw_these_nodes(r),u.draw_these_reactions(l),u.draw_these_text_labels(c)},function(){r.forEach(function(t){var e=u.nodes[t];v.moveNodeAndDependents(e,t,u.reactions,u.beziers,n)}),c.forEach(function(t){d(t,n)}),u.draw_these_nodes(r),u.draw_these_reactions(l),u.draw_these_text_labels(c)})}u.sel.selectAll(".metabolite-circle").on("mouseover.combine",null).on("mouseout.combine",null),clearTimeout(p),p=b=m=g=A=null}else p=b=m=g=A=null}),t},c.prototype.getBezierDrag=function(a){function r(t,e,n,r,i){var o=a.reactions[t].segments[e];o[n]=_.default.c_plus_c(o[n],i),a.beziers[r].x=o[n].x,a.beziers[r].y=o[n].y}return this.getGenericDrag(function(t){t.dragging=!0},function(t,e,n){r(t.reaction_id,t.segment_id,t.bezier,t.bezier_id,e),a.draw_these_reactions([t.reaction_id],!1),a.draw_these_beziers([t.bezier_id])},function(t){t.dragging=!1},function(t,e){r(t.reaction_id,t.segment_id,t.bezier,t.bezier_id,_.default.c_times_scalar(e,-1)),a.draw_these_reactions([t.reaction_id],!1),a.draw_these_beziers([t.bezier_id])},function(t,e){r(t.reaction_id,t.segment_id,t.bezier,t.bezier_id,e),a.draw_these_reactions([t.reaction_id],!1),a.draw_these_beziers([t.bezier_id])},this.map.sel)},c.prototype.getReactionLabelDrag=function(r){function i(t,e){var n=r.reactions[t];n.label_x=n.label_x+e.x,n.label_y=n.label_y+e.y}return this.getGenericDrag(function(t){r.callback_manager.run("hide_tooltip")},function(t,e,n){i(t.reaction_id,e),r.draw_these_reactions([t.reaction_id])},function(){},function(t,e){i(t.reaction_id,_.default.c_times_scalar(e,-1)),r.draw_these_reactions([t.reaction_id])},function(t,e){i(t.reaction_id,e),r.draw_these_reactions([t.reaction_id])},this.map.sel)},c.prototype.getNodeLabelDrag=function(r){function i(t,e){var n=r.nodes[t];n.label_x=n.label_x+e.x,n.label_y=n.label_y+e.y}return this.getGenericDrag(function(t){r.callback_manager.run("hide_tooltip")},function(t,e,n){i(t.node_id,e),r.draw_these_nodes([t.node_id])},function(){},function(t,e){i(t.node_id,_.default.c_times_scalar(e,-1)),r.draw_these_nodes([t.node_id])},function(t,e){i(t.node_id,e),r.draw_these_nodes([t.node_id])},this.map.sel)},c.prototype.getGenericDrag=function(e,r,i,o,a,t){var s=this,n=(0,w.drag)(),c=this.undoStack,l=t.node(),u=void 0;return n.on("start",function(t){s.dragging=!0,x.event.sourceEvent.stopPropagation(),u={x:0,y:0},e(t)}),n.on("drag",function(t){var e={x:x.event.dx,y:x.event.dy},n={x:f(l)[0],y:f(l)[1]};u=_.default.c_plus_c(u,e),r(t,e,u,n)}),n.on("end",function(t){s.dragging=!1;var e=_.default.clone(t),n=_.default.clone(u),r={x:f(l)[0],y:f(l)[1]};c.push(function(){o(e,n,r)},function(){a(e,n,r)}),i(t)}),n},c.prototype.getGenericAngularDrag=function(e,o,i,a,s,c,t){var l=this,n=(0,w.drag)(),u=this.undoStack,h=t.node(),d=void 0;return n.on("start",function(t){l.dragging=!0,x.event.sourceEvent.stopPropagation(),d=0,e(t)}),n.on("drag",function(t){var e={x:x.event.dx,y:x.event.dy},n={x:f(h)[0],y:f(h)[1]},r=c(),i=_.default.angle_for_event(e,n,r);o(t,i,d+=i,r)}),n.on("end",function(t){l.dragging=!1;var e=_.default.clone(t),n=d,r=_.default.clone(c());u.push(function(){return a(e,n,r)},function(){return s(e,n,r)}),i(t)}),n},c);function c(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.map=t,this.undoStack=e,this.emptyBehavior=function(){},this.rotationModeEnabled=!1,this.rotationDrag=(0,w.drag)(),this.selectableMousedown=null,this.textLabelMousedown=null,this.textLabelClick=null,this.selectableDrag=this.emptyBehavior,this.nodeMouseover=null,this.nodeMouseout=null,this.labelMousedown=null,this.labelMouseover=this.emptyBehavior,this.labelMouseout=null,this.labelTouch=null,this.objectMouseover=this.emptyBehavior,this.objectTouch=null,this.objectMouseout=null,this.bezierDrag=this.emptyBehavior,this.bezierMouseover=null,this.bezierMouseout=null,this.reactionLabelDrag=this.emptyBehavior,this.nodeLabelDrag=this.emptyBehavior,this.dragging=!1,this.turnEverythingOn()}e.default=s},function(t,e,n){"use strict";e.__esModule=!0,e.getMetLabelLoc=K,e.newReaction=function(t,e,n,r,i,o,a,s){var c=Z.to_radians_norm(s),l=String(++o.reactions),u={x:i.x,y:i.y},h=[u,Z.c_plus_c(u,{x:350,y:0})],d={x:(h[0].x+h[1].x)/2,y:(h[0].y+h[1].y)/2},f=function(t){if(Math.abs(t)>Math.PI)throw new Error("Angle must be between -PI and PI");return Math.abs(t)<Math.PI/7||Math.abs(t-Math.PI)<Math.PI/7?{x:-50,y:-40}:0<t?{x:15*(1-Math.abs(t-Math.PI/2)/(Math.PI/2)),y:10+50*(t-Math.PI/2)}:{x:15*(1-Math.abs(t+Math.PI/2)/(Math.PI/2)),y:10-50*(Math.abs(t)-Math.PI/2)}}(c),p={name:e.name,bigg_id:e.bigg_id,reversibility:e.reversibility,gene_reaction_rule:e.gene_reaction_rule,genes:Z.clone(e.genes),metabolites:Z.clone(e.metabolites)};Z.extend(p,{label_x:d.x+f.x,label_y:d.y+f.y,segments:{}});var A=[],g=[],b=0,m=0,y=!1;for(var _ in p.metabolites){var v=n[_],w=p.metabolites[_],x=v.formula,M={coefficient:w,bigg_id:_,name:v.name};if(w<0){M.index=b;var C=/C([0-9]+)/.exec(x);i.bigg_id===M.bigg_id?A.push([M.index,1/0]):C&&-1===a.indexOf(Z.decompartmentalize(M.bigg_id)[0])&&A.push([M.index,parseInt(C[1])]),b++}else{M.index=m;var E=/C([0-9]+)/.exec(x);i.bigg_id===M.bigg_id?(g.push([M.index,1/0]),y=!0):E&&-1===a.indexOf(Z.decompartmentalize(M.bigg_id)[0])&&g.push([M.index,parseInt(E[1])]),m++}p.metabolites[_]=M}function B(t,e){return e[1]>t[1]?e:t}var I=A.reduce(B,[0,0])[0],k=g.reduce(B,[0,0])[0];for(var D in p.metabolites){var T=p.metabolites[D];T.coefficient<0?(T.is_primary=T.index===I,T.count=b):(T.is_primary=T.index===k,T.count=m)}var N={},S={};[{node_type:"anchor_reactants",dis:{x:20*(y?1:-1),y:0}},{node_type:"center",dis:{x:0,y:0}},{node_type:"anchor_products",dis:{x:20*(y?-1:1),y:0}}].map(function(t){var e=String(++o.nodes),n="center"===t.node_type?"midmarker":"multimarker";N[e]={node_type:n,x:d.x+t.dis.x,y:d.y+t.dis.y,connected_segments:[],name:null,bigg_id:null,label_x:null,label_y:null,node_is_primary:null,data:null},S[t.node_type]=e}),[[S.anchor_reactants,S.center,"reactants"],[S.anchor_products,S.center,"products"]].map(function(t){var e=t[0],n=t[1],r=String(++o.segments),i=0===b&&"reactants"===t[2]&&p.reversibility||0===m&&"products"===t[2];p.segments[r]={b1:null,b2:null,from_node_id:e,to_node_id:n,from_node_coefficient:null,to_node_coefficient:null,reversibility:p.reversibility,data:p.data,reverse_flux:p.reverse_flux,unconnected_segment_with_arrow:i},N[e].connected_segments.push({segment_id:r,reaction_id:l}),N[n].connected_segments.push({segment_id:r,reaction_id:l})});var Q=N;for(var L in p.metabolites){var z=p.metabolites[L],j=void 0,F=void 0;F=z.coefficient<0?(j=I,S.anchor_reactants):(j=k,S.anchor_products);var O=X(z,j,h,d,350,y);if(i.bigg_id===z.bigg_id){var U=String(++o.segments);p.segments[U]={b1:O.b1,b2:O.b2,from_node_id:F,to_node_id:r,from_node_coefficient:null,to_node_coefficient:z.coefficient,reversibility:p.reversibility},i.connected_segments.push({segment_id:U,reaction_id:l}),Q[F].connected_segments.push({segment_id:U,reaction_id:l})}else{var Y=String(++o.segments),W=String(++o.nodes);p.segments[Y]={b1:O.b1,b2:O.b2,from_node_id:F,to_node_id:W,from_node_coefficient:null,to_node_coefficient:z.coefficient,reversibility:p.reversibility};var G=K(c,z.index,z.count,z.is_primary,z.bigg_id,j);Q[W]={connected_segments:[{segment_id:Y,reaction_id:l}],x:O.circle.x,y:O.circle.y,node_is_primary:z.is_primary,label_x:O.circle.x+G.x,label_y:O.circle.y+G.y,name:z.name,bigg_id:z.bigg_id,node_type:"metabolite"},Q[F].connected_segments.push({segment_id:Y,reaction_id:l})}}var R=[];for(var P in p.metabolites)R.push({bigg_id:P,coefficient:p.metabolites[P].coefficient});p.metabolites=R;var H={};H[l]=p;var V=q(H);return Q[r]=i,J(Q,H,V,c,u),{new_reactions:H,new_beziers:V,new_nodes:Q}},e.rotateNodes=J,e.moveNodeAndDependents=function(t,a,n,s,c){var r=d(t,n,c);return t.connected_segments.map(function(t){var e=n[t.reaction_id];if(!l.default.isUndefined(e)){var i=t.segment_id,o=e.segments[i];[["b1","from_node_id"],["b2","to_node_id"]].forEach(function(t){var e=t[0],n=t[1];if(o[n]===a&&o[e]){o[e]=Z.c_plus_c(o[e],c);var r=s[f(i,e)];r.x=o[e].x,r.y=o[e].y}}),r.reaction_ids.indexOf(t.reaction_id)<0&&r.reaction_ids.push(t.reaction_id)}}),r},e.newTextLabel=function(t,e,n){var r=String(++t.text_labels),i={text:e,x:n.x,y:n.y};return{id:r,label:i}},e.bezierIdForSegmentId=f,e.bezierIdsForReactionIds=function(t){var r=[];for(var e in t){var i=t[e],n=function(e){var n=i.segments[e];["b1","b2"].forEach(function(t){null!==n[t]&&r.push(f(e,t))})};for(var o in i.segments)n(o)}return r},e.newBeziersForSegments=o,e.newBeziersForReactions=q;var r,Z=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(3)),i=n(4),l=(r=i)&&r.__esModule?r:{default:r};function K(t,e,n,r,i,o){var a=Z.angleNorm(t),s=18*i.length,c=-1<=e-(o<e)-n/2;return Math.abs(a)<Math.PI/7?r||c?{x:.3*-s,y:40}:{x:.3*-s,y:-20}:Math.abs(a-Math.PI)<Math.PI/7?r||!c?{x:.3*-s,y:40}:{x:.3*-s,y:-20}:r?{x:25-38*Math.abs(Math.abs(a)-Math.PI/2),y:(Math.abs(a)-Math.PI/2)*(2*(0<a)-1)*50}:a<0&&c||0<a&&!c?{x:15,y:0}:{x:.5*-s,y:30}}function J(r,l,u,e,n){function h(t){return null===t?null:Z.rotate_coords(t,e,n)}function t(c){var t=r[c],e=h({x:t.x,y:t.y}),n=d(t,l,e);t.connected_segments.map(function(t){var e=l[t.reaction_id];if(void 0!==e){var n=t.segment_id,r=e.segments[n];if(r.to_node_id===c&&r.b2){var i=h(r.b2),o=f(n,"b2");r.b2=Z.c_plus_c(r.b2,i),u[o].x=r.b2.x,u[o].y=r.b2.y}else if(r.from_node_id===c&&r.b1){var a=h(r.b1),s=f(n,"b1");r.b1=Z.c_plus_c(r.b1,a),u[s].x=r.b1.x,u[s].y=r.b1.y}}}),o=Z.uniqueConcat([o,n.reaction_ids]),i.push(c)}var i=[],o=[];for(var a in r)t(a);return{node_ids:i,reaction_ids:o}}function d(n,r,i){n.x=n.x+i.x,n.y=n.y+i.y,n.label_x=n.label_x+i.x,n.label_y=n.label_y+i.y;var o=[];return n.connected_segments.map(function(t){var e=r[t.reaction_id];o.indexOf(t.reaction_id)<0&&(o.push(t.reaction_id),"midmarker"===n.node_type&&(e.label_x=e.label_x+i.x,e.label_y=e.label_y+i.y))}),{reaction_ids:o}}function A(t,e,n){var r=Math.floor(n/2);return t*(e-r+(r<=e))}function g(t,e,n,r){var i=Math.floor(r/2);return e+Math.abs(n-i+(i<=n))*t}function X(t,e,n,r,i,o){var a=n[0];n=[Z.c_minus_c(n[0],a),Z.c_minus_c(n[1],a)],r=Z.c_minus_c(r,a);var s=t.count-1,c=void 0,l=void 0;t.is_primary?c=20:(c=10,l=t.index>e?t.index-1:t.index);var u=[{x:c,y:0},{x:i-c,y:0}],h=void 0,d=void 0,f=void 0,p=void 0;return t.coefficient<0!==o&&t.is_primary?(h={x:u[0].x,y:u[0].y},f={x:.6*r.x+.4*u[0].x,y:.6*r.y+.4*u[0].y},p={x:.25*r.x+.75*h.x,y:.25*r.y+.75*h.y},d={x:n[0].x,y:n[0].y}):t.coefficient<0!==o?(h={x:u[0].x+g(20,50,l,s),y:u[0].y+A(24,l,s)},f={x:.6*r.x+.4*u[0].x,y:.6*r.y+.4*u[0].y},p={x:.25*r.x+.75*h.x,y:.25*r.y+.75*h.y},d={x:n[0].x+g(20,50,l,s),y:n[0].y+A(80,l,s)}):0<t.coefficient!==o&&t.is_primary?(h={x:u[1].x,y:u[1].y},f={x:.6*r.x+.4*u[1].x,y:.6*r.y+.4*u[1].y},p={x:.25*r.x+.75*h.x,y:.25*r.y+.75*h.y},d={x:n[1].x,y:n[1].y}):0<t.coefficient!==o&&(h={x:u[1].x-g(20,50,l,s),y:u[1].y+A(24,l,s)},f={x:.6*r.x+.4*u[1].x,y:.6*r.y+.4*u[1].y},p={x:.25*r.x+.75*h.x,y:.25*r.y+.75*h.y},d={x:n[1].x-g(20,50,l,s),y:n[1].y+A(80,l,s)}),{b1:Z.c_plus_c(a,f),b2:Z.c_plus_c(a,p),circle:Z.c_plus_c(a,d)}}function f(t,e){return t+"_"+e}function o(t,o){function e(r){var i=t[r];["b1","b2"].forEach(function(t){var e=i[t];if(null!==e){var n=f(r,t);a[n]={bezier:t,x:e.x,y:e.y,reaction_id:o,segment_id:r}}})}var a={};for(var n in t)e(n);return a}function q(t){var e={};for(var n in t){var r=o(t[n].segments,n);Z.extend(e,r)}return e}},function(t,e,n){"use strict";e.__esModule=!0;e.default={GaBuGeRd:[{type:"min",color:"#c8c8c8",size:12},{type:"value",value:.01,color:"#9696ff",size:16},{type:"value",value:20,color:"#209123",size:20},{type:"max",color:"#ff0000",size:25}],GaBuRd:[{type:"min",color:"#c8c8c8",size:12},{type:"median",color:"#9696ff",size:20},{type:"max",color:"#ff0000",size:25}],RdYlBu:[{type:"min",color:"#d7191c",size:12},{type:"median",color:"#ffffbf",size:20},{type:"max",color:"#2c7bb6",size:25}],GeGaRd:[{type:"min",color:"#209123",size:25},{type:"value",value:0,color:"#c8c8c8",size:12},{type:"max",color:"#ff0000",size:25}],WhYlRd:[{type:"min",color:"#fffaf0",size:20},{type:"median",color:"#f1c470",size:30},{type:"max",color:"#800000",size:40}]}},function(t,e,n){"use strict";function r(t,e){return e-1<t+1?0:t+1}e.__esModule=!0;var i=(o.prototype.push=function(t,e){return this.current=r(this.current,this.stack.length),this.endOfStack?this.oldest=this.current:this.oldest===this.current&&(this.oldest=r(this.oldest,this.stack.length)),this.stack[this.current]={undo:t,redo:e},this.newest=this.current,this.topOfStack=!0,this.endOfStack=!1,{do:function(){return e()}}},o.prototype.undo=function(){if(this.endOfStack)return console.warn("End of stack.");this.stack[this.current].undo(),this.current===this.oldest?this.endOfStack=!0:this.current=function(t,e){return t-1<0?e-1:t-1}(this.current,this.stack.length),this.topOfStack=!1},o.prototype.redo=function(){if(this.topOfStack)return console.warn("Top of stack.");this.endOfStack||(this.current=r(this.current,this.stack.length)),this.stack[this.current].redo(),this.current===this.newest&&(this.topOfStack=!0),this.endOfStack=!1},o);function o(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);this.stack=Array(40),this.current=-1,this.oldest=-1,this.newest=-1,this.endOfStack=!0,this.topOfStack=!0}e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var o=r(n(33)),c=r(n(4));function r(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!e)return t;var n=c.default.isArray(t)?t:[t],r=n.reduce(function(t,e){var n=e.replace("ctrl+","meta+");return n!==e&&t.push(n),t},n.slice());return r.length===n.length?t:r}var i=(a.prototype.update=function(){var s=this;if(this.mousetrap.reset(),this.enabled){var t=function(t){var a=s.assignedKeys[t];if(!a.key)return"continue";var e=l(a.key,s.ctrlEqualsCmd);a.inputList=s.inputList,s.mousetrap.bind(e,function(t){if(!a.requires||s.settings.get(a.requires)){var e=!1;if(a.ignoreWithInput)for(var n=0,r=a.inputList.length;n<r;n++){var i=a.inputList[n],o=c.default.isFunction(i)?i():i;if(null!==o&&o.is_visible()){e=!0;break}}e||(a.fn?a.fn.call(a.target):console.warn("No function for key: "+a.key),t.preventDefault())}},"keydown")};for(var e in this.assignedKeys)t(e)}},a.prototype.toggle=function(t){c.default.isUndefined(t)&&(t=!this.enabled),this.enabled=t,this.update()},a.prototype.addEnterListener=function(t,e){return this.addKeyListener("enter",t,e)},a.prototype._tryDropEscapeListener=function(){0===this.escapeQueue.length&&this.removeEscapeListener&&(this.removeEscapeListener(),this.removeEscapeListener=null)},a.prototype.addEscapeListener=function(e){var n=this;return null===this.removeEscapeListener&&(this.removeEscapeListener=this.addKeyListener("escape",function(){0<n.escapeQueue.length&&n.escapeQueue.pop()(),n._tryDropEscapeListener()})),this.escapeQueue.push(e),function(){var t=n.escapeQueue.indexOf(e);-1<t&&n.escapeQueue.splice(t,1),n._tryDropEscapeListener()}},a.prototype.addKeyListener=function(t,e,n){var r=2<arguments.length&&void 0!==n&&n,i=this.mousetrap.unbind.bind(this.mousetrap,t);return this.mousetrap.bind(l(t,this.ctrlEqualsCmd),function(t){t.preventDefault(),e(),r&&i()}),i},a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3],i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.assignedKeys=t,this.inputList=e,this.mousetrap=n?new o.default(n):new o.default,this.ctrlEqualsCmd=r,this.mousetrap.stopCallback=function(){return!1},this.escapeQueue=[],this.removeEscapeListener=null,this.settings=i,this.enabled=!0,this.update()}e.default=i},function(l,u,h){var d;!function(t,r){if(t){for(var i,o={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},n={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},e=1;e<20;++e)o[111+e]="f"+e;for(e=0;e<=9;++e)o[e+96]=e.toString();w.prototype.bind=function(t,e,n){return t=t instanceof Array?t:[t],this._bindMultiple.call(this,t,e,n),this},w.prototype.unbind=function(t,e){return this.bind.call(this,t,function(){},e)},w.prototype.trigger=function(t,e){return this._directMap[t+":"+e]&&this._directMap[t+":"+e]({},t),this},w.prototype.reset=function(){return this._callbacks={},this._directMap={},this},w.prototype.stopCallback=function(t,e){if(-1<(" "+e.className+" ").indexOf(" mousetrap "))return!1;if(function t(e,n){return null!==e&&e!==r&&(e===n||t(e.parentNode,n))}(e,this.target))return!1;if("composedPath"in t&&"function"==typeof t.composedPath){var n=t.composedPath()[0];n!==t.target&&(e=n)}return"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName||e.isContentEditable},w.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},w.addKeycodes=function(t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e]);i=null},w.init=function(){var e=w(r);for(var t in e)"_"!==t.charAt(0)&&(w[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},w.init(),t.Mousetrap=w,l.exports&&(l.exports=w),void 0===(d=function(){return w}.call(u,h,u,l))||(l.exports=d)}function m(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)}function y(t){if("keypress"!=t.type)return o[t.which]?o[t.which]:n[t.which]?n[t.which]:String.fromCharCode(t.which).toLowerCase();var e=String.fromCharCode(t.which);return t.shiftKey||(e=e.toLowerCase()),e}function _(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function c(t,e,n){return"keypress"==(n=n||(function(){if(!i)for(var t in i={},o)95<t&&t<112||o.hasOwnProperty(t)&&(i[o[t]]=t);return i}()[t]?"keydown":"keypress"))&&e.length&&(n="keydown"),n}function v(t,e){var n,r,i,o=[];for(n=function(t){return"+"===t?["+"]:(t=t.replace(/\+{2}/g,"+plus")).split("+")}(t),i=0;i<n.length;++i)r=n[i],s[r]&&(r=s[r]),e&&"keypress"!=e&&a[r]&&(r=a[r],o.push("shift")),_(r)&&o.push(r);return{key:r,modifiers:o,action:e=c(r,o,e)}}function w(t){var p=this;if(t=t||r,!(p instanceof w))return new w(t);p.target=t,p._callbacks={},p._directMap={};var c,A={},l=!1,u=!1,h=!1;function d(t){t=t||{};var e,n=!1;for(e in A)t[e]?n=!0:A[e]=0;n||(h=!1)}function f(t,e,n,r,i,o){var a,s,c,l,u=[],h=n.type;if(!p._callbacks[t])return[];for("keyup"==h&&_(t)&&(e=[t]),a=0;a<p._callbacks[t].length;++a)if(s=p._callbacks[t][a],(r||!s.seq||A[s.seq]==s.level)&&h==s.action&&("keypress"==h&&!n.metaKey&&!n.ctrlKey||(c=e,l=s.modifiers,c.sort().join(",")===l.sort().join(",")))){var d=!r&&s.combo==i,f=r&&s.seq==r&&s.level==o;(d||f)&&p._callbacks[t].splice(a,1),u.push(s)}return u}function g(t,e,n,r){p.stopCallback(e,e.target||e.srcElement,n,r)||!1===t(e,n)&&(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}(e),function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}(e))}function e(t){"number"!=typeof t.which&&(t.which=t.keyCode);var e=y(t);e&&("keyup"!=t.type||l!==e?p.handleKey(e,function(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}(t),t):l=!1)}function s(e,t,n,r){function i(t){return function(){h=t,++A[e],clearTimeout(c),c=setTimeout(d,1e3)}}function o(t){g(n,t,e),"keyup"!==r&&(l=y(t)),setTimeout(d,10)}for(var a=A[e]=0;a<t.length;++a){var s=a+1===t.length?o:i(r||v(t[a+1]).action);b(t[a],s,r,e,a)}}function b(t,e,n,r,i){p._directMap[t+":"+n]=e;var o,a=(t=t.replace(/\s+/g," ")).split(" ");1<a.length?s(t,a,e,n):(o=v(t,n),p._callbacks[o.key]=p._callbacks[o.key]||[],f(o.key,o.modifiers,{type:o.action},r,t,i),p._callbacks[o.key][r?"unshift":"push"]({callback:e,modifiers:o.modifiers,action:o.action,seq:r,level:i,combo:t}))}p._handleKey=function(t,e,n){var r,i=f(t,e,n),o={},a=0,s=!1;for(r=0;r<i.length;++r)i[r].seq&&(a=Math.max(a,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=a)continue;s=!0,o[i[r].seq]=1,g(i[r].callback,n,i[r].combo,i[r].seq)}else s||g(i[r].callback,n,i[r].combo);var c="keypress"==n.type&&u;n.type!=h||_(t)||c||d(o),u=s&&"keydown"==n.type},p._bindMultiple=function(t,e,n){for(var r=0;r<t.length;++r)b(t[r],e,n)},m(t,"keypress",e),m(t,"keydown",e),m(t,"keyup",e)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},function(t,e,n){"use strict";e.__esModule=!0;var r=(i.prototype.insert=function(t,e,n,r){if(!n&&t in this.index)throw new Error("id is already in the index");if(r&&!("name"in e&&"data"in e))throw new Error("malformed record");this.index[t]=e},i.prototype.remove=function(t){return t in this.index&&(delete this.index[t],!0)},i.prototype.find=function(t){var e=RegExp(t,"i"),n=[];for(var r in this.index){var i=this.index[r];e.exec(i.name)&&n.push(i.data)}return n},i);function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.index={}}e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var s=r(n(19)),a=r(n(4));function r(t){return t&&t.__esModule?t:{default:t}}var i=(c.prototype.createSetting=function(e,t,n){var r=this,i=new s.default.Bus,o=n?function(t,e){return s.default.combineAsArray(t,e.toProperty(null)).scan({savedValue:null,currentValue:null,lastStatus:null},function(t,e){var n=t.savedValue,r=t.currentValue,i=t.lastStatus,o=e[0],a=e[1],s=i!==a;return s&&"hold"===a?{savedValue:r,currentValue:r,lastStatus:a}:s||"hold"!==a?s&&"abandon"===a?{savedValue:null,currentValue:n,lastStatus:a}:s&&"accept"===a?{savedValue:null,currentValue:r,lastStatus:a}:{savedValue:null,currentValue:o,lastStatus:a}:{savedValue:n,currentValue:o,lastStatus:a}}).skip(1).map(function(t){return t.currentValue}).skipDuplicates().toEventStream()}(i,this.statusBus):i.toEventStream(),a=o.sampledBy(this.statusBus.filter(function(t){return"accept"===t||"abandon"===t})).merge(o.filter(this.statusBus.map(function(t){return"accept"===t}).toProperty(!0)));return o.onValue(function(t){r._options[e]=t}),i.push(t),{bus:i,stream:o,acceptedStream:a}},c.prototype.set_conditional=function(t,e){return console.warn("set_conditional is deprecated. Use Settings.set() instead"),this.set(t,e)},c.prototype.set=function(t,e){if(!(t in this.busses))throw new Error("Invalid setting name "+t);this.busses[t].push(e)},c.prototype.get_option=function(t){return console.warn("get_option is deprecated. Use Settings.get() instead"),this.get(t)},c.prototype.get=function(t){return this._options[t]},c.prototype.holdChanges=function(){this.statusBus.push("hold")},c.prototype.abandonChanges=function(){this.statusBus.push("abandon")},c.prototype.acceptChanges=function(){this.statusBus.push("accept")},c);function c(t,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this._options=t,this.statusBus=new s.default.Bus;var e=a.default.chain(t).mapObject(function(t,e){var n=a.default.contains(i,e),r=o.createSetting(e,t,n);return[r.bus,r.stream,r.acceptedStream]}).pairs().map(function(t){var e=t[0],n=t[1];return[[e,n[0]],[e,n[1]],[e,n[2]]]}).unzip().map(function(t){return a.default.object(t)}).value();this.busses=e[0],this.streams=e[1],this.acceptedStreams=e[2]}e.default=i},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=n(5);var i,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,i=o.Component),s.prototype.componentDidMount=function(){var e=this;this.props.connectSetStateFn(function(t){return e.setState(t)})},s.prototype.is_visible=function(){return this.state.display},s.prototype.render=function(){var e=this;return this.state.display?(0,o.h)(this.props.component,r({setDisplay:function(t){return e.setState({display:t})},ref:this.props.refPassthrough},this.state)):null},s);function s(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return e.state={},e}e.default=function(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;(0,o.render)((0,o.h)(a,{component:t,connectSetStateFn:n,ref:e,refPassthrough:i}),r,0<r.children.length?r.firstChild:void 0)}},function(t,e){t.exports="data:application/vnd.ms-fontobject;base64,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"},function(t,e,n){"use strict";e.__esModule=!0,e.libs=e.EscherMapModel=e.EscherMapView=e.ZoomContainer=e.dataStyles=e.Settings=e.SearchIndex=e.utils=e.CobraModel=e.UndoStack=e.DataMenu=e.KeyManager=e.Behavior=e.Map=e.default=e.Builder=e.version=void 0;var r=n(20);Object.defineProperty(e,"Builder",{enumerable:!0,get:function(){return x(r).default}}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return x(r).default}});var i=n(27);Object.defineProperty(e,"Map",{enumerable:!0,get:function(){return x(i).default}});var o=n(28);Object.defineProperty(e,"Behavior",{enumerable:!0,get:function(){return x(o).default}});var a=n(32);Object.defineProperty(e,"KeyManager",{enumerable:!0,get:function(){return x(a).default}});var s=n(87);Object.defineProperty(e,"DataMenu",{enumerable:!0,get:function(){return x(s).default}});var c=n(31);Object.defineProperty(e,"UndoStack",{enumerable:!0,get:function(){return x(c).default}});var l=n(18);Object.defineProperty(e,"CobraModel",{enumerable:!0,get:function(){return x(l).default}});var u=n(3);Object.defineProperty(e,"utils",{enumerable:!0,get:function(){return x(u).default}});var h=n(34);Object.defineProperty(e,"SearchIndex",{enumerable:!0,get:function(){return x(h).default}});var d=n(35);Object.defineProperty(e,"Settings",{enumerable:!0,get:function(){return x(d).default}});var f=n(12);Object.defineProperty(e,"dataStyles",{enumerable:!0,get:function(){return x(f).default}});var p=n(26);Object.defineProperty(e,"ZoomContainer",{enumerable:!0,get:function(){return x(p).default}});var A=n(88);Object.defineProperty(e,"EscherMapView",{enumerable:!0,get:function(){return A.EscherMapView}}),Object.defineProperty(e,"EscherMapModel",{enumerable:!0,get:function(){return A.EscherMapModel}});var g=x(n(4)),b=x(n(5)),m=x(n(19)),y=x(n(33)),_=x(n(21)),v=n(0),w=n(16);function x(t){return t&&t.__esModule?t:{default:t}}e.version="1.7.0-beta.19",e.libs={_:g.default,underscore:g.default,preact:b.default,baconjs:m.default,mousetrap:y.default,vkbeautify:_.default,d3_selection:v.selection,d3_select:v.select,d3_json:w.json};
/**
                                                * @license
                                                *
                                                * Escher
                                                * Author: Zachary King
                                                *
                                                * The MIT License (MIT)
                                                *
                                                * This software is Copyright  2015 The Regents of the University of
                                                * California. All Rights Reserved.
                                                *
                                                * Permission is hereby granted, free of charge, to any person obtaining a copy
                                                * of this software and associated documentation files (the "Software"), to deal
                                                * in the Software without restriction, including without limitation the rights
                                                * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                                                * copies of the Software, and to permit persons to whom the Software is
                                                * furnished to do so, subject to the following conditions:
                                                *
                                                * The above copyright notice and this permission notice shall be included in
                                                * all copies or substantial portions of the Software.
                                                *
                                                * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
                                                * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
                                                * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
                                                * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
                                                * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                                                * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
                                                * THE SOFTWARE.
                                                */},function(t,e,n){var r,i=i||function(s){"use strict";if(!(void 0===s||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=s.document,c=function(){return s.URL||s.webkitURL||s},l=t.createElementNS("http://www.w3.org/1999/xhtml","a"),u="download"in l,h=/constructor/i.test(s.HTMLElement)||s.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent),f=function(t){(s.setImmediate||s.setTimeout)(function(){throw t},0)},p=function(t){setTimeout(function(){"string"==typeof t?c().revokeObjectURL(t):t.remove()},4e4)},A=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},r=function(t,e,n){n||(t=A(t));function r(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){f(t)}}}(o,"writestart progress write writeend".split(" "))}var i,o=this,a="application/octet-stream"===t.type;if(o.readyState=o.INIT,u)return i=c().createObjectURL(t),void setTimeout(function(){l.href=i,l.download=e,function(t){var e=new MouseEvent("click");t.dispatchEvent(e)}(l),r(),p(i),o.readyState=o.DONE});!function(){if((d||a&&h)&&s.FileReader){var e=new FileReader;return e.onloadend=function(){var t=d?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");s.open(t,"_blank")||(s.location.href=t),t=void 0,o.readyState=o.DONE,r()},e.readAsDataURL(t),o.readyState=o.INIT}(i=i||c().createObjectURL(t),a)?s.location.href=i:s.open(i,"_blank")||(s.location.href=i);o.readyState=o.DONE,r(),p(i)}()},e=r.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=A(t)),navigator.msSaveOrOpenBlob(t,e)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(t,e,n){return new r(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=i:null!==n(24)&&null!==n(25)&&(void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r))},function(t,e,n){"use strict";e.__esModule=!0;var I=i(n(3)),a=i(n(17)),s=i(n(41)),c=i(n(42)),k=i(n(18)),D=i(n(4)),r=n(0);function i(t){return t&&t.__esModule?t:{default:t}}var o=(l.prototype.setUpMapCallbacks=function(t){var r=this;t.callback_manager.set("select_metabolite_with_id.input",function(t,e){r.is_active&&r.reload(t,e,!1)&&r.showDropdown(e),r.hideTarget()}),t.callback_manager.set("select_selectable.input",function(t,e,n){r.hideTarget(),1===t&&r.is_active&&n?r.reload(e,n,!1)&&r.showDropdown(n):r.toggle(!1)}),t.callback_manager.set("deselect_nodes",function(){r.direction_arrow.hide(),r.hideDropdown()}),t.callback_manager.set("before_svg_export",function(){r.direction_arrow.hide(),r.hideTarget()})},l.prototype.setUpZoomCallbacks=function(t){},l.prototype.is_visible=function(){return this.placed_div.is_visible()},l.prototype.toggle=function(t){if(this.is_active=void 0===t?!this.is_active:t,this.is_active){this.toggleStartReactionListener(!0);var e=!0;D.default.isNull(this.target_coords)?e=this.reloadAtSelected():this.placed_div.place(this.target_coords),e&&(this.showDropdown(),this.map.set_status("Click on the canvas or an existing metabolite")),this.direction_arrow.show()}else this.toggleStartReactionListener(!1),this.hideDropdown(),this.map.set_status(null),this.direction_arrow.hide()},l.prototype.showDropdown=function(t){var e=this;this.clear_escape=this.map.key_manager.addEscapeListener(function(){return e.hideDropdown()},!0),this.completely.input.blur(),this.completely.repaint(),this.completely.setText(""),this.completely.input.focus()},l.prototype.hideDropdown=function(){this.clear_escape&&this.clear_escape(),this.clear_escape=null,this.placed_div.hide(),this.completely.input.blur(),this.completely.hideDropDown()},l.prototype.place=function(t){this.placed_div.place(t),this.direction_arrow.setLocation(t),this.direction_arrow.show()},l.prototype.reloadAtSelected=function(){this.map.deselect_text_labels();var t=this.map.select_single_node();if(null===t)return!1;var e={x:t.x,y:t.y};return this.reload(t,e,!1)},l.prototype.alreadyDrawn=function(t,e){for(var n in e)if(e[n].bigg_id===t)return!0;return!1},l.prototype.reload=function(e,n,r){var i=this;if(r||e){if(this.place(n),null===this.map.cobra_model)return this.completely.setText("Cannot add: No model."),!1;var t,o,a="name"===this.settings.get("identifiers_on_map"),s=this.settings.get("allow_building_duplicate_reactions"),c=[],l=this.map.cobra_model.reactions,u=this.map.cobra_model.metabolites,h=this.map.reactions,d=this.map.has_data_on_reactions,f=e?a?e.name:e.bigg_id:"",p={};for(var A in l){var g=l[A],b=g.name,m=a?b:A;if(s||!this.alreadyDrawn(A,h))for(var y in g.metabolites)if(r||y===e.bigg_id){if(A in p)continue;var _={},v=[],w=void 0;if(a)for(w in g.metabolites){var x=u[w].name;_[x]=g.metabolites[w],v.push(x)}else for(w in _=I.default.clone(g.metabolites),g.metabolites)v.push(w);var M=D.default.flatten(g.genes.map(function(t){return[t.name,t.biggId]})),C=k.default.build_reaction_string(_,g.reversibility,g.lower_bound,g.upper_bound),E=[m].concat(v).concat(M).filter(function(t){return t});d?c.push({reaction_data:g.data,html:"<b>"+m+"</b>: "+g.data_string,matches:E,id:A}):c.push({html:"<b>"+m+"</b>\t"+(t=C,o=[f],t.replace(new RegExp("(^| )("+o.join("|")+")($| )","g"),"$1<b>$2</b>$3")),matches:E,id:A}),p[A]=!0}}var B=d?function(t,e){return Math.abs(t.reaction_data)>Math.abs(e.reaction_data)?-1:1}:function(t,e){return t.html.toLowerCase()<e.html.toLowerCase()?-1:1};return this.completely.options=c.sort(B),this.completely.setText(""),this.completely.onEnter=function(t){this.setText(""),this.onChange(""),function(t){if(null!==t)if(r)i.map.new_reaction_from_scratch(t,n,i.direction_arrow.getRotation());else{if(!(e.node_id in i.map.nodes))return console.error("Selected node no longer exists"),i.hideDropdown();i.map.new_reaction_for_metabolite(t,e.node_id,i.direction_arrow.getRotation())}}(t)},!0}console.error("No selected node and not starting from scratch")},l.prototype.toggleStartReactionListener=function(t){var e=this;if(void 0===t)this.start_reaction_listener=!this.start_reaction_listener;else{if(this.start_reaction_listener===t)return;this.start_reaction_listener=t}if(this.start_reaction_listener){var n=this.map.sel.node();this.map.sel.on("click.start_reaction",function(){if(!e.direction_arrow.dragging){var t={x:(0,r.mouse)(n)[0],y:(0,r.mouse)(n)[1]};e.map.deselect_nodes(),e.map.deselect_text_labels(),e.reload(null,t,!0)&&e.showDropdown(t),e.showTarget(e.map,t)}}),this.map.sel.style("cursor","pointer")}else this.map.sel.on("click.start_reaction",null),this.map.sel.style("cursor",null),this.hideTarget()},l.prototype.hideTarget=function(){this.target_coords&&this.map.sel.selectAll(".start-reaction-target").remove(),this.target_coords=null},l.prototype.showTarget=function(t,e){var n=t.sel.selectAll(".start-reaction-target").data([12,5]);n.enter().append("circle").classed("start-reaction-target",!0).attr("r",function(t){return t}).style("stroke-width",4).merge(n).style("visibility","visible").attr("transform","translate("+e.x+","+e.y+")"),this.target_coords=e},l);function l(t,e,n,r){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var o=t.append("div").attr("id","rxn-input");this.placed_div=(0,a.default)(o,e,{x:240,y:0}),this.placed_div.hide(),this.completely=(0,s.default)(o.node(),{backgroundColor:"#eee"}),o.append("button").attr("class","button input-close-button").text("").on("mousedown",function(){return i.hideDropdown()}),this.map=e;this.direction_arrow=new c.default(e.sel),this.direction_arrow.setRotation(90),this.setUpMapCallbacks(e),this.zoomContainer=n,this.setUpZoomCallbacks(n),this.settings=r,this.toggle(!1),this.target_coords=null}e.default=o},function(t,e,n){"use strict";var M=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(3));t.exports=function(t,u){var h=M.get_document(t),d=M.get_window(t);(u=u||{}).fontSize=u.fontSize||"13px",u.fontFamily=u.fontFamily||"sans-serif",u.promptInnerHTML=u.promptInnerHTML||"",u.color=u.color||"#333",u.hintColor=u.hintColor||"#aaa",u.backgroundColor=u.backgroundColor||"#fff",u.dropDownBorderColor=u.dropDownBorderColor||"#aaa",u.dropDownZIndex=u.dropDownZIndex||"100",u.dropDownOnHoverBackgroundColor=u.dropDownOnHoverBackgroundColor||"#ddd";var s=h.createElement("input");s.type="text",s.spellcheck=!1,s.style.fontSize=u.fontSize,s.style.fontFamily=u.fontFamily,s.style.color=u.color,s.style.backgroundColor=u.backgroundColor,s.style.width="100%",s.style.outline="0",s.style.border="0",s.style.margin="0",s.style.padding="0";var c=s.cloneNode();c.disabled="",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.borderColor="transparent",c.style.boxShadow="none",c.style.color=u.hintColor,s.style.backgroundColor="transparent",s.style.verticalAlign="top",s.style.position="relative";var e=h.createElement("div");e.style.position="relative",e.style.outline="0",e.style.border="0",e.style.margin="0",e.style.padding="0";var n=h.createElement("div");if(n.style.position="absolute",n.style.outline="0",n.style.margin="0",n.style.padding="0",n.style.border="0",n.style.fontSize=u.fontSize,n.style.fontFamily=u.fontFamily,n.style.color=u.color,n.style.backgroundColor=u.backgroundColor,n.style.top="0",n.style.left="0",n.style.overflow="hidden",n.innerHTML=u.promptInnerHTML,n.style.background="transparent",void 0===h.body)throw"thisDocument.body is undefined. The library was wired up incorrectly.";h.body.appendChild(n);var r=n.getBoundingClientRect().right;e.appendChild(n),n.style.visibility="visible",n.style.left="-"+r+"px",e.style.marginLeft=r+"px",e.appendChild(c),e.appendChild(s);var l=h.createElement("div");l.style.position="absolute",l.style.visibility="hidden",l.style.outline="0",l.style.margin="0",l.style.padding="0",l.style.textAlign="left",l.style.fontSize=u.fontSize,l.style.fontFamily=u.fontFamily,l.style.backgroundColor=u.backgroundColor,l.style.zIndex=u.dropDownZIndex,l.style.cursor="default",l.style.borderStyle="solid",l.style.borderWidth="1px",l.style.borderColor=u.dropDownBorderColor,l.style.overflowX="hidden",l.style.whiteSpace="pre",l.style.overflowY="scroll";var f,p,A,i,o,g,b,m,y=(f=l,p=[],A=0,i=-1,o=null,g={hide:function(){f.style.visibility="hidden"},refresh:function(e,t){f.style.visibility="hidden",A=0,f.innerHTML="";var n=d.innerHeight||h.documentElement.clientHeight,r=f.parentNode.getBoundingClientRect(),i=r.top-6,o=n-r.bottom-6;p=[];for(var a=0;a<t.length;a++){var s=t[a].matches.filter(function(t){return 0==t.toLowerCase().indexOf(e.toLowerCase())});if(0!=s.length){var c=h.createElement("div");if(c.style.color=u.color,c.onmouseover=_,c.onmouseout=v,c.onmousedown=function(t){t.preventDefault()},c.ondblclick=w,c.__hint=s[0],c.id=t[a].id,c.innerHTML=t[a].html,p.push(c),f.appendChild(c),p.length>=x.display_limit){var l=h.createElement("div");l.innerHTML=" "+(t.length-p.length)+" more",p.push(l),f.appendChild(l);break}}}0!==p.length&&(g.highlight(0),3*o<i?(f.style.maxHeight=i+"px",f.style.top="",f.style.bottom="100%"):(f.style.top="100%",f.style.bottom="",f.style.maxHeight=o+"px"),f.style.visibility="visible")},highlight:function(t){-1!=i&&p[i]&&(p[i].style.backgroundColor=u.backgroundColor),p[t].style.backgroundColor=u.dropDownOnHoverBackgroundColor,o=p[i=t]},move:function(t){return"hidden"===f.style.visibility?"":(A+t===-1||A+t===p.length||(A+=t,g.highlight(A)),p[A].__hint)},onmouseselection:function(){},get_current_row:function(){return o}});function _(){this.style.outline="1px solid #ddd"}function v(){this.style.outline="0"}function w(t){t.preventDefault(),g.onmouseselection(this.id)}y.onmouseselection=function(t){x.onEnter(t),x.input.focus()},e.appendChild(l),t.appendChild(e);var a,x={get_hint:function(t){return t},display_limit:1e3,onArrowDown:function(){},onArrowUp:function(){},onEnter:function(){},onTab:function(){},onChange:function(){x.repaint()},startFrom:0,options:[],wrapper:e,input:s,hint:c,dropDown:l,prompt:n,setText:function(t){c.value=t,s.value=t},getText:function(){return s.value},hideDropDown:function(){y.hide()},repaint:function(){var t=s.value,e=x.startFrom,n=x.options,r=n.length,i=t.substring(e);m=t.substring(0,e),c.value="";for(var o=0;o<r;o++){var a=n[o].matches.filter(function(t){return 0==t.toLowerCase().indexOf(i.toLowerCase())});if(0!=a.length){c.value=x.get_hint(a[0]);break}}l.style.left=function(t){return void 0===b&&((b=h.createElement("span")).style.visibility="hidden",b.style.position="fixed",b.style.outline="0",b.style.margin="0",b.style.padding="0",b.style.border="0",b.style.left="0",b.style.whiteSpace="pre",b.style.fontSize=u.fontSize,b.style.fontFamily=u.fontFamily,b.style.fontWeight="normal",h.body.appendChild(b)),b.innerHTML=String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),b.getBoundingClientRect().right}(m)+"px",y.refresh(i,x.options)}};!function(e,n){a=e.value;function t(){var t=e.value;a!==t&&n(a=t)}e.addEventListener("input",t,!1),e.addEventListener("keyup",t,!1),e.addEventListener("change",t,!1)}(s,function(t){x.onChange(t),x.repaint()});return s.addEventListener("keydown",function(t){var e=(t=t||d.event).keyCode;if(33!=e&&34!=e)if(39!=e&&35!=e&&9!=e)if(13!=e){var n;if(40==e)return""==(n=y.move(1))&&x.onArrowDown(),void(c.value=x.get_hint(n));if(38==e)return""==(n=y.move(-1))&&x.onArrowUp(),c.value=x.get_hint(n),t.preventDefault(),void t.stopPropagation();c.value=""}else{var r=y.get_current_row().id;x.onEnter(r)}else if(9==e&&(t.preventDefault(),t.stopPropagation(),0==c.value.length&&x.onTab()),0<c.value.length){s.value=c.value;var i=a!=s.value;a=s.value,i&&x.onChange(s.value)}},!1),x}},function(t,e,n){"use strict";e.__esModule=!0;var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(3)),r=n(7),a=n(0);var i=(s.prototype.setLocation=function(t){this.center=t;var e=o.d3_transform_catch(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+t.x+","+t.y+")rotate("+e.rotate+")")},s.prototype.setRotation=function(t){var e=o.d3_transform_catch(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+e.translate+")rotate("+t+")")},s.prototype.displaceRotation=function(t){var e=o.d3_transform_catch(this.arrowContainer.attr("transform"));this.arrowContainer.attr("transform","translate("+e.translate+")rotate("+(e.rotate+t)+")")},s.prototype.getRotation=function(){return o.d3_transform_catch(this.arrowContainer.attr("transform")).rotate},s.prototype.toggle=function(t){this.isVisible=void 0===t?!this.isVisible:t,this.arrow.style("visibility",this.isVisible?"visible":"hidden")},s.prototype.show=function(){this.toggle(!0)},s.prototype.hide=function(){this.toggle(!1)},s.prototype.right=function(){this.setRotation(0)},s.prototype.down=function(){this.setRotation(90)},s.prototype.left=function(){this.setRotation(180)},s.prototype.up=function(){this.setRotation(270)},s.prototype._setupDrag=function(){var i=this,t=(0,r.drag)().on("start",function(t){a.event.sourceEvent.stopPropagation(),i.dragging=!0}).on("drag",function(t){var e={x:a.event.dx,y:a.event.dy},n={x:(0,a.mouse)(i.sel.node())[0],y:(0,a.mouse)(i.sel.node())[1]},r=o.angle_for_event(e,n,i.center);i.displaceRotation(o.to_degrees(r))}).on("end",function(t){setTimeout(function(){i.dragging=!1},200)});this.arrowContainer.call(t)},s);function s(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.arrowContainer=t.append("g").attr("id","direction-arrow-container").attr("transform","translate(0,0)rotate(0)"),this.arrow=this.arrowContainer.append("path").classed("direction-arrow",!0).attr("d","M0 -5 L0 5 L20 5 L20 10 L30 0 L20 -10 L20 -5 Z").style("visibility","hidden").attr("transform","translate(30,0)scale(2.5)"),this.sel=t,this.center={x:0,y:0},this._setupDrag(),this.dragging=!1,this.isVisible=!1,this.show()}e.default=i},function(t,e,n){"use strict";var w=n(3),g=n(12),r=n(13).default,b=n(6).format,C=(n(0).select,n(0).mouse),E=n(0).touch,i=w.make_class();function x(t,e,n,r){var i=t,o=w.distance(e,n);return i&&o?"start"===r?{x:e.x+i*(n.x-e.x)/o,y:e.y+i*(n.y-e.y)/o}:"end"===r?{x:n.x-i*(n.x-e.x)/o,y:n.y-i*(n.y-e.y)/o}:void console.error("bad displace value: "+r):(console.warn("No space for displacement"),{x:e.x,y:e.y})}i.prototype={init:function(t,e,n){this.behavior=t,this.settings=e,this.map=n,this.callback_manager=new r},create_reaction:function(t){var e=t.append("g").attr("id",function(t){return"r"+t.reaction_id}).attr("class","reaction");return this.create_reaction_label(e),this.callback_manager.run("create_reaction",this,t),e},update_reaction:function(t,e,n,r,i,o){t.select(".reaction-label-group").call(function(t){return this.update_reaction_label(t,o)}.bind(this)),w.draw_a_nested_object(t,".segment-group","segments","segment_id",this.create_segment.bind(this),function(t){return this.update_segment(t,e,n,r,i,o)}.bind(this),function(t){t.remove()}),this.callback_manager.run("update_reaction",this,t)},create_bezier:function(t){var e=t.append("g").attr("id",function(t){return t.bezier_id}).attr("class",function(t){return"bezier"});return e.append("path").attr("class","connect-line"),e.append("circle").attr("class",function(t){return"bezier-circle "+t.bezier}).style("stroke-width",String(1)+"px").attr("r",String(7)+"px"),this.callback_manager.run("create_bezier",this,t),e},update_bezier:function(t,e,n,r,i,o,a){var s=this.settings.get("hide_secondary_metabolites");{if(!e)return void t.attr("visibility","hidden");t.attr("visibility","visible")}t.style("visibility",function(t){var e=a[t.reaction_id].segments[t.segment_id],n=o[e.from_node_id],r=o[e.to_node_id];return s&&("metabolite"===r.node_type&&!r.node_is_primary||"metabolite"===n.node_type&&!n.node_is_primary)?"hidden":null}),t.select(".bezier-circle").call(this.behavior.turnOffDrag).call(n).on("mouseover",r).on("mouseout",i).attr("transform",function(t){return null===t.x||null===t.y?"":"translate("+t.x+","+t.y+")"}),t.select(".connect-line").attr("d",function(t){var e=a[t.reaction_id].segments[t.segment_id],n="b1"===t.bezier?o[e.from_node_id]:o[e.to_node_id];return null===t.x||null===t.y||null===n.x||null===n.y?"":"M"+t.x+", "+t.y+" "+n.x+","+n.y}),this.callback_manager.run("update_bezier",this,t)},create_node:function(t,e,n){var r=t.append("g").attr("class","node").attr("id",function(t){return"n"+t.node_id});return r.append("circle").attr("class",function(t){var e="node-circle";return null!==t.node_type&&(e+=" "+t.node_type+"-circle"),e}),r.filter(function(t){return t.node_type==="metabolite"}).append("text").attr("class","node-label label"),this.callback_manager.run("create_node",this,t),r},update_node:function(t,n,r,e,i,o,a,s,c){var l=this.settings.get("hide_secondary_metabolites"),u=this.settings.get("primary_metabolite_radius"),h=this.settings.get("secondary_metabolite_radius"),d=this.settings.get("marker_radius"),f=this.settings.get("hide_all_labels"),p=this.settings.get("identifiers_on_map"),A=this.settings.get("metabolite_styles"),g={color:this.settings.get("metabolite_no_data_color"),size:this.settings.get("metabolite_no_data_size")},b=this.behavior.labelMousedown,m=this.behavior.labelMouseover,y=this.behavior.labelMouseout,_=(this.behavior.labelTouch,this.behavior.objectMouseover),v=this.behavior.objectMouseout,w=this.behavior.objectTouch,x=(t.select(".node-circle").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).style("visibility",function(t){return M(t,l)?"hidden":null}).attr("r",function(t){if("metabolite"!==t.node_type)return d;if(r&&-1!==A.indexOf("size")){var e=t.data;return null===e?g.size:n.metabolite_size(e)}return t.node_is_primary?u:h}).style("fill",function(t){if("metabolite"!==t.node_type)return null;if(r&&-1!==A.indexOf("color")){var e=t.data;return null===e?g.color:n.metabolite_color(e)}return null}).call(this.behavior.turnOffDrag).call(s).on("mousedown",e).on("click",i).on("mouseover",function(t){if("metabolite"===t.node_type){var e=C(this.parentNode);_("node_object",Object.assign({},t,{xPos:e[0],yPos:e[1]}))}}).on("mouseout",v).on("touchend",function(t){"metabolite"===t.node_type&&(touchEvent=E(this.parentNode,0),w("node_object",Object.assign({},t,{xPos:touchEvent[0],yPos:touchEvent[1]})))}),t.select(".node-label").attr("visibility",f?"hidden":"visible"));f||x.style("visibility",function(t){return M(t,l)?"hidden":null}).attr("transform",function(t){return"translate("+t.label_x+","+t.label_y+")"}).text(function(t){var e=t[p];return r&&-1!==A.indexOf("text")&&(e+=" "+t.data_string),e}).call(this.behavior.turnOffDrag).call(c).on("mousedown",b).on("mouseover",function(t){m("node_label",t)}).on("mouseout",y);function M(t,e){return"metabolite"===t.node_type&&e&&!t.node_is_primary}this.callback_manager.run("update_node",this,t)},create_text_label:function(t){var e=t.append("g").attr("id",function(t){return"l"+t.text_label_id}).attr("class","text-label");return e.append("text").attr("class","label"),this.callback_manager.run("create_text_label",this,t),e},update_text_label:function(t){var e=this.behavior.textLabelMousedown,n=this.behavior.textLabelClick,r=this.behavior.selectableDrag,i=this.behavior.turnOffDrag;t.select(".label").text(function(t){return t.text}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).on("mousedown",e).on("click",n).call(i).call(r),this.callback_manager.run("update_text_label",this,t)},create_membrane:function(t){var e=t.append("rect").attr("class","membrane");return this.callback_manager.run("create_membrane",this,t),e},update_membrane:function(t){t.attr("width",function(t){return t.width}).attr("height",function(t){return t.height}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).style("stroke-width",function(t){return 10}).attr("rx",function(t){return 20}).attr("ry",function(t){return 20}),this.callback_manager.run("update_membrane",this,t)},create_reaction_label:function(t,e){var n=t.append("g").attr("class","reaction-label-group");return n.append("text").attr("class","reaction-label label"),n.append("g").attr("class","all-genes-label-group"),this.callback_manager.run("create_reaction_label",this,t),n},update_reaction_label:function(t,n){b(".4g");var i=this.settings.get("identifiers_on_map"),o=this.settings.get("reaction_styles"),a=this.settings.get("show_gene_reaction_rules"),s=this.settings.get("hide_all_labels"),r=this.settings.get("gene_font_size"),e=this.behavior.labelMousedown,c=this.behavior.labelMouseover,l=this.behavior.labelMouseout,u=this.behavior.labelTouch;t.attr("transform",function(t){return"translate("+t.label_x+","+t.label_y+")"}).call(this.behavior.turnOffDrag).call(this.behavior.reactionLabelDrag);var h=t.select(".reaction-label").attr("visibility",s?"hidden":"visible");s||h.text(function(t){var e=t[i];return n&&-1!==o.indexOf("text")&&(e+=" "+t.data_string),e}).on("mousedown",e).on("mouseover",function(t){c("reaction_label",t)}).on("mouseout",l).on("touchend",function(t){u("reaction_label",t)});function d(t,e){return t+1.5*r*(e+1)}var f=t.select(".all-genes-label-group").selectAll(".gene-label-group").data(function(n){var t="gene_string"in n&&null!==n.gene_string&&a&&!s&&-1!==o.indexOf("text"),e="gene_reaction_rule"in n&&null!==n.gene_reaction_rule&&a&&!s;if(t)return console.warn("Showing gene_string. See TODO in source."),n.gene_string;if(e){var r=g.gene_string_for_data(n.gene_reaction_rule,null,n.genes,null,i,null);return r.forEach(function(t,e){t.label_x=n.label_x,t.label_y=d(n.label_y,e)}),r}return[]}),p=f.enter().append("g").attr("class","gene-label-group");p.append("text").attr("class","gene-label").style("font-size",r+"px").on("mousedown",e).on("mouseover",function(t){c("gene_label",t)}).on("mouseout",l);var A=p.merge(f);A.attr("transform",function(t,e){return"translate(0, "+d(0,e)+")"}),A.select("text").text(function(t){return t.text}),f.exit().remove(),this.callback_manager.run("update_reaction_label",this,t)},create_segment:function(t){var e=t.append("g").attr("class","segment-group").attr("id",function(t){return"s"+t.segment_id});return e.append("path").attr("class","segment"),e.append("g").attr("class","arrowheads"),e.append("g").attr("class","stoichiometry-labels"),this.callback_manager.run("create_segment",this,t),e},update_segment:function(t,i,r,h,e,n){function d(t,e){var n=20,r=13;return e&&(r=null===t?s:i.reaction_size(t),isNaN(r)&&(r=s),n=2*r),{width:n,height:r}}function f(t,e,n,r){var i=e||0<n?t.height:0;return(r?u:g)+i+10}var o=this.settings.get("reaction_styles"),p=n&&-1!==o.indexOf("size"),a=n&&-1!==o.indexOf("color"),s=this.settings.get("reaction_no_data_size"),c=this.settings.get("reaction_no_data_color"),l=this.settings.get("highlight_missing"),A=this.settings.get("hide_secondary_metabolites"),u=this.settings.get("primary_metabolite_radius"),g=this.settings.get("secondary_metabolite_radius"),b=this.behavior.objectMouseover,m=this.behavior.objectMouseout,y=this.behavior.objectTouch;t.selectAll(".segment").datum(function(){return Object.assign({},this.parentNode.__data__,this.parentNode.parentNode.__data__)}).style("visibility",function(t){var e=h[t.from_node_id],n=h[t.to_node_id];return A&&("metabolite"===n.node_type&&!n.node_is_primary||"metabolite"===e.node_type&&!e.node_is_primary)?"hidden":null}).attr("d",function(t){if(null===t.from_node_id||null===t.to_node_id)return null;var e=h[t.from_node_id],n=h[t.to_node_id],r=t.b1,i=t.b2;if("metabolite"===e.node_type){var o=d(t.data,p);e=x(f(o,t.reversibility,t.from_node_coefficient,e.node_is_primary),e,null===r?n:r,"start")}if("metabolite"==n.node_type){o=d(t.data,p);n=x(f(o,t.reversibility,t.to_node_coefficient,n.node_is_primary),null===i?e:i,n,"end")}var a="M"+e.x+","+e.y+" ";return null!==r&&null!==i&&(a+="C"+r.x+","+r.y+" "+i.x+","+i.y+" "),a+=n.x+","+n.y}).style("stroke",function(t){var e=this.parentNode.parentNode.__data__.bigg_id;if(l&&null!==r&&!(e in r.reactions))return"red";if(a){var n=t.data;return null===n?c:i.reaction_color(n)}return null}).style("stroke-width",function(t){if(p){var e=t.data;return null===e?s:i.reaction_size(e)}return null}).attr("pointer-events","visibleStroke").on("mouseover",function(t){var e=C(this);b("reaction_object",Object.assign({},t,{xPos:e[0],yPos:e[1]}))}).on("touchend",function(t){var e=E(this.parentNode,0);y("reaction_object",Object.assign({},t,{xPos:e[0],yPos:e[1]}))}).on("mouseout",m);var _=t.select(".arrowheads").selectAll(".arrowhead").data(function(t){var e=[],n=h[t.from_node_id],r=t.b1,i=h[t.to_node_id],o=t.b2;if(A&&("metabolite"===i.node_type&&!i.node_is_primary||"metabolite"===n.node_type&&!n.node_is_primary))return e;if("metabolite"===n.node_type&&(t.reversibility||0<t.from_node_coefficient)){var a=d(t.data,p),s=f(a,t.reversibility,t.from_node_coefficient,n.node_is_primary),c=null===r?i:r,l=w.to_degrees(w.get_angle([n,c]))+90,u=x(s,n,c,"start");e.push({data:t.data,x:u.x,y:u.y,size:a,rotation:l,show_arrowhead_flux:t.from_node_coefficient<0===t.reverse_flux||0===t.data})}if("metabolite"===i.node_type&&(t.reversibility||0<t.to_node_coefficient)){a=d(t.data,p),s=f(a,t.reversibility,t.to_node_coefficient,i.node_is_primary),c=null===o?n:o,l=w.to_degrees(w.get_angle([i,c]))+90,u=x(s,c,i,"end");e.push({data:t.data,x:u.x,y:u.y,size:a,rotation:l,show_arrowhead_flux:t.to_node_coefficient<0===t.reverse_flux||0===t.data})}if(t.unconnected_segment_with_arrow){a=d(t.data,p),c=i,l=w.to_degrees(w.get_angle([n,c]))+90;e.push({data:t.data,x:n.x,y:n.y,size:a,rotation:l,show_arrowhead_flux:t.to_node_coefficient<0===t.reverse_flux||0===t.data})}return e});_.enter().append("path").classed("arrowhead",!0).merge(_).attr("d",function(t){return"M"+[-t.size.width/2,0]+" L"+[0,t.size.height]+" L"+[t.size.width/2,0]+" Z"}).attr("transform",function(t){return"translate("+t.x+","+t.y+")rotate("+t.rotation+")"}).style("fill",function(t){if(a){if(t.show_arrowhead_flux){var e=t.data;return null===e?c:i.reaction_color(e)}return"#FFFFFF"}return null}).style("stroke",function(t){if(a){var e=t.data;return null===e?c:i.reaction_color(e)}return null}),_.exit().remove();var v=t.select(".stoichiometry-labels").selectAll(".stoichiometry-label").data(function(t){var e=[],n=h[t.from_node_id],r=t.b1,i=h[t.to_node_id],o=t.b2;if(A&&("metabolite"==i.node_type&&!i.node_is_primary||"metabolite"==n.node_type&&!n.node_is_primary))return e;if("metabolite"===n.node_type&&1!=Math.abs(t.from_node_coefficient)){var a=d(t.data,p),s=null===r?i:r,c=x(1.5*f(a,!1,0,i.node_is_primary),n,s=w.c_plus_c(s,w.rotate_coords(s,.5,n)),"start");c=w.c_plus_c(c,{x:0,y:7}),e.push({coefficient:Math.abs(t.from_node_coefficient),x:c.x,y:c.y,data:t.data})}if("metabolite"===i.node_type&&1!==Math.abs(t.to_node_coefficient)){a=d(t.data,p),s=null===o?n:o,c=x(1.5*f(a,!1,0,i.node_is_primary),s=w.c_plus_c(s,w.rotate_coords(s,.5,i)),i,"end");c=w.c_plus_c(c,{x:0,y:7}),e.push({coefficient:Math.abs(t.to_node_coefficient),x:c.x,y:c.y,data:t.data})}return e});v.enter().append("text").attr("class","stoichiometry-label").attr("text-anchor","middle").merge(v).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).text(function(t){return t.coefficient}).style("fill",function(t){if(a){var e=t.data;return null===e?c:i.reaction_color(e)}return null}),v.exit().remove(),this.callback_manager.run("update_segment",this,t)}},t.exports=i},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(30),l=(r=i)&&r.__esModule?r:{default:r},o=n(90);var a=(s.prototype.connectToSettings=function(o,a,s){var c=this;["reaction","metabolite"].forEach(function(e){var n=e+"_scale",r=e+"_scale_preset",t=o.get(r),i=o.get(n);t&&i&&i!==l.default[t]?(console.warn("Both "+n+" and "+r+" are defined. Ignoring "+r+". Set "+r+' to "false" to hide this warning.'),o.set(r,null)):t?o.set(n,l.default[t]):i||console.error("Must provide a "+n+" or "+r),o.get(n)&&o.get(n).length<2?console.error("Bad value for option "+n+". Scales must have at least 2 points."):c.setScale(e,n,s),o.streams[n].onValue(function(t){t&&t!==l.default[o.get(r)]&&o.set(r,null),c.setScale(e,t,s)}),o.streams[r].onValue(function(t){t&&o.set(n,l.default[t])}),a.callback_manager.set("calc_data_stats__"+e,function(t){t&&c.setScale(e,o.get(e+"_scale"),s)})})},s.prototype.sortScale=function(t,n){var e=t.map(function(t){var e=void 0;if(t.type in n)e=n[t.type];else{if("value"!==t.type)throw new Error("Bad domain type "+t.type);e=t.value}return{v:e,color:t.color,size:t.size}}).sort(function(t,e){return t.v-e.v});return{domain:e.map(function(t){return t.v}),color_range:e.map(function(t){return t.color}),size_range:e.map(function(t){return t.size})}},s.prototype.setScale=function(t,e,n){"reaction"===t?this.setReactionScale(e,n):this.setMetaboliteScale(e,n)},s.prototype.setReactionScale=function(t,e){var n=e().reaction;if(null!==n){var r=this.sortScale(t,n);this.reaction_color.domain(r.domain),this.reaction_size.domain(r.domain),this.reaction_color.range(r.color_range),this.reaction_size.range(r.size_range)}},s.prototype.setMetaboliteScale=function(t,e){var n=e().metabolite;if(null!==n){var r=this.sortScale(t,n);this.metabolite_color.domain(r.domain),this.metabolite_size.domain(r.domain),this.metabolite_color.range(r.color_range),this.metabolite_size.range(r.size_range)}},s);function s(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.x=(0,o.scaleLinear)(),this.y=(0,o.scaleLinear)(),this.x_size=(0,o.scaleLinear)(),this.y_size=(0,o.scaleLinear)(),this.size=(0,o.scaleLinear)(),this.reaction_color=(0,o.scaleLinear)().clamp(!0),this.reaction_size=(0,o.scaleLinear)().clamp(!0),this.metabolite_color=(0,o.scaleLinear)().clamp(!0),this.metabolite_size=(0,o.scaleLinear)().clamp(!0)}e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var p=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(3)),r=o(n(13)),A=n(7),g=n(0),i=o(n(4));function o(t){return t&&t.__esModule?t:{default:t}}var a=(s.prototype.toggleResize=function(t){i.default.isUndefined(t)&&(t=!this.resizeEnabled),t?this.selection.selectAll(".drag-rect").style("pointer-events","auto"):this.selection.selectAll(".drag-rect").style("pointer-events","none")},s.prototype.setup=function(){function t(){g.event.sourceEvent.stopPropagation()}function n(t,e,n){var r=p.d3_transform_catch(n).translate;return null!==t&&(r[0]=t),null!==e&&(r[1]=e),"translate("+r+")"}var r=this,e=this.selection.append("g").classed("canvas-group",!0).data([{x:this.x,y:this.y}]),i=e.append("rect").attr("id","mouse-node").attr("width",10*this.width).attr("height",10*this.height).attr("transform","translate("+[this.x-10*this.width/2,this.y-10*this.height/2]+")").attr("pointer-events","all");this.mouseNode=i;var o=e.append("rect").attr("id","canvas").attr("width",this.width).attr("height",this.height).attr("transform","translate("+[this.x,this.y]+")"),a=(0,A.drag)().on("start",t).on("drag",function(t){var e=t.x;t.x=Math.min(t.x+r.width-50,g.event.x),r.x=t.x,r.width=r.width+(e-t.x),s.attr("transform",function(t){return n(t.x-50,null,s.attr("transform"))}),i.attr("transform",function(t){return n(t.x,null,i.attr("transform"))}).attr("width",10*r.width),o.attr("transform",function(t){return n(t.x,null,o.attr("transform"))}).attr("width",r.width),h.attr("transform",function(t){return n(t.x+50,null,h.attr("transform"))}).attr("width",r.width-100),f.attr("transform",function(t){return n(t.x+50,null,f.attr("transform"))}).attr("width",r.width-100),r.callbackManager.run("resize")}),s=e.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x-50,t.y+50]+")"}).attr("height",this.height-100).attr("id","dragleft").attr("width",100).attr("cursor","ew-resize").classed("resize-rect",!0).call(a),c=(0,A.drag)().on("start",t).on("drag",function(t){g.event.sourceEvent.stopPropagation();var e=Math.max(t.x+50,t.x+r.width+g.event.dx);r.width=e-t.x,l.attr("transform",function(t){return n(e-50,null,l.attr("transform"))}),i.attr("width",10*r.width),o.attr("width",r.width),h.attr("width",r.width-100),f.attr("width",r.width-100),r.callbackManager.run("resize")}),l=e.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x+r.width-50,t.y+50]+")"}).attr("id","dragright").attr("height",this.height-100).attr("width",100).attr("cursor","ew-resize").classed("resize-rect",!0).call(c),u=(0,A.drag)().on("start",t).on("drag",function(t){g.event.sourceEvent.stopPropagation();var e=t.y;t.y=Math.min(t.y+r.height-50,g.event.y),r.y=t.y,r.height=r.height+(e-t.y),h.attr("transform",function(t){return n(null,t.y-50,h.attr("transform"))}),i.attr("transform",function(t){return n(null,t.y,i.attr("transform"))}).attr("width",10*r.height),o.attr("transform",function(t){return n(null,t.y,o.attr("transform"))}).attr("height",r.height),s.attr("transform",function(t){return n(null,t.y+50,s.attr("transform"))}).attr("height",r.height-100),l.attr("transform",function(t){return n(null,t.y+50,l.attr("transform"))}).attr("height",r.height-100),r.callbackManager.run("resize")}),h=e.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x+50,t.y-50]+")"}).attr("height",100).attr("width",this.width-100).attr("cursor","ns-resize").classed("resize-rect",!0).call(u),d=(0,A.drag)().on("start",t).on("drag",function(t){g.event.sourceEvent.stopPropagation();var e=Math.max(t.y+50,t.y+r.height+g.event.dy);r.height=e-t.y,f.attr("transform",function(t){return n(null,e-50,f.attr("transform"))}),i.attr("height",10*r.height),o.attr("height",r.height),s.attr("height",r.height-100),l.attr("height",r.height-100),r.callbackManager.run("resize")}),f=e.append("rect").classed("drag-rect",!0).attr("transform",function(t){return"translate("+[t.x+50,t.y+r.height-50]+")"}).attr("height",100).attr("width",this.width-100).attr("cursor","ns-resize").classed("resize-rect",!0).call(d)},s.prototype.sizeAndLocation=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},s);function s(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.selection=t,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.resizeEnabled=!0,this.callbackManager=new r.default,this.setup()}e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var d=n(92),f=n(0);var r=(a.prototype.brushIsEnabled=function(){return this.map.sel.select(".brush").empty()},a.prototype.toggle=function(t){void 0===t&&(t=!this.enabled),t?this.setupSelectionBrush():this.brushSel.selectAll("*").remove()},a.prototype.turnOffCrosshair=function(t){t.selectAll("rect").attr("cursor",null)},a.prototype.setupSelectionBrush=function(){var t=this,e=this.map,n=this.brushSel,i=e.sel.selectAll("#nodes,#text-labels"),r=e.canvas.sizeAndLocation(),o=r.width,a=r.height,s=r.x,c=r.y,l=this.turnOffCrosshair.bind(this);n.selectAll("*").remove();var u=!1,h=(0,d.brush)().extent([[s,c],[s+o,c+a]]).on("start",function(){t.turnOffCrosshair(n),e.settings.get("hide_secondary_metabolites")&&(e.settings.set("hide_secondary_metabolites",!1),e.draw_everything(),e.set_status("Showing secondary metabolites. You can hide them again in Settings.",2e3))}).on("brush",function(){var t=f.event.sourceEvent.shiftKey,r=(0,d.brushSelection)(this);null!==r&&(t?i.selectAll(".node:not(.selected),.text-label:not(.selected)"):i.selectAll(".node,.text-label")).classed("selected",function(t){var e=t.x,n=t.y;return r[0][0]<=e&&e<r[1][0]&&r[0][1]<=n&&n<r[1][1]})}).on("end",function(){l(n),null===(0,d.brushSelection)(this)?u?u=!1:e.select_none():(u=!0,n.call(h.move,null))});n.call(h),l(n)},a);function a(t,e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.brushSel=t.append("g").attr("id","brush-container");var i=this.brushSel.node(),o=t.select(r).node().nextSibling;i!==o&&i.parentNode.insertBefore(i,o),this.enabled=e,this.map=n}e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r,i=n(17),o=(r=i)&&r.__esModule?r:{default:r};var a=(s.prototype.setUpMapCallbacks=function(t){var n=this;t.callback_manager.set("edit_text_label.text_edit_input",function(t,e){n.show(t,e)}),t.callback_manager.set("new_text_label.text_edit_input",function(t){null!==n.activeTarget&&n._acceptChanges(n.activeTarget.target),n.hide(),n._addAndEdit(t)}),t.callback_manager.set("hide_text_label_editor.text_edit_input",function(){n.hide()})},s.prototype.setUpZoomCallbacks=function(t){var e=this;t.callbackManager.set("zoom.text_edit_input",function(){e.activeTarget&&e._acceptChanges(e.activeTarget.target),e.is_visible()&&e.hide()}),t.callbackManager.set("go_to.text_edit_input",function(){e.activeTarget&&e._acceptChanges(e.activeTarget.target),e.is_visible()&&e.hide()})},s.prototype.is_visible=function(){return this.placedDiv.is_visible()},s.prototype.show=function(t,e){var n=this;this.activeTarget&&this._acceptChanges(this.activeTarget.target),this.activeTarget={target:t,coords:e},t.each(function(t){n.input.node().value=t.text}),this.placedDiv.place(e),this.input.node().focus(),this.clearEscape=this.map.key_manager.addEscapeListener(function(){n._acceptChanges(t),n.hide()},!0),this.clearEnter=this.map.key_manager.addEnterListener(function(){n._acceptChanges(t),n.hide()},!0)},s.prototype.hide=function(){this.isNew=!1,this.placedDiv.hide(),this.input.attr("value",""),this.activeTarget=null,this.clearEscape&&this.clearEscape(),this.clearEscape=null,this.clearEnter&&this.clearEnter(),this.clearEnter=null},s.prototype._acceptChanges=function(t){var n=this,e=this.input.node().value;if(""===e)t.each(function(t){var e={};e[t.text_label_id]=n.map.text_labels[t.text_label_id],n.map.delete_selectable({},e,!0)});else{var r=[];t.each(function(t){n.map.edit_text_label(t.text_label_id,e,!0,n.isNew),r.push(t.text_label_id)})}},s.prototype._addAndEdit=function(t){this.isNew=!0;var e=this.map.new_text_label(t,""),n=this.map.sel.select("#text-labels").selectAll(".text-label").filter(function(t){return t.text_label_id===e});n.select("text").classed("edit-text-cursor",!0),this.show(n,t)},s);function s(t,e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=t.append("div").attr("id","text-edit-input");this.placedDiv=(0,o.default)(r,e),this.placedDiv.hide(),this.input=r.append("input"),this.map=e,this.setUpMapCallbacks(e),this.zoomContainer=n,this.setUpZoomCallbacks(n),this.isNew=!1}e.default=a},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5),o=r(n(49)),a=r(n(50)),s=r(n(59)),c=r(n(4));n(60);var l=r(n(30));function r(t){return t&&t.__esModule?t:{default:t}}var u,h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,u=i.Component),d.prototype.componentWillMount=function(){var t=this;this.props.settings.holdChanges(),this.setState({clearEscape:this.props.map.key_manager.addEscapeListener(function(){return t.abandonChanges()},!0),clearEnter:this.props.map.key_manager.addKeyListener(["enter"],function(){return t.saveChanges()},!0)})},d.prototype.componentWillUnmount=function(){this.state.clearEscape(),this.state.clearEnter()},d.prototype.abandonChanges=function(){this.props.settings.abandonChanges(),this.props.setDisplay(!1)},d.prototype.saveChanges=function(){this.props.settings.acceptChanges(),this.props.setDisplay(!1)},d.prototype.handleStyle=function(t,e){var n=this.props.settings.get(e),r=n.indexOf(t);-1===r?this.props.settings.set(e,[].concat(n,[t])):this.props.settings.set(e,[].concat(n.slice(0,r),n.slice(r+1)))},d.prototype.render=function(){var t=this,n=this.props.settings,r=n.get("enable_tooltips")||[],e=this.props.map.get_data_statistics();return(0,i.h)("div",{className:"settingsBackground"},(0,i.h)("div",{className:"settingsBoxContainer"},(0,i.h)("button",{className:"discardChanges btn",onClick:function(){return t.abandonChanges()}},(0,i.h)("i",{className:"icon-cancel","aria-hidden":"true"})),(0,i.h)("button",{className:"saveChanges btn",onClick:function(){return t.saveChanges()}},(0,i.h)("i",{className:"icon-ok","aria-hidden":"true"})),(0,i.h)("div",{className:"settingsBox"},(0,i.h)("div",{className:"settingsTip"},(0,i.h)("i",null,"Tip: Hover over an option to see more details about it.")),(0,i.h)("hr",null),(0,i.h)("div",{className:"title"},"View and build options"),(0,i.h)("div",{className:"settingsContainer"},(0,i.h)("table",{className:"radioSelection"},(0,i.h)("tr",{title:"The identifiers that are show in the reaction, gene, and metabolite labels on the map."},(0,i.h)("td",{className:"optionLabel"},"Identifiers:"),(0,i.h)("td",{className:"singleLine"},(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"identifiers",onClick:function(){n.set("identifiers_on_map","bigg_id")},checked:"bigg_id"===n.get("identifiers_on_map")}),"ID's"),(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"identifiers",onClick:function(){n.set("identifiers_on_map","name")},checked:"name"===n.get("identifiers_on_map")}),"Descriptive names")))),(0,i.h)("label",{title:"If checked, then the scroll wheel and trackpad will control zoom rather than pan."},(0,i.h)("input",{type:"checkbox",onClick:function(){"zoom"===n.get("scroll_behavior")?n.set("scroll_behavior","pan"):n.set("scroll_behavior","zoom")},checked:"zoom"===n.get("scroll_behavior")}),"Scroll to zoom (instead of scroll to pan)"),(0,i.h)("label",{title:"If checked, then only the primary metabolites will be displayed."},(0,i.h)("input",{type:"checkbox",onClick:function(){return n.set("hide_secondary_metabolites",!n.get("hide_secondary_metabolites"))},checked:n.get("hide_secondary_metabolites")}),"Hide secondary metabolites"),(0,i.h)("label",{title:"If checked, then gene reaction rules will be displayed below each reaction label. (Gene reaction rules are always shown when gene data is loaded.)"},(0,i.h)("input",{type:"checkbox",onClick:function(){return n.set("show_gene_reaction_rules",!n.get("show_gene_reaction_rules"))},checked:n.get("show_gene_reaction_rules")}),"Show gene reaction rules"),(0,i.h)("label",{title:"If checked, hide all reaction, gene, and metabolite labels"},(0,i.h)("input",{type:"checkbox",onClick:function(){return n.set("hide_all_labels",!n.get("hide_all_labels"))},checked:n.get("hide_all_labels")}),"Hide reaction, gene, and metabolite labels"),(0,i.h)("label",{title:"If checked, then allow duplicate reactions during model building."},(0,i.h)("input",{type:"checkbox",onClick:function(){return n.set("allow_building_duplicate_reactions",!n.get("allow_building_duplicate_reactions"))},checked:n.get("allow_building_duplicate_reactions")}),"Allow duplicate reactions"),(0,i.h)("label",{title:"If checked, then highlight in red all the reactions on the map that are not present in the loaded model."},(0,i.h)("input",{type:"checkbox",onClick:function(){n.set("highlight_missing",!n.get("highlight_missing"))},checked:n.get("highlight_missing")}),"Highlight reactions not in model"),(0,i.h)("label",{title:"If true, then use CSS3 3D transforms to speed up panning and zooming."},(0,i.h)("input",{type:"checkbox",onClick:function(){n.set("use_3d_transform",!n.get("use_3d_transform"))},checked:n.get("use_3d_transform")}),"Use 3D transform for responsive panning and zooming"),(0,i.h)("table",{style:{marginTop:"5px"}},(0,i.h)("tr",{title:"Determines over which elements tooltips will display for reactions, metabolites, and genes"},(0,i.h)("td",null,"Show tooltips over:"),(0,i.h)("td",{className:"singleLine"},(0,i.h)("label",{className:"tooltipOption",title:"If checked, tooltips will display over the gene, reaction, and metabolite labels"},(0,i.h)("input",{type:"checkbox",onClick:function(){var t=c.default.contains(r,"label")?c.default.filter(r,function(t){return"label"!==t}):[].concat(r,["label"]);n.set("enable_tooltips",t)},checked:c.default.contains(r,"label")}),"Labels"),(0,i.h)("label",{className:"tooltipOption",title:"If checked, tooltips will display over the reaction line segments and metabolite circles"},(0,i.h)("input",{type:"checkbox",onClick:function(){var e="object",t=c.default.contains(r,e)?c.default.filter(r,function(t){return t!==e}):[].concat(r,[e]);n.set("enable_tooltips",t)},checked:c.default.contains(r,"object")}),"Objects"))))),(0,i.h)("div",{className:"settingsTip",style:{marginTop:"16px"}},(0,i.h)("i",null,"Tip: To increase map performance, turn off text boxes (i.e. labels and gene reaction rules).")),(0,i.h)("hr",null),(0,i.h)("div",{className:"scaleTitle"},(0,i.h)("div",{className:"title"},"Reactions"),(0,i.h)(o.default,{disabled:null===e.reaction},Object.values(c.default.mapObject(l.default,function(t,e){return(0,i.h)(s.default,{name:e,scale:t,onClick:function(){n.set("reaction_scale_preset",e)}})})))),(0,i.h)(a.default,{scale:n.get("reaction_scale"),settings:n,type:"Reaction",stats:e.reaction,noDataColor:n.get("reaction_no_data_color"),noDataSize:n.get("reaction_no_data_size"),onChange:function(t){n.set("reaction_scale",t)},onNoDataColorChange:function(t){n.set("reaction_no_data_color",t)},onNoDataSizeChange:function(t){n.set("reaction_no_data_size",t)},abs:-1<n.get("reaction_styles").indexOf("abs")}),(0,i.h)("div",{className:"subheading"},"Reaction or Gene data"),(0,i.h)("table",{className:"radioSelection"},(0,i.h)("tr",null,(0,i.h)("td",{className:"optionLabel",title:"Options for reactions data"},"Options:"),(0,i.h)("td",null,(0,i.h)("label",{className:"optionGroup",title:"If checked, use the absolute value when calculating colors and sizes of reactions on the map"},(0,i.h)("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("abs","reaction_styles")},checked:c.default.contains(n.get("reaction_styles"),"abs"),disabled:null===e.reaction}),"Absolute value"),(0,i.h)("label",{className:"optionGroup",title:"If checked, then size the thickness of reaction lines according to the value of the reaction data"},(0,i.h)("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("size","reaction_styles")},checked:c.default.contains(n.get("reaction_styles"),"size"),disabled:null===e.reaction}),"Size"),(0,i.h)("label",{className:"optionGroup",title:"If checked, then color the reaction lines according to the value of the reaction data"},(0,i.h)("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("color","reaction_styles")},checked:c.default.contains(n.get("reaction_styles"),"color"),disabled:null===e.reaction}),"Color"),(0,i.h)("br",null),(0,i.h)("label",{className:"optionGroup",title:"If checked, then show data values in the reaction labels"},(0,i.h)("input",{type:"checkbox",name:"reactionStyle",onClick:function(){return t.handleStyle("text","reaction_styles")},checked:c.default.contains(n.get("reaction_styles"),"text"),disabled:null===e.reaction}),"Text (Show data in label)"))),(0,i.h)("tr",{title:"The function that will be used to compare datasets, when paired data is loaded"},(0,i.h)("td",{className:"optionLabel"},"Comparison:"),(0,i.h)("td",null,(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"reactionCompare",onClick:function(){return n.set("reaction_compare_style","fold")},checked:"fold"===n.get("reaction_compare_style"),disabled:null===e.reaction}),"Fold Change"),(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"reactionCompare",onClick:function(){return n.set("reaction_compare_style","log2_fold")},checked:"log2_fold"===n.get("reaction_compare_style"),disabled:null===e.reaction}),"Log2 (Fold Change)"),(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"reactionCompare",onClick:function(){return n.set("reaction_compare_style","diff")},checked:"diff"===n.get("reaction_compare_style"),disabled:null===e.reaction}),"Difference")))),(0,i.h)("table",{className:"radioSelection"},(0,i.h)("tr",{title:"The function that will be used to evaluate AND connections in gene reaction rules (AND connections generally connect components of an enzyme complex)"},(0,i.h)("td",{className:"optionLabelWide"},"Method for evaluating AND:"),(0,i.h)("td",null,(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"andMethod",onClick:function(){return n.set("and_method_in_gene_reaction_rule","mean")},checked:"mean"===n.get("and_method_in_gene_reaction_rule"),disabled:null===e.reaction}),"Mean"),(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"andMethod",onClick:function(){return n.set("and_method_in_gene_reaction_rule","min")},checked:"min"===n.get("and_method_in_gene_reaction_rule"),disabled:null===e.reaction}),"Min")))),(0,i.h)("hr",null),(0,i.h)("div",{className:"scaleTitle"},(0,i.h)("div",{className:"title"},"Metabolites"),(0,i.h)(o.default,{disabled:null===e.metabolite},Object.values(c.default.mapObject(l.default,function(t,e){return(0,i.h)(s.default,{name:e,scale:t,onClick:function(){return n.set("metabolite_scale",t)}})})))),(0,i.h)(a.default,{scale:n.get("metabolite_scale"),settings:n,type:"Metabolite",stats:e.metabolite,noDataColor:n.get("metabolite_no_data_color"),noDataSize:n.get("metabolite_no_data_size"),onChange:function(t){n.set("metabolite_scale",t)},onNoDataColorChange:function(t){n.set("metabolite_no_data_color",t)},onNoDataSizeChange:function(t){n.set("metabolite_no_data_size",t)},abs:c.default.contains(n.get("metabolite_styles"),"abs")}),(0,i.h)("div",{className:"subheading"},"Metabolite data"),(0,i.h)("table",{className:"radioSelection"},(0,i.h)("tr",null,(0,i.h)("td",{className:"optionLabel",title:"Options for metabolite data"},"Options:"),(0,i.h)("td",null,(0,i.h)("label",{className:"optionGroup",title:"If checked, use the absolute value when calculating colors and sizes of metabolites on the map"},(0,i.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("abs","metabolite_styles")},checked:c.default.contains(n.get("metabolite_styles"),"abs"),disabled:null===e.metabolite}),"Absolute value"),(0,i.h)("label",{className:"optionGroup",title:"If checked, then size the thickness of reaction lines according to the value of the metabolite data"},(0,i.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("size","metabolite_styles")},checked:c.default.contains(n.get("metabolite_styles"),"size"),disabled:null===e.metabolite}),"Size"),(0,i.h)("label",{className:"optionGroup",title:"If checked, then color the reaction lines according to the value of the metabolite data"},(0,i.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("color","metabolite_styles")},checked:c.default.contains(n.get("metabolite_styles"),"color"),disabled:null===e.metabolite}),"Color"),(0,i.h)("br",null),(0,i.h)("label",{className:"optionGroup",title:"If checked, then show data values in the metabolite labels"},(0,i.h)("input",{type:"checkbox",name:"metaboliteStyle",onClick:function(){return t.handleStyle("text","metabolite_styles")},checked:c.default.contains(n.get("metabolite_styles"),"text"),disabled:null===e.metabolite}),"Text (Show data in label)"))),(0,i.h)("tr",{title:"The function that will be used to compare datasets, when paired data is loaded"},(0,i.h)("td",{className:"optionLabel"},"Comparison:"),(0,i.h)("td",null,(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"metaboliteCompare",onClick:function(){return n.set("metabolite_compare_style","fold")},checked:"fold"===n.get("metabolite_compare_style"),disabled:null===e.metabolite}),"Fold Change"),(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"metaboliteCompare",onClick:function(){return n.set("metabolite_compare_style","log2_fold")},checked:"log2_fold"===n.get("metabolite_compare_style"),disabled:null===e.metabolite}),"Log2 (Fold Change)"),(0,i.h)("label",{className:"optionGroup"},(0,i.h)("input",{type:"radio",name:"metaboliteCompare",onClick:function(){return n.set("metabolite_compare_style","diff")},checked:"diff"===n.get("metabolite_compare_style"),disabled:null===e.metabolite}),"Difference")))))))},d);function d(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.apply(this,arguments))}e.default=h},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);var i,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=r.Component),a.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.handleClickOutside)},a.prototype.setWrapperRef=function(t){this.wrapperRef=t},a.prototype.handleClickOutside=function(t){this.wrapperRef&&!this.wrapperRef.contains(t.target)&&this.setState({visible:!1})},a.prototype.render=function(){var t=this;return(0,r.h)("div",{className:"selector"},(0,r.h)("div",{className:["selectorTitle",this.props.disabled?"disabled":""].join(" "),ref:this.setWrapperRef,onClick:function(){t.props.disabled||t.setState({visible:!t.state.visible})}},"Preset Scale Selections",(0,r.h)("i",{className:"icon-sort-down"})),(0,r.h)("div",{className:"selectorMenu",style:this.state.visible?{display:"block"}:{display:"none"}},this.props.children.map(function(t){return t})))},a);function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return e.setWrapperRef=e.setWrapperRef.bind(e),e.handleClickOutside=e.handleClickOutside.bind(e),e.state={visible:!1},e}e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var a=n(5),s=i(n(51)),d=i(n(55)),r=i(n(4));function i(t){return t&&t.__esModule?t:{default:t}}n(57);var o,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,o=a.Component),l.prototype.sortScale=function(){var e=this;return r.default.sortBy(this.props.scale,function(t){return"value"===t.type?t.value:e.props.stats[t.type]})},l.prototype.placePickers=function(){var e=this.props.stats,t=this.props.scale.reduce(function(t,e){var n=t[0],r=t[1];return"value"===e.type?[Math.min(e.value,n),Math.max(e.value,r)]:[n,r]},[e.min,e.max]),n=t[0],r=t[1];return{pickerLocations:this.props.scale.map(function(t){return(("value"===t.type?t.value:e[t.type])-n)/(r-n)}),absoluteMax:r,absoluteMin:n}},l.prototype.scaleChange=function(t,e,n){var r,i,o=null;if("type"===e&&"value"!==n)o=(0,d.default)(this.props.scale,((i={})[t]=((r={})[e]={$set:n},r.$unset=["value"],r),i)),this.props.onChange(o);else if("value"===e&&"value"!==this.props.scale[t].type){var a,s;o=(0,d.default)(this.props.scale,((s={})[t]=((a={})[e]={$set:n},a.type={$set:"value"},a),s)),this.props.onChange(o)}else if("value"===n){var c,l;o=(0,d.default)(this.props.scale,((l={})[t]=((c={})[e]={$set:n},c.$merge={value:this.props.stats[this.props.scale[t].type]},c),l)),this.props.onChange(o)}else if(!isNaN(parseFloat(n))||"#"===n[0]&&"color"===e){var u,h;o=(0,d.default)(this.props.scale,((h={})[t]=((u={})[e]={$set:n},u),h)),this.props.onChange(o)}},l.prototype.addColorStop=function(t){var e=(0,d.default)(this.props.scale,{$push:[{type:"value",value:t.layerX/t.target.clientWidth*this.props.stats.max+(1-t.layerX/t.target.clientWidth)*this.props.stats.min,color:"#9696ff",size:20}]});this.props.onChange(e)},l.prototype.makeGradient=function(n,r){var i=this,t=this.sortScale();return(t.length<2?[{type:"min",color:"#f1ecfa"},{type:"max",color:"#f1ecfa"}]:t).map(function(t){var e="value"===t.type?t.value:i.props.stats[t.type];return" "+t.color+" "+(e-n)/(r-n)*100+"%"}).toString()},l.prototype.removeColorStop=function(t){var e=(0,d.default)(this.props.scale,{$splice:[[[t],1]]});this.props.onChange(e)},l.prototype.render=function(){var r=this;if(!this.props.stats)return(0,a.h)("div",{className:"scaleEditor"},(0,a.h)("div",null,(0,a.h)("div",{className:"scaleTrack disabled",style:{width:400}},this.props.type," data not loaded",(0,a.h)(s.default,{location:0,trackWidth:400,disabled:!0}),(0,a.h)(s.default,{location:1,trackWidth:400,disabled:!0}))),(0,a.h)("div",{className:"scaleLabels"},(0,a.h)("label",null,"Value:"),(0,a.h)("label",null,"Color:"),(0,a.h)("label",null,"Size:")),(0,a.h)("div",{className:"noDataStyle"},(0,a.h)("label",{className:"styleHeader"},"Styles for reactions with no data"),(0,a.h)("br",null),(0,a.h)("label",null,"Color:"),(0,a.h)("input",{type:"text",className:"colorInput",disabled:!0}),(0,a.h)("input",{type:"color",className:"colorWheel",disabled:!0}),(0,a.h)("label",null,"Size:"),(0,a.h)("input",{type:"text",className:"sizeInput",disabled:!0})));var t=this.placePickers(),e=t.pickerLocations,i=t.absoluteMax,o=t.absoluteMin,n=this.props.scale.map(function(t,n){return"value"!==t.type?(0,a.h)(s.default,{trackWidth:400,type:t.type,location:e[n],onChange:function(t,e){return r.scaleChange(n,t,e)},focus:function(){return r.setState({focusedPicker:n})},remove:function(){return r.removeColorStop(n)},min:o,max:i,value:r.props.stats[t.type],color:t.color,size:t.size,zIndex:r.state.focusedPicker===n?"2":"0",showTrash:3<=r.props.scale.length}):null!=t.value?(0,a.h)(s.default,{trackWidth:400,type:t.type,location:e[n],onChange:function(t,e){return r.scaleChange(n,t,e)},focus:function(){return r.setState({focusedPicker:n})},remove:function(){return r.removeColorStop(n)},min:o,max:i,value:t.value,color:t.color,size:t.size,zIndex:r.state.focusedPicker===n?"2":"0",showTrash:3<=r.props.scale.length}):void 0});return(0,a.h)("div",{className:"scaleEditor"},(0,a.h)("div",null,(0,a.h)("i",{className:"settingsTip"},"To add a color stop to the scale, click the gradient"),(0,a.h)("div",{className:"scaleTrack",style:{width:400}},(0,a.h)("div",{className:"gradient",onClick:function(t){return r.addColorStop(t)},style:{background:"linear-gradient(to right,"+this.makeGradient(o,i)+")"}}),n)),(0,a.h)("div",{className:"scaleLabels"},(0,a.h)("label",null,"Value:"),(0,a.h)("label",null,"Color:"),(0,a.h)("label",null,"Size:")),(0,a.h)("div",{className:"noDataStyle"},(0,a.h)("label",{className:"styleHeader"},"Styles for reactions with no data"),(0,a.h)("br",null),(0,a.h)("label",null,"Color:"),(0,a.h)("input",{type:"text",className:"colorInput",value:this.props.noDataColor,onInput:function(t){return r.props.onNoDataColorChange(t.target.value)}}),(0,a.h)("input",{type:"color",className:"colorWheel",value:this.props.noDataColor,onInput:function(t){return r.props.onNoDataColorChange(t.target.value)}}),(0,a.h)("label",null,"Size:"),(0,a.h)("input",{type:"text",className:"sizeInput",value:this.props.noDataSize,onInput:function(t){return r.props.onNoDataSizeChange(parseFloat(t.target.value))}})))},l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}e.default=c},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5),i=n(0),o=n(7);n(52);var a,s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,a=r.Component),c.prototype.setUpDrag=function(){var n=this;if((0,i.select)(this.base).select(".pickerBox").on("mousedown.drag",null),!this.props.disabled){var t=(0,o.drag)().on("start",function(){n.props.focus&&n.props.focus()}).on("drag",function(){"value"!==n.props.type&&n.props.onChange&&n.props.onChange("type","value");var t=n.props.value+i.event.dx/n.props.trackWidth*(n.props.max-n.props.min),e=Math.max(n.props.min,Math.min(n.props.max,t));n.props.onChange("value",e)}).container(function(){return n.base.parentNode.parentNode});(0,i.select)(this.base).select(".pickerBox").call(t)}},c.prototype.componentDidUpdate=function(){this.setUpDrag()},c.prototype.componentDidMount=function(){this.setUpDrag()},c.prototype.render=function(){var n=this;return(0,r.h)("div",{className:"picker",style:{left:this.props.location*this.props.trackWidth+"px",zIndex:this.props.zIndex}},this.props.showTrash&&(0,r.h)("div",{className:"trashDiv"},(0,r.h)("i",{className:"icon-trash-empty","aria-hidden":"true",onClick:function(){n.props.remove&&n.props.remove()}})),(0,r.h)("div",{className:"pickerBox",onClick:function(){n.props.focus&&n.props.focus()}}),(0,r.h)("div",{className:["pickerOptions",.8<this.props.location?"rightOptions":""].join(" ")},(0,r.h)("input",{type:"text",className:"option",value:this.props.disabled?"":"value"===this.props.type?parseFloat(this.props.value.toFixed(2)):this.props.type+" ("+parseFloat(this.props.value.toFixed(2))+")",disabled:this.props.disabled,onInput:function(t){var e=parseFloat(t.target.value);isNaN(e)||n.props.onChange("value",e)},onFocus:function(t){t.target.select(),n.props.focus&&n.props.focus()}}),(0,r.h)("select",{className:"typePicker",value:this.props.type,onChange:function(t){n.props.onChange&&n.props.onChange("type",t.target.value)},disabled:this.props.disabled,onFocus:function(t){n.props.focus&&n.props.focus()}},(0,r.h)("option",{value:"value"},"Value"),(0,r.h)("option",{value:"min"},"Min"),(0,r.h)("option",{value:"mean"},"Mean"),(0,r.h)("option",{value:"Q1"},"Q1"),(0,r.h)("option",{value:"median"},"Median"),(0,r.h)("option",{value:"Q3"},"Q3"),(0,r.h)("option",{value:"max"},"Max")),(0,r.h)("div",{className:"colorOptions"},(0,r.h)("input",{type:"text",className:"colorText",onInput:function(t){n.props.onChange&&n.props.onChange("color",t.target.value)},onFocus:function(t){t.target.select(),n.props.focus&&n.props.focus()},value:this.props.color||"",disabled:this.props.disabled}),(0,r.h)("input",{type:"color",className:"colorWheel",onInput:function(t){n.props.onChange&&n.props.onChange("color",t.target.value)},onFocus:function(t){t.target.select(),n.props.focus&&n.props.focus()},value:this.props.color||"",disabled:this.props.disabled})),(0,r.h)("input",{type:"text",className:"option",onInput:function(t){n.props.onChange&&n.props.onChange("size",parseInt(t.target.value))},onFocus:function(t){t.target.select(),n.props.focus&&n.props.focus()},value:this.props.size,disabled:this.props.disabled})))},c);function c(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.apply(this,arguments))}e.default=s},function(t,e,n){var r=n(53);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".escher-container .picker {\n  top: 35px;\n  margin-left: -7px;\n  position: absolute;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .pickerBox {\n  position: absolute;\n  cursor: pointer;\n  background: rgba(0, 0, 0, 0.375);\n  width: 14px;\n  height: 35px;\n  top: -35px\n}\n\n.escher-container .scaleTrack .rightOptions {\n  position: absolute;\n  left: -76px;\n}\n\n.escher-container .pickerOptions {\n  box-shadow: 0 2px 14px #c5c5c5;\n  margin-top: 1px;\n  display: inline-flex;\n  flex-direction: column;\n  width: 90px;\n}\n\n.escher-container .pickerOptions * {\n  font-size: 12px;\n}\n\n.escher-container .pickerOptions .option {\n  padding: 3px 0px;\n}\n\n.escher-container .pickerOptions .typePicker {\n  width: 20px;\n  position: absolute;\n  left: 70px;\n  top: 1px;\n  right: 0px;\n  height: 14px;\n  background-color: rgb(232, 232, 232);\n}\n\n.escher-container .pickerOptions .colorOptions {\n  display: inline-flex;\n}\n\n.escher-container .colorOptions .colorText {\n  padding: 3px 0px;\n  width: 100%;\n}\n\n.escher-container .colorOptions .colorWheel {\n  padding: 0px;\n  position: absolute;\n  right: 0;\n  height: 24px;\n  width: 21px;\n  border: 1px solid black;\n}\n\n.escher-container .picker .trashDiv {\n  position: absolute;\n  top: -56px;\n  font-size: 17px;\n}\n\n.escher-container .picker .trashDiv * {\n  font-size: 17px;\n  cursor: pointer;\n}\n\n.escher-container .picker .icon-trash-empty {\n  margin: -5px;\n}\n\n.escher-container .scaleEditor :disabled {\n  background: #f1ecfa;\n}\n\n.escher-container .scaleEditor input[type=color]:disabled {\n  margin-top: 1px;\n}\n",""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var n,r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(r)?t:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(t,e,n){var l=n(56),u=Object.prototype.hasOwnProperty,i=Array.prototype.splice,r=Object.prototype.toString,h=function(t){return r.call(t).slice(8,-1)},o=Object.assign||function(e,n){return d(n).forEach(function(t){u.call(n,t)&&(e[t]=n[t])}),e},d="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function f(t){if(Array.isArray(t))return o(t.constructor(t.length),t);if("Map"===h(t))return new Map(t);if("Set"===h(t))return new Set(t);if(t&&"object"==typeof t){var e=Object.getPrototypeOf(t);return o(Object.create(e),t)}return t}function a(){var s=o({},p);return c.extend=function(t,e){s[t]=e},c.isEquals=function(t,e){return t===e},c;function c(i,o){"function"==typeof o&&(o={$apply:o}),Array.isArray(i)&&Array.isArray(o)||l(!Array.isArray(o),"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."),l("object"==typeof o&&null!==o,"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: %s.",Object.keys(s).join(", "));var a=i;return d(o).forEach(function(t){if(u.call(s,t)){var e=i===a;a=s[t](o[t],a,o,i),e&&c.isEquals(a,i)&&(a=i)}else{var n="Map"===h(i)?c(i.get(t),o[t]):c(i[t],o[t]),r="Map"===h(a)?a.get(t):a[t];c.isEquals(n,r)&&(void 0!==n||u.call(i,t))||(a===i&&(a=f(i)),"Map"===h(a)?a.set(t,n):a[t]=n)}}),a}}var p={$push:function(t,e,n){return c(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return c(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,n,r){return function(t,e){l(Array.isArray(t),"Expected $splice target to be an array; got %s",t),g(e.$splice)}(e,n),t.forEach(function(t){g(t),e===r&&t.length&&(e=f(r)),i.apply(e,t)}),e},$set:function(t,e,n){return function(t){l(1===Object.keys(t).length,"Cannot have more than one key in an object with $set")}(n),t},$toggle:function(t,e){A(t,"$toggle");var n=t.length?f(e):e;return t.forEach(function(t){n[t]=!e[t]}),n},$unset:function(t,e,n,r){return A(t,"$unset"),t.forEach(function(t){Object.hasOwnProperty.call(e,t)&&(e===r&&(e=f(r)),delete e[t])}),e},$add:function(t,r,e,i){return b(r,"$add"),A(t,"$add"),"Map"===h(r)?t.forEach(function(t){var e=t[0],n=t[1];r===i&&r.get(e)!==n&&(r=f(i)),r.set(e,n)}):t.forEach(function(t){r!==i||r.has(t)||(r=f(i)),r.add(t)}),r},$remove:function(t,e,n,r){return b(e,"$remove"),A(t,"$remove"),t.forEach(function(t){e===r&&e.has(t)&&(e=f(r)),e.delete(t)}),e},$merge:function(e,n,t,r){return function(t,e){l(e&&"object"==typeof e,"update(): $merge expects a spec of type 'object'; got %s",e),l(t&&"object"==typeof t,"update(): $merge expects a target of type 'object'; got %s",t)}(n,e),d(e).forEach(function(t){e[t]!==n[t]&&(n===r&&(n=f(r)),n[t]=e[t])}),n},$apply:function(t,e){return function(t){l("function"==typeof t,"update(): expected spec of $apply to be a function; got %s.",t)}(t),t(e)}},s=a();function c(t,e,n){l(Array.isArray(t),"update(): expected target of %s to be an array; got %s.",n,t),A(e[n],n)}function A(t,e){l(Array.isArray(t),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",e,t)}function g(t){l(Array.isArray(t),"update(): expected spec of $splice to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",t)}function b(t,e){var n=h(t);l("Map"===n||"Set"===n,"update(): %s expects a target of type Set or Map; got %s",e,n)}t.exports=s,t.exports.default=s,t.exports.newContext=a},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],u=0;(c=new Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(t,e,n){var r=n(58);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".escher-container .scaleEditor * {\n  font-size: 12px;\n  color: #777;\n  box-sizing: border-box;\n}\n\n.escher-container .scaleEditor {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.escher-container .scaleTrack {\n  position: relative;\n  display: flex;\n  height: 30px;\n  margin-bottom: 9px;\n  margin-top: 30px;\n  margin-left: 55px;\n  font-size: 15px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .scaleTrack.disabled {\n  background: #f1ecfa;\n  color: #b19ec0;\n  padding: 4px 0;\n  justify-content: center;\n}\n\n.escher-container .gradient {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n\n.escher-container .scaleLabels {\n  display: inline-flex;\n  flex-direction: column;\n  font-size: 12px;\n}\n\n.escher-container .scaleLabels label {\n  margin-bottom: 6px;\n}\n\n.escher-container .noDataStyle {\n  position: relative;\n  margin-top: 20px;\n}\n\n.escher-container .noDataStyle .styleHeader {\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.escher-container .noDataStyle label {\n  margin-right: 5px;\n}\n\n.escher-container .noDataStyle input[type=text] {\n  margin-right: 10px;\n  padding: 3px 0px;\n  width: 86px;\n}\n\n.escher-container .noDataStyle input[type=color] {\n  position: absolute;\n  padding: 0px;\n  border: 1px solid black;\n  left: 103px;\n  height: 24px;\n  width: 21px;\n}\n\n.escher-container .scaleEditor .icon-plus {\n  cursor: pointer;\n  position: absolute;\n  font-size: 14px;\n  right: 19px;\n}\n",""])},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);var i,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=r.Component),a.prototype.render=function(){var t=this;return(0,r.h)("div",{className:"scaleSelection",onClick:function(){return t.props.onClick()}},(0,r.h)("div",null,this.props.name),(0,r.h)("div",{className:"scaleColors"},this.state.colors.map(function(t){return(0,r.h)("i",{className:"icon-blank",style:{color:t}})})))},a);function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t)),n=[];if(t.scale)for(var r=0;r<t.scale.length;r++)n.push(t.scale[r].color);return e.state={colors:n},e}e.default=o},function(t,e,n){var r=n(61);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".escher-container .settingsBackground {\n  box-sizing: border-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 9;\n  background: rgba(0,0,0,.4);\n  padding: 5% 0 80px;\n  text-align: center;\n}\n\n.escher-container .scale-editor .domain-input {\n  color: #333;\n}\n\n.escher-container .settingsBoxContainer button {\n  position: absolute;\n  top: 5px;\n  right: 20px;\n  z-index: 10;\n  text-align: center;\n  vertical-align: middle;\n  font-weight: normal!important;\n  width: 34px;\n  height: 30px;\n  margin: 0;\n  padding: unset;\n  font-size: 14px!important;\n  border-radius: 3px;\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n.escher-container .settingsBoxContainer button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .settingsBoxContainer .discardChanges {\n  right: 60px;\n}\n\n.escher-container .settingsBoxContainer {\n  color: rgb(119, 119, 119);\n  display: inline-block;\n  position: relative;\n  width: 90%;\n  max-width: 520px;\n  height: 100%;\n  z-index: 10;\n}\n\n.escher-container .settingsBox {\n  font-size: 13px;\n  box-sizing: border-box;\n  display: inline-block;\n  max-height: 100%;\n  width: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  background: rgba(255, 255, 255, 0.953);\n  padding: 8px;\n  margin: 0;\n  border: 1px solid #ddd;\n  text-align: left;\n}\n\n.escher-container .settingsBox * {\n  box-sizing: border-box;\n}\n\n.escher-container .settingsBox .title {\n  font-size: 17px;\n  font-weight: 700;\n  color: #777777;\n}\n\n.escher-container .settingsBox .subheading {\n  font-size: 13px;\n  font-weight: 700;\n  margin-top: 15px;\n  color: #777777;\n}\n\n.escher-container .settingsBox table {\n  border-collapse: collapse;\n}\n\n.escher-container .settingsBox label {\n  display: inline;\n}\n\n.escher-container .settingsBox .radioSelection {\n  cursor: default;\n}\n\n.escher-container .radioSelection td {\n  padding: 3px 5px;\n}\n\n.escher-container .radioSelection input[type=radio] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .radioSelection .optionLabel {\n  width: 88px;\n}\n\n.escher-container .radioSelection .optionLabelWide {\n  width: 192px;\n}\n\n.escher-container .radioSelection .optionGroup {\n  margin-right: 10px\n}\n\n.escher-container .settingsBox .singleLine {\n  display: flex;\n}\n\n.escher-container .settingsContainer label {\n  display: block;\n  margin-bottom: 0;\n}\n\n.escher-container .settingsBoxContainer input[type=checkbox] {\n  margin: 0;\n  margin-top: 4px;\n  margin-right: 4px;\n}\n\n.escher-container .settingsTip {\n  font-size: 13px;\n}\n\n.escher-container .settingsBoxContainer hr {\n  margin: 18px 0;\n  border: 0;\n  border-top: 1px solid #dddddd;\n}\n\n.escher-container .scaleTitle {\n  margin-top: 15px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .selector {\n  position: relative;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  padding-top: 2px;\n}\n\n.escher-container .selectorTitle {\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  padding-left: 4px;\n  cursor: default;\n  width: 162px;\n}\n\n.escher-container .selectorTitle:hover:not(.disabled) {\n  border-color: black;\n}\n\n.escher-container .selectorTitle.disabled {\n  background-color: #f1ecfa;\n}\n\n.escher-container .selectorMenu {\n  position: absolute;\n  z-index: 4;\n  background-color: white;\n  border: 1px solid #a9a9a9;\n  min-width: 162px;\n}\n\n.escher-container .scaleSelection {\n  cursor: default;\n  padding: 0 6px;\n  display: flex;\n  justify-content: space-between;\n}\n\n.escher-container .scaleSelection:hover {\n  background-color: dodgerblue;\n  color: white;\n}\n\n.escher-container .settingsBox .icon-sort-down {\n  position: absolute;\n  top: 0;\n}\n\n.escher-container .settingsBox .tooltipOption {\n  margin-left: 10px;\n}\n",""])},function(t,e,n){"use strict";e.__esModule=!0;var o=n(5),a=r(n(63)),s=r(n(66));function r(t){return t&&t.__esModule?t:{default:t}}var i,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,i=o.Component),l.prototype.componentWillMount=function(){var t=this;this.props.sel.selectAll(".escher-zoom-container").on("touchend.menuBar",function(){return t.setState({dropdownVisible:!1})}).on("click.menuBar",function(){return t.setState({dropdownVisible:!1})})},l.prototype.componentWillUnmount=function(){this.props.sel.selectAll(".escher-zoom-container").on("touchend.menuBar",null).on("click.menuBar",null)},l.prototype.render=function(){var e=this,t=this.props.settings.get("enable_keys"),n=this.props.settings.get("disabled_buttons"),r=this.props.map.beziers_enabled,i=this.props.settings.get("full_screen_button");return(0,o.h)("ul",{className:"menu-bar"},(0,o.h)(a.default,{name:"Map",dropdownVisible:this.props.dropdownVisible},(0,o.h)(s.default,{name:"Save map JSON"+(t?" (Ctrl+S)":""),onClick:function(){return e.props.saveMap()},disabledButtons:n}),(0,o.h)(s.default,{name:"Load map JSON"+(t?" (Ctrl+O)":""),onClick:function(t){return e.props.loadMap(t)},assignKey:this.props.assignKeyLoadMap,type:"load",disabledButtons:n}),(0,o.h)(s.default,{name:"Export as SVG"+(t?" (Ctrl+Shift+S)":""),onClick:function(){return e.props.save_svg()},disabledButtons:n}),(0,o.h)(s.default,{name:"Export as PNG"+(t?" (Ctrl+Shift+P)":""),onClick:function(){return e.props.save_png()},disabledButtons:n}),(0,o.h)(s.default,{name:"Clear map",onClick:function(){return e.props.clear_map()},disabledButtons:n})),(0,o.h)(a.default,{name:"Model",dropdownVisible:this.props.dropdownVisible},(0,o.h)(s.default,{name:"Load COBRA model JSON"+(t?" (Ctrl+M)":""),onClick:function(t){return e.props.loadModel(t)},assignKey:this.props.assignKeyLoadModel,type:"load",disabledButtons:n}),(0,o.h)(s.default,{name:"Update names and gene reaction rules using model",onClick:function(){return e.props.updateRules()},disabledButtons:n}),(0,o.h)(s.default,{name:"Clear model",onClick:function(){return e.props.clearModel()},disabledButtons:n})),(0,o.h)(a.default,{name:"Data",dropdownVisible:this.props.dropdownVisible},(0,o.h)(s.default,{name:"Load reaction data",onClick:function(t){return e.props.setReactionData(t)},type:"load",disabledButtons:n}),(0,o.h)(s.default,{name:"Clear reaction data",onClick:function(){return e.props.clearReactionData()},disabledButtons:n}),(0,o.h)("li",{name:"divider"}),(0,o.h)(s.default,{name:"Load gene data",onClick:function(t){return e.props.setGeneData(t)},type:"load",disabledButtons:n}),(0,o.h)(s.default,{name:"Clear gene data",onClick:function(){return e.props.clearGeneData()},disabledButtons:n}),(0,o.h)("li",{name:"divider"}),(0,o.h)(s.default,{name:"Load metabolite data",onClick:function(t){return e.props.setMetaboliteData(t)},type:"load",disabledButtons:n}),(0,o.h)(s.default,{name:"Clear metabolite data",onClick:function(){return e.props.clearMetaboliteData()},disabledButtons:n})),(0,o.h)(a.default,{name:"Edit",rightMenu:"true",dropdownVisible:this.props.dropdownVisible,disabledEditing:!this.props.settings.get("enable_editing")},(0,o.h)(s.default,{name:"Pan mode"+(t?" (Z)":""),checkMark:"zoom"===this.props.mode,onClick:function(){return e.props.setMode("zoom")},disabledButtons:n}),(0,o.h)(s.default,{name:"Select mode"+(t?" (V)":""),checkMark:"brush"===this.props.mode,onClick:function(){return e.props.setMode("brush")},disabledButtons:n}),(0,o.h)(s.default,{name:"Add reaction mode"+(t?" (N)":""),checkMark:"build"===this.props.mode,onClick:function(){return e.props.setMode("build")},disabledButtons:n}),(0,o.h)(s.default,{name:"Rotate mode"+(t?" (R)":""),checkMark:"rotate"===this.props.mode,onClick:function(){return e.props.setMode("rotate")},disabledButtons:n}),(0,o.h)(s.default,{name:"Text mode"+(t?" (T)":""),checkMark:"text"===this.props.mode,onClick:function(){return e.props.setMode("text")},disabledButtons:n}),(0,o.h)("li",{name:"divider"}),(0,o.h)(s.default,{name:"Delete"+(t?" (Del)":""),onClick:function(){return e.props.deleteSelected()},disabledButtons:n}),(0,o.h)(s.default,{name:"Undo"+(t?" (Ctrl+Z)":""),onClick:function(){return e.props.undo()},disabledButtons:n}),(0,o.h)(s.default,{name:"Redo"+(t?" (Ctrl+Shift+Z)":""),onClick:function(){return e.props.redo()},disabledButtons:n}),(0,o.h)("li",{name:"divider"}),(0,o.h)(s.default,{name:"Align vertical"+(t?" (Alt+L)":""),onClick:this.props.align_vertical,disabledButtons:n}),(0,o.h)(s.default,{name:"Align horizontal"+(t?" (Shift+Alt+L)":""),onClick:this.props.align_horizontal,disabledButtons:n}),(0,o.h)(s.default,{name:"Toggle primary/secondary"+(t?" (P)":""),onClick:function(){return e.props.togglePrimary()},disabledButtons:n}),(0,o.h)(s.default,{name:"Rotate reactant locations"+(t?" (C)":""),onClick:function(){return e.props.cyclePrimary()},disabledButtons:n}),(0,o.h)("li",{name:"divider"}),(0,o.h)(s.default,{name:"Select all"+(t?" (Ctrl+A)":""),onClick:function(){return e.props.selectAll()},disabledButtons:n}),(0,o.h)(s.default,{name:"Select none"+(t?" (Ctrl+Shift+A)":""),onClick:function(){return e.props.selectNone()},disabledButtons:n}),(0,o.h)(s.default,{name:"Invert selection",onClick:function(){return e.props.invertSelection()},disabledButtons:n})),(0,o.h)(a.default,{name:"View",rightMenu:"true",dropdownVisible:this.props.dropdownVisible},(0,o.h)(s.default,{name:"Zoom in"+(t?" (+)":""),onClick:function(){return e.props.zoom_in()},disabledButtons:n}),(0,o.h)(s.default,{name:"Zoom out"+(t?" (-)":""),onClick:function(){return e.props.zoom_out()},disabledButtons:n}),(0,o.h)(s.default,{name:"Zoom to nodes"+(t?" (0)":""),onClick:function(){return e.props.zoomExtentNodes()},disabledButtons:n}),(0,o.h)(s.default,{name:"Zoom to canvas"+(t?" (1)":""),onClick:function(){return e.props.zoomExtentCanvas()},disabledButtons:n}),(0,o.h)(s.default,{name:"Find"+(t?" (F)":""),onClick:function(){return e.props.search()},disabledButtons:n}),(0,o.h)(s.default,{name:(r?"Hide":"Show")+" control points"+(t?" (B)":""),onClick:function(){return e.props.toggleBeziers()},disabledButtons:n}),(0,o.h)("li",{name:"divider"}),i&&(0,o.h)(s.default,{name:"Full screen",onClick:function(){return e.props.full_screen()},checkMark:this.props.isFullScreen,disabledButtons:n}),i&&(0,o.h)("li",{name:"divider"}),(0,o.h)(s.default,{name:"Settings"+(t?" (,)":""),onClick:function(){return e.props.renderSettingsMenu()},disabledButtons:n,type:"settings"})),(0,o.h)("a",{className:"helpButton",target:"#",href:"https://escher.readthedocs.org"},"?"))},l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.apply(this,arguments))}e.default=c},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);n(64);var i,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=r.Component),a.prototype.componentWillMount=function(){this.setState({visible:!1})},a.prototype.componentDidMount=function(){document.addEventListener("mouseup",this.handleClickOutside)},a.prototype.componentWillReceiveProps=function(t){this.setState({visible:t.visible})},a.prototype.setWrapperRef=function(t){this.wrapperRef=t},a.prototype.handleClickOutside=function(t){this.wrapperRef&&!this.wrapperRef.contains(t.target)&&this.setState({visible:!1})},a.prototype.render=function(){var t=this;return(0,r.h)("li",{className:"dropdown",style:this.props.disabledEditing?{display:"none"}:{display:"block"}},(0,r.h)("div",{className:"dropdownButton",tabindex:"0",ref:this.setWrapperRef,onClick:function(){return t.setState({visible:!t.state.visible})}},this.props.name,"",(0,r.h)("i",{className:"icon-sort-down"})),(0,r.h)("ul",{className:"menu",style:this.state.visible?{display:"block"}:{display:"none"},id:"true"===this.props.rightMenu?"rightMenu":""},this.props.children.map(function(t){return t&&"divider"===t.attributes.name?(0,r.h)("li",{style:{height:"1px",backgroundColor:"#e5e5e5",padding:"0",margin:"8px 0"}}):t})))},a);function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return e.state={visible:null},e.setWrapperRef=e.setWrapperRef.bind(e),e.handleClickOutside=e.handleClickOutside.bind(e),e}e.default=o},function(t,e,n){var r=n(65);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,'.escher-container .menu-bar {\n  box-sizing: border-box;\n  list-style-type: none;\n  padding: 0;\n  padding-right: 20px;\n  position: relative;\n  margin: 5px 0px;\n  background-color: white;\n  border: 1px solid #ddd;\n  display: inline-flex;\n  box-sizing: border-box;\n  width: 100%;\n  justify-content: space-between;\n}\n\n.escher-container .dropdown {\n  position: relative;\n  float: left;\n  box-sizing: border-box;\n  font-size: 12px;\n  border-radius: 3px;\n\n  /* these sometimes get overridden */\n  margin: 0 !important;\n  font-weight: normal !important;\n\n  text-align: center;\n  vertical-align: middle;\n  -ms-touch-action: none;\n  touch-action: none;\n  cursor: pointer;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton {\n  color: #d9230f!important;\n  border: 1px solid transparent;\n  padding: 6px 9px;\n}\n\n.escher-container .helpButton {\n  color: #d9230f!important;\n  padding: 0px 5px;\n  background-color: #f5f5f5!important;\n  border: 0!important;\n  text-decoration: unset;\n  height: fit-content;\n  position: absolute;\n  right: 0;\n  font-size: 12px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container .dropdownButton:focus, .escher-container .helpButton:focus {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .dropdownButton:hover, .escher-container .helpButton:hover {\n  color: #91170a!important;\n  text-decoration: underline;\n}\n\n.escher-container .menu-bar .icon-sort-down {\n  position: absolute;\n  font-size: 10px;\n  margin-left: -5px;\n}\n\n@media (min-width: 550px) {\n  .escher-container .menu-bar {\n    padding-right: 25px;\n  }\n\n  .escher-container .dropdown {\n    font-size: 18px;\n  }\n\n  .escher-container .dropdownButton {\n    padding: 6px 10px;\n    padding-right: 16px;\n  }\n\n  .escher-container .helpButton {\n    font-size: 16px;\n  }\n\n  .escher-container .menu-bar .icon-sort-down {\n    font-size: 14px;\n  }\n}\n\n.escher-container .menu {\n  box-sizing: border-box;\n  font-weight: normal!important;\n  word-spacing: 0;\n  position: absolute;\n  white-space: nowrap;\n  top: 103%;\n  left: -1%;\n  z-index: 1000;\n  display: block;\n  float: none;\n  min-width: 160px;\n  padding: 5px 0;\n  list-style: none;\n  font-size: 13px;\n  box-shadow: 0 6px 12px rgba(0,0,0,0.175);\n  background-clip: padding-box;\n  border: 1px solid #ddd;\n  background-color: rgba(255, 255, 255, 0.95);\n  border-radius: 0;\n  margin: 0;\n  text-align: left;\n}\n\n.escher-container #rightMenu {\n  left: auto;\n  right: -2%;\n}\n\n.escher-container .menu li:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menu li, .menu label {\n  font-size: 15px;\n  display: block;\n  color: #444444;\n\n  /* these sometimes get overridden */\n  font-weight: normal !important;\n  margin: 0 !important;\n}\n\n.escher-container .menu.ul.li {\n  background-color: rgba(255, 255, 255, 0.95);\n}\n\n.escher-container .menuButton {\n  box-sizing: border-box;\n  width: 100%;\n  padding: 5px 20px;\n  margin: 0;\n  cursor: pointer;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.escher-container label:focus, .menuButton:focus {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container .menuButton:hover {\n  background-color: #d9230f;\n  color: #FFFFFF;\n}\n\n.escher-container input[type="file"] {\n  display: none;\n}\n\n.escher-container #disabled {\n  color: #e0e0e0;\n}\n\n.escher-container #disabled:hover, #disabled:focus {\n  background-color: rgba(255, 255, 255, 0.95);\n  cursor: default;\n}\n',""])},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5),i=s(n(4)),o=s(n(3)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(12));function s(t){return t&&t.__esModule?t:{default:t}}var c,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,c=r.Component),u.prototype.handleFileInput=function(t){var n=this,e=t.files[0],r=new window.FileReader;r.onload=function(){o.default.load_json_or_csv(e,a.csv_converter,function(t,e){return n.props.onClick(e)})},void 0!==e&&r.readAsText(e),t.value=null},u.prototype.assignKeyForInput=function(t){this.props.assignKey&&this.props.assignKey(function(){return t.click()})},u.prototype.render=function(){var e=this,t=i.default.contains(this.props.disabledButtons,this.props.name.replace(/ \(.*\)$/,""));return"load"===this.props.type?(0,r.h)("label",{className:"menuButton",tabindex:t?"-1":"0",id:t?"disabled":""},(0,r.h)("input",{type:"file",onChange:function(t){return e.handleFileInput(t.target)},disabled:t,ref:this.assignKeyForInput}),this.props.name):this.props.checkMark?(0,r.h)("li",{className:"menuButton",tabindex:t?"-1":"0",onClick:this.props.onClick,id:t?"disabled":""},(0,r.h)("i",{className:"icon-ok","aria-hidden":"true"},""),this.props.name):(0,r.h)("li",{className:"menuButton",tabindex:t?"-1":"0",onClick:t?null:this.props.onClick,id:t?"disabled":""},this.props.name)},u);function u(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t));return e.assignKeyForInput=e.assignKeyForInput.bind(e),e}e.default=l},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);n(68);var i,o=n(4),a=(i=o)&&i.__esModule?i:{default:i};var s,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,s=r.Component),l.prototype.componentWillMount=function(){var t=this;this.setState({clearEscape:this.props.map.key_manager.addEscapeListener(function(){return t.close()},!0),clearNext:this.props.map.key_manager.addKeyListener(["enter","ctrl+g"],function(){return t.next()},!1),clearPrevious:this.props.map.key_manager.addKeyListener(["shift+enter","shift+ctrl+g"],function(){return t.previous()},!1)})},l.prototype.componentDidMount=function(){this.inputRef.focus()},l.prototype.componentWillUnmount=function(){this.state.clearEscape(),this.state.clearNext(),this.state.clearPrevious(),this.props.map.highlight(null)},l.prototype.handleInput=function(t){var e=this.dropDuplicates(this.props.map.search_index.find(t)),n="";if(null!==e&&t)if(0===e.length)n="0 / 0",this.props.map.highlight(null);else{this.state.current>=e.length&&this.setState({current:0}),n=this.state.current+1+"/"+e.length;var r=e[this.state.current];if("reaction"===r.type)this.props.map.zoom_to_reaction(r.reaction_id),this.props.map.highlight_reaction(r.reaction_id);else if("metabolite"===r.type)this.props.map.zoom_to_node(r.node_id),this.props.map.highlight_node(r.node_id);else{if("text_label"!==r.type)throw new Error("Bad search index data type: "+r.type);this.props.map.zoom_to_text_label(r.text_label_id),this.props.map.highlight_text_label(r.text_label_id)}}else this.props.map.highlight(null);this.setState({searchItem:t,current:0,counter:n,results:e})},l.prototype.dropDuplicates=function(t){var n={metabolite:{type:"m",key:"node_id"},reaction:{type:"r",key:"reaction_id"},text_label:{type:"t",key:"text_label_id"}};return a.default.uniq(t,function(t){var e=n[t.type];return""+e.type+t[e.key]})},l.prototype.next=function(){this.state.results&&0<this.state.results.length&&this.update((this.state.current+1)%this.state.results.length)},l.prototype.previous=function(){this.state.results&&0<this.state.results.length&&this.update((this.state.current+this.state.results.length-1)%this.state.results.length)},l.prototype.update=function(t){this.setState({current:t,counter:t+1+"/"+this.state.results.length});var e=this.state.results[t];if("reaction"===e.type)this.props.map.zoom_to_reaction(e.reaction_id),this.props.map.highlight_reaction(e.reaction_id);else if("metabolite"===e.type)this.props.map.zoom_to_node(e.node_id),this.props.map.highlight_node(e.node_id);else{if("text_label"!==e.type)throw new Error("Bad search index data type: "+e.type);this.props.map.zoom_to_text_label(e.text_label_id),this.props.map.highlight_text_label(e.text_label_id)}},l.prototype.close=function(){this.props.setDisplay(!1)},l.prototype.render=function(){var e=this;return(0,r.h)("div",{className:"search-container"},(0,r.h)("input",{className:"search-field",value:this.state.searchItem,onInput:function(t){return e.handleInput(t.target.value)},ref:function(t){e.inputRef=t}}),(0,r.h)("button",{className:"search-bar-button left btn",onClick:function(){return e.previous()}},(0,r.h)("i",{className:"icon-left-open"})),(0,r.h)("button",{className:"search-bar-button right btn",onClick:function(){return e.next()}},(0,r.h)("i",{className:"icon-right-open"})),(0,r.h)("div",{className:"search-counter"},this.state.counter),(0,r.h)("button",{className:"search-bar-button btn",onClick:function(){return e.close()}},(0,r.h)("i",{className:"icon-cancel"})))},l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t));return e.state={current:0,searchItem:t.searchItem,counter:""},e}e.default=c},function(t,e,n){var r=n(69);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".escher-container .search-container {\n  display: flex;\n  flex-direction: row;\n  background-color: rgba(255, 255, 255, 0.95);\n  padding: 3px;\n  border: 1px solid #DDD;\n}\n\n.escher-container .search-container .search-field {\n  flex: 0 0 auto;\n  color: #777;\n  border: 1px solid #DDD;\n  width: 114px;\n  height: 29px;\n  border-radius: 3px;\n  font-size: 13px;\n}\n\n.escher-container .search-container .search-counter {\n  flex: 1;\n  color: #777;\n  font-size: 13px;\n  padding: 9px 0 0 6px;\n}\n\n.escher-container .search-container .search-bar-button {\n  flex: 0 0 auto;\n  border-radius: 4px;\n  text-align: center;\n  vertical-align: middle;\n  font-size: 14px;\n  font-weight: 400;\n  height: 29px;\n  width: 34px;\n  margin: 3px;\n}\n\n.escher-container .search-container .search-bar-button.left {\n  border-top-right-radius: 0px;\n  border-bottom-right-radius: 0px;\n  margin-right: 0;\n}\n\n.escher-container .search-container .search-bar-button.right {\n  border-top-left-radius: 0px;\n  border-bottom-left-radius: 0px;\n  margin-left: 0;\n}\n\n.escher-container .search-container .search-bar-button:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n",""])},function(t,e,n){"use strict";e.__esModule=!0;var i=n(5);n(71);var r,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,r=i.Component),a.prototype.render=function(){var t=this,e=this.props.settings.get("menu"),n=this.props.settings.get("enable_keys"),r=this.props.settings.get("enable_editing");return(0,i.h)("ul",{className:"button-panel"},(0,i.h)("li",null,(0,i.h)("button",{className:"button btn",onClick:function(){return t.props.zoomContainer.zoom_in()},title:"Zoom in"+(n?" (+)":"")},(0,i.h)("i",{className:"icon-zoom-in"}))),(0,i.h)("li",null,(0,i.h)("button",{className:"button btn",onClick:function(){return t.props.zoomContainer.zoom_out()},title:"Zoom out"+(n?" (-)":"")},(0,i.h)("i",{className:"icon-zoom-out"}))),(0,i.h)("li",null,(0,i.h)("button",{className:"button btn",onClick:function(){return t.props.map.zoom_extent_canvas()},title:"Zoom to canvas"+(n?" (1)":"")},(0,i.h)("i",{className:"icon-resize-full"}))),(0,i.h)("li",{style:{display:!1!==this.props.settings.get("full_screen_button")?"block":"none"}},(0,i.h)("button",{className:"button btn "+(this.props.isFullScreen?"active-button":""),onClick:function(){return t.props.full_screen()},title:"Toggle full screen"},(0,i.h)("i",{className:"icon-resize-full-alt"}))),(0,i.h)("li",{className:"grouping",style:{display:"all"===e&&r?"block":"none"}},(0,i.h)("button",{className:"buttonGroup btn",title:"Pan mode"+(n?" (Z)":""),for:"zoom",id:"zoom"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("zoom")}},(0,i.h)("i",{className:"icon-move"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Select mode"+(n?" (V)":""),for:"brush",id:"brush"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("brush")}},(0,i.h)("i",{className:"icon-mouse-pointer"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Add reaction mode"+(n?" (N)":""),for:"build",onClick:function(){return t.props.setMode("build")},id:"build"===this.props.mode?"currentMode":null},(0,i.h)("i",{className:"icon-wrench"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Rotate mode"+(n?" (R)":""),for:"rotate",id:"rotate"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("rotate")}},(0,i.h)("i",{className:"icon-cw"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Text mode"+(n?" (T)":""),for:"text",id:"text"===this.props.mode?"currentMode":null,onClick:function(){return t.props.setMode("text")}},(0,i.h)("i",{className:"icon-font"}))),(0,i.h)("li",{className:"grouping",style:{display:"build"===this.props.mode&&"all"===e&&r?"block":"none"}},(0,i.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(n?" ()":""),onClick:function(){return t.props.buildInput.direction_arrow.left()}},(0,i.h)("i",{className:"icon-left-big"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(n?" ()":""),onClick:function(){return t.props.buildInput.direction_arrow.right()}},(0,i.h)("i",{className:"icon-right-big"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(n?" ()":""),onClick:function(){return t.props.buildInput.direction_arrow.up()}},(0,i.h)("i",{className:"icon-up-big"})),(0,i.h)("button",{className:"buttonGroup btn",title:"Direction arrow"+(n?" ()":""),onClick:function(){return t.props.buildInput.direction_arrow.down()}},(0,i.h)("i",{className:"icon-down-big"}))))},a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,r.apply(this,arguments))}e.default=o},function(t,e,n){var r=n(72);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".escher-container .button-panel {\n  position: absolute;\n  left: 4px;\n  top: 20%;\n  margin-top: -32px;\n  padding-left: 0;\n  touch-action: none;\n}\n\n.escher-container .button-panel>li {\n  margin-top: 5px;\n  display: block;\n\n  /* these sometimes get overridden */\n  margin-left: 0 !important;\n}\n\n.escher-container .grouping {\n  display: block;\n}\n\n.escher-container .buttonGroup {\n  display: block;\n  margin-bottom: -1px;\n  padding: 5px 0px;\n  border-radius: 0;\n}\n\n.escher-container .grouping>.buttonGroup:first-child {\n  border-top-left-radius: 4px;\n  border-top-right-radius: 4px;\n}\n\n.escher-container .grouping>.buttonGroup:last-child {\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n}\n\n.escher-container .button-panel>.grouping:last-child {\n  margin-top: 4px;\n}\n\n.escher-container #currentMode,\n.escher-container .active-button {\n  background-image: linear-gradient(#8F4F3F,#834c3c 6%,#8d3a2d) !important;\n}\n\n.escher-container .buttonGroup.btn {\n  margin-top: -1px;\n}\n\n.escher-container .button {\n  border-radius: 4px;\n}\n\n.escher-container .button.btn, .escher-container .buttonGroup.btn {\n  padding: unset;\n  color: white!important;\n  border: 1px solid #474949;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  text-align: center;\n  vertical-align: middle;\n  cursor: pointer;\n  font-size: 14px!important;\n  font-weight: 400;\n  width: 40px;\n  height: 40px;\n}\n\n.escher-container .button-panel .button:active, .escher-container .buttonGroup label:active, .escher-container .button-panel .buttonGroup:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n\n.escher-container .button-panel .fa {\n  font-size: 24px;\n}\n\n/* Icons */\n.escher-container .button-panel [class^='icon-'] {\n  font-size: 23px;\n}\n",""])},function(t,e,n){"use strict";e.__esModule=!0;var a=i(n(13)),r=i(n(17)),s=i(n(36)),d=i(n(4));function i(t){return t&&t.__esModule?t:{default:t}}var o=(c.prototype.disableTooltips=function(){this.settings.set("enable_tooltips",!1),this.hide(),this.map.set_status("Tooltips disabled. You can enable them again in the\n                         settings menu.",3e3)},c.prototype.passProps=function(t){var e=0<arguments.length&&void 0!==t?t:{};this.callbackManager.run("pass_props",null,e)},c.prototype.setUpMapCallbacks=function(i){var o=this;this.placedDiv=(0,r.default)(this.div,i,void 0,!1),i.callback_manager.set("show_tooltip.tooltip_container",function(t,e){var n=i.settings.get("enable_tooltips"),r=t.replace("reaction_","").replace("node_","").replace("gene_","");n&&n.includes(r)&&o.show(t,e)}),i.callback_manager.set("hide_tooltip.tooltip_container",function(){return o.hide()}),i.callback_manager.set("delay_hide_tooltip.tooltip_container",function(){return o.delayHide()}),i.sel.selectAll(".canvas-group").on("touchend",function(){return o.hide()})},c.prototype.setUpZoomCallbacks=function(t){t.callbackManager.set("zoom.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this)),t.callbackManager.set("go_to.tooltip_container",function(){this.is_visible()&&this.hide()}.bind(this))},c.prototype.is_visible=function(){return this.placedDiv.is_visible()},c.prototype.show=function(t,e){if(this.cancelHideTooltip(),!d.default.contains(["reaction_label","node_label","gene_label","reaction_object","node_object"],t))throw new Error("Tooltip not supported for object type "+t);var n=null!==this.tooltipRef&&this.tooltipRef.get_size?this.tooltipRef.get_size():{width:270,height:100};this.currentTooltip={type:t,id:e[t.replace("_label","_id").replace("_object","_id")]};var r=this.zoomContainer.windowTranslate,i=this.zoomContainer.windowScale,o=null!==this.map?this.map.get_size():{width:1e3,height:1e3},a={x:0,y:0},s="object"===t.replace("reaction_","").replace("node_","").replace("gene_","")?e.xPos:e.label_x,c="object"===t.replace("reaction_","").replace("node_","").replace("gene_","")?e.yPos:e.label_y,l=i*s+r.x+n.width,u=i*c+r.y+n.height;o.width<500?(l>o.width&&(a.x=-(l-o.width)/i),u>o.height-74&&(a.y=-(u-o.height+77)/i)):(i*s+r.x+.5*n.width>o.width?a.x=-n.width/i:l>o.width&&(a.x=-(l-o.width)/i),i*c+r.y+.5*n.height>o.height-45?a.y=-n.height/i:u>o.height-45&&(a.y=-(u-o.height+47)/i));var h={x:s+a.x,y:c+10+a.y};this.placedDiv.place(h),this.passProps({display:!0,biggId:e.bigg_id,name:e.name,loc:h,data:e.data_string,type:t.replace("_label","").replace("node","metabolite").replace("_object","")})},c.prototype.hide=function(){this.placedDiv.hide(),this.currentTooltip=null},c.prototype.delayHide=function(){var t=this;this.delayHideTimeout=setTimeout(function(){return t.hide()},100)},c.prototype.cancelHideTooltip=function(){null!==this.delayHideTimeout&&clearTimeout(this.delayHideTimeout)},c);function c(t,e,n,r,i){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.div=t.append("div").attr("id","tooltip-container"),this.tooltipRef=null,this.zoomContainer=n,this.setUpZoomCallbacks(n),this.callbackManager=new a.default,this.div.on("mouseover",this.cancelHideTooltip.bind(this)),this.div.on("mouseleave",this.hide.bind(this)),this.map=r,this.setUpMapCallbacks(r),this.settings=i,this.delay_hide_timeout=null,this.currentTooltip=null,(0,s.default)(e,null,function(t){return o.callbackManager.set("pass_props",t)},this.div.node(),function(t){o.tooltipRef=t}),this.passProps({display:!1,disableTooltips:function(){return o.disableTooltips()}})}e.default=o},function(t,e,n){"use strict";e.__esModule=!0;var r=n(5);n(75);var i=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(3));var o,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=r.Component),s.prototype.decompartmentalizeCheck=function(t,e){return"metabolite"===e?i.decompartmentalize(t)[0]:t},s.prototype.openBigg=function(){var t=this.props.type,e=this.props.biggId,n="http://bigg.ucsd.edu/",r="gene"===t?n+"search?query="+e:n+"universal/"+t+"s/"+this.decompartmentalizeCheck(e,t);window.open(r)},s.prototype.capitalizeFirstLetter=function(t){return"string"==typeof t?t.charAt(0).toUpperCase()+t.slice(1):console.warn("capitalizeFirstLetter was passed something other than a string")},s.prototype.render=function(){var t="Open "+this.decompartmentalizeCheck(this.props.biggId,this.props.type)+" in BiGG Models.";return(0,r.h)("div",{className:"default-tooltip"},(0,r.h)("div",{className:"id"},this.props.biggId),(0,r.h)("div",{className:"name"},"name: ",this.props.name),(0,r.h)("div",{className:"data"},"data: ",this.props.data&&"(nd)"!==this.props.data?this.props.data:"no data"),(0,r.h)("button",{onClick:this.openBigg},t),(0,r.h)("div",{className:"top-right"},(0,r.h)("div",{className:"type-label"},this.capitalizeFirstLetter(this.props.type)),(0,r.h)("a",{onClick:this.props.disableTooltips},"Disable Tooltips")))},s);function s(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return t.openBigg=t.openBigg.bind(t),t}e.default=a},function(t,e,n){var r=n(76);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,".escher-container .default-tooltip {\n  box-sizing: border-box;\n  min-width: 300px;\n  min-height: 100px;\n  border-radius: 2px;\n  border: 1px solid #b58787;\n  padding: 7px;\n  background-color: #fff;\n  text-align: left;\n  font-size: 16px;\n  font-family: sans-serif;\n  color: #111;\n  box-shadow: 4px 6px 20px 0px rgba(0, 0, 0, 0.4);\n}\n\n.escher-container .default-tooltip .id{\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.escher-container .default-tooltip button {\n  border-radius: 3px;\n  background-color: #eee;\n  border: 1px solid #ddd;\n  margin-top: 4px;\n  font-size: 16px;\n  padding: 3px 6px;\n}\n\n.escher-container .default-tooltip .top-right {\n  position: absolute;\n  top: 4px;\n  right: 4px;\n}\n\n.escher-container .default-tooltip .top-right * {\n  float: right;\n  text-align: right;\n}\n\n.escher-container .default-tooltip .top-right a {\n  font-size: 11px;\n  color: #999;\n  cursor: pointer;\n}\n.escher-container .default-tooltip .top-right a:hover {\n  color: #444;\n  text-decoration: underline;\n}\n\n.escher-container .default-tooltip .type-label {\n  font-size: 15px;\n  color: #d27066;\n  background-color: #ffeded;\n  border-radius: 2px;\n  margin: 0 0 0 10px;\n  padding: 0 5px;\n}\n",""])},function(t,e,n){var r=n(78);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){e=t.exports=n(9)(!1);var r=n(79),i=r(n(37)),o=r(n(37)+"#iefix"),a=r(n(80)),s=r(n(81)),c=r(n(82)),l=r(n(83)+"#fontello");e.push([t.i,"@font-face {\n  font-family: 'fontello';\n  src: url("+i+");\n  src: url("+o+") format('embedded-opentype'),\n       url("+a+") format('woff2'),\n       url("+s+") format('woff'),\n       url("+c+") format('truetype'),\n       url("+l+") format('svg');\n  font-weight: normal;\n  font-style: normal;\n}\n/* Chrome hack: SVG is rendered more smooth in Windozze. 100% magic, uncomment if you need it. */\n/* Note, that will break hinting! In other OS-es font will be not as sharp as it could be */\n/*\n@media screen and (-webkit-min-device-pixel-ratio:0) {\n  @font-face {\n    font-family: 'fontello';\n    src: url('../font/fontello.svg?9130959#fontello') format('svg');\n  }\n}\n*/\n \n [class^=\"icon-\"]:before, [class*=\" icon-\"]:before {\n  font-family: \"fontello\";\n  font-style: normal;\n  font-weight: normal;\n  speak: none;\n \n  display: inline-block;\n  text-decoration: inherit;\n  width: 1em;\n  margin-right: .2em;\n  text-align: center;\n  /* opacity: .8; */\n \n  /* For safety - reset parent styles, that can break glyph codes*/\n  font-variant: normal;\n  text-transform: none;\n \n  /* fix buttons height, for twitter bootstrap */\n  line-height: 1em;\n \n  /* Animation center compensation - margins should be symmetric */\n  /* remove if not needed */\n  margin-left: .2em;\n \n  /* you can be more comfortable with increased icons size */\n  /* font-size: 120%; */\n \n  /* Font smoothing. That was taken from TWBS */\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n \n  /* Uncomment for 3D effect */\n  /* text-shadow: 1px 1px 1px rgba(127, 127, 127, 0.3); */\n}\n \n.icon-ok:before { content: '\\e800'; } /* '' */\n.icon-cancel:before { content: '\\e801'; } /* '' */\n.icon-plus:before { content: '\\e802'; } /* '' */\n.icon-down-big:before { content: '\\e803'; } /* '' */\n.icon-left-big:before { content: '\\e804'; } /* '' */\n.icon-right-big:before { content: '\\e805'; } /* '' */\n.icon-up-big:before { content: '\\e806'; } /* '' */\n.icon-left-open:before { content: '\\e807'; } /* '' */\n.icon-right-open:before { content: '\\e808'; } /* '' */\n.icon-wrench:before { content: '\\e809'; } /* '' */\n.icon-resize-full:before { content: '\\e80a'; } /* '' */\n.icon-cw:before { content: '\\e80b'; } /* '' */\n.icon-trash-empty:before { content: '\\e80e'; } /* '' */\n.icon-font:before { content: '\\e80f'; } /* '' */\n.icon-zoom-in:before { content: '\\e810'; } /* '' */\n.icon-zoom-out:before { content: '\\e811'; } /* '' */\n.icon-move:before { content: '\\f047'; } /* '' */\n.icon-resize-full-alt:before { content: '\\f0b2'; } /* '' */\n.icon-blank:before { content: '\\f0c8'; } /* '' */\n.icon-sort-down:before { content: '\\f0dd'; } /* '' */\n.icon-mouse-pointer:before { content: '\\f245'; } /* '' */",""])},function(t,e,n){"use strict";t.exports=function(t,e){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)||e?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},function(t,e){t.exports="data:application/font-woff2;base64,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"},function(t,e){t.exports="data:application/font-woff;base64,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"},function(t,e){t.exports="data:application/octet-stream;base64,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"},function(t,e){t.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxtZXRhZGF0YT5Db3B5cmlnaHQgKEMpIDIwMTcgYnkgb3JpZ2luYWwgYXV0aG9ycyBAIGZvbnRlbGxvLmNvbTwvbWV0YWRhdGE+CjxkZWZzPgo8Zm9udCBpZD0iZm9udGVsbG8iIGhvcml6LWFkdi14PSIxMDAwIiA+Cjxmb250LWZhY2UgZm9udC1mYW1pbHk9ImZvbnRlbGxvIiBmb250LXdlaWdodD0iNDAwIiBmb250LXN0cmV0Y2g9Im5vcm1hbCIgdW5pdHMtcGVyLWVtPSIxMDAwIiBhc2NlbnQ9Ijg1MCIgZGVzY2VudD0iLTE1MCIgLz4KPG1pc3NpbmctZ2x5cGggaG9yaXotYWR2LXg9IjEwMDAiIC8+CjxnbHlwaCBnbHlwaC1uYW1lPSJvayIgdW5pY29kZT0iJiN4ZTgwMDsiIGQ9Ik05MzMgNTM0cTAtMjItMTYtMzhsLTQwNC00MDQtNzYtNzZxLTE2LTE1LTM4LTE1dC0zOCAxNWwtNzYgNzYtMjAyIDIwMnEtMTUgMTYtMTUgMzh0MTUgMzhsNzYgNzZxMTYgMTYgMzggMTZ0MzgtMTZsMTY0LTE2NSAzNjYgMzY3cTE2IDE2IDM4IDE2dDM4LTE2bDc2LTc2cTE2LTE1IDE2LTM4eiIgaG9yaXotYWR2LXg9IjEwMDAiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iY2FuY2VsIiB1bmljb2RlPSImI3hlODAxOyIgZD0iTTcyNCAxMTJxMC0yMi0xNS0zOGwtNzYtNzZxLTE2LTE1LTM4LTE1dC0zOCAxNWwtMTY0IDE2NS0xNjQtMTY1cS0xNi0xNS0zOC0xNXQtMzggMTVsLTc2IDc2cS0xNiAxNi0xNiAzOHQxNiAzOGwxNjQgMTY0LTE2NCAxNjRxLTE2IDE2LTE2IDM4dDE2IDM4bDc2IDc2cTE2IDE2IDM4IDE2dDM4LTE2bDE2NC0xNjQgMTY0IDE2NHExNiAxNiAzOCAxNnQzOC0xNmw3Ni03NnExNS0xNSAxNS0zOHQtMTUtMzhsLTE2NC0xNjQgMTY0LTE2NHExNS0xNSAxNS0zOHoiIGhvcml6LWFkdi14PSI3ODUuNyIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJwbHVzIiB1bmljb2RlPSImI3hlODAyOyIgZD0iTTc4NiA0Mzl2LTEwN3EwLTIyLTE2LTM4dC0zOC0xNWgtMjMydi0yMzNxMC0yMi0xNi0zN3QtMzgtMTZoLTEwN3EtMjIgMC0zOCAxNnQtMTUgMzd2MjMzaC0yMzJxLTIzIDAtMzggMTV0LTE2IDM4djEwN3EwIDIzIDE2IDM4dDM4IDE2aDIzMnYyMzJxMCAyMiAxNSAzOHQzOCAxNmgxMDdxMjMgMCAzOC0xNnQxNi0zOHYtMjMyaDIzMnEyMyAwIDM4LTE2dDE2LTM4eiIgaG9yaXotYWR2LXg9Ijc4NS43IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9ImRvd24tYmlnIiB1bmljb2RlPSImI3hlODAzOyIgZD0iTTg5OSAzODZxMC0zMC0yMS01MGwtMzYzLTM2NHEtMjItMjEtNTEtMjEtMjkgMC01MCAyMWwtMzYzIDM2NHEtMjEgMjAtMjEgNTAgMCAyOSAyMSA1MWw0MSA0MXEyMiAyMSA1MSAyMSAyOSAwIDUwLTIxbDE2NC0xNjR2MzkzcTAgMjkgMjEgNTB0NTEgMjJoNzFxMjkgMCA1MC0yMnQyMS01MHYtMzkzbDE2NSAxNjRxMjAgMjEgNTAgMjEgMjkgMCA1MS0yMWw0MS00MXEyMS0yMiAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJsZWZ0LWJpZyIgdW5pY29kZT0iJiN4ZTgwNDsiIGQ9Ik04NTcgMzUwdi03MXEwLTMwLTE4LTUxdC00Ny0yMWgtMzkzbDE2NC0xNjRxMjEtMjAgMjEtNTB0LTIxLTUwbC00Mi00M3EtMjEtMjAtNTEtMjAtMjkgMC01MCAyMGwtMzY0IDM2NHEtMjAgMjEtMjAgNTAgMCAyOSAyMCA1MWwzNjQgMzYzcTIxIDIxIDUwIDIxIDI5IDAgNTEtMjFsNDItNDFxMjEtMjIgMjEtNTF0LTIxLTUxbC0xNjQtMTY0aDM5M3EyOSAwIDQ3LTIwdDE4LTUxeiIgaG9yaXotYWR2LXg9Ijg1Ny4xIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9InJpZ2h0LWJpZyIgdW5pY29kZT0iJiN4ZTgwNTsiIGQ9Ik04MjEgMzE0cTAtMzAtMjAtNTBsLTM2My0zNjRxLTIyLTIwLTUxLTIwLTI5IDAtNTAgMjBsLTQyIDQycS0yMiAyMS0yMiA1MXQyMiA1MWwxNjMgMTYzaC0zOTNxLTI5IDAtNDcgMjF0LTE4IDUxdjcxcTAgMzAgMTggNTF0NDcgMjBoMzkzbC0xNjMgMTY1cS0yMiAyMC0yMiA1MHQyMiA1MGw0MiA0MnEyMSAyMSA1MCAyMSAyOSAwIDUxLTIxbDM2My0zNjNxMjAtMjAgMjAtNTF6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0idXAtYmlnIiB1bmljb2RlPSImI3hlODA2OyIgZD0iTTg5OSAzMDhxMC0yOC0yMS01MGwtNDEtNDJxLTIyLTIxLTUxLTIxLTMwIDAtNTAgMjFsLTE2NSAxNjR2LTM5M3EwLTI5LTIwLTQ3dC01MS0xOWgtNzFxLTMwIDAtNTEgMTl0LTIxIDQ3djM5M2wtMTY0LTE2NHEtMjAtMjEtNTAtMjF0LTUwIDIxbC00MiA0MnEtMjEgMjEtMjEgNTAgMCAzMCAyMSA1MWwzNjMgMzYzcTIwIDIxIDUwIDIxIDMwIDAgNTEtMjFsMzYzLTM2M3EyMS0yMiAyMS01MXoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJsZWZ0LW9wZW4iIHVuaWNvZGU9IiYjeGU4MDc7IiBkPSJNNjU0IDY4MmwtMjk3LTI5NiAyOTctMjk3cTEwLTEwIDEwLTI1dC0xMC0yNWwtOTMtOTNxLTExLTEwLTI1LTEwdC0yNSAxMGwtNDE0IDQxNXEtMTEgMTAtMTEgMjV0MTEgMjVsNDE0IDQxNHExMCAxMSAyNSAxMXQyNS0xMWw5My05M3ExMC0xMCAxMC0yNXQtMTAtMjV6IiBob3Jpei1hZHYteD0iNzE0LjMiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0icmlnaHQtb3BlbiIgdW5pY29kZT0iJiN4ZTgwODsiIGQ9Ik02MTggMzYxbC00MTQtNDE1cS0xMS0xMC0yNS0xMHQtMjUgMTBsLTkzIDkzcS0xMSAxMS0xMSAyNXQxMSAyNWwyOTYgMjk3LTI5NiAyOTZxLTExIDExLTExIDI1dDExIDI1bDkzIDkzcTEwIDExIDI1IDExdDI1LTExbDQxNC00MTRxMTAtMTEgMTAtMjV0LTEwLTI1eiIgaG9yaXotYWR2LXg9IjcxNC4zIiAvPgoKPGdseXBoIGdseXBoLW5hbWU9IndyZW5jaCIgdW5pY29kZT0iJiN4ZTgwOTsiIGQ9Ik0yMTQgMjlxMCAxNC0xMCAyNXQtMjUgMTAtMjUtMTAtMTEtMjUgMTEtMjUgMjUtMTEgMjUgMTEgMTAgMjV6IG0zNjAgMjM0bC0zODEtMzgxcS0yMS0yMC01MC0yMC0yOSAwLTUxIDIwbC01OSA2MXEtMjEgMjAtMjEgNTAgMCAyOSAyMSA1MWwzODAgMzgwcTIyLTU1IDY0LTk3dDk3LTY0eiBtMzU0IDI0M3EwLTIyLTEzLTU5LTI3LTc1LTkyLTEyMnQtMTQ0LTQ2cS0xMDQgMC0xNzcgNzN0LTczIDE3NyA3MyAxNzYgMTc3IDc0cTMyIDAgNjctMTB0NjAtMjZxOS02IDktMTV0LTktMTZsLTE2My05NHYtMTI1bDEwOC02MHEyIDIgNDQgMjd0NzUgNDUgNDAgMjBxOCAwIDEzLTV0NS0xNHoiIGhvcml6LWFkdi14PSI5MjguNiIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJyZXNpemUtZnVsbCIgdW5pY29kZT0iJiN4ZTgwYTsiIGQ9Ik00MjEgMjYxcTAtNy01LTEzbC0xODUtMTg1IDgwLTgxcTEwLTEwIDEwLTI1dC0xMC0yNS0yNS0xMWgtMjUwcS0xNSAwLTI1IDExdC0xMSAyNXYyNTBxMCAxNSAxMSAyNXQyNSAxMSAyNS0xMWw4MC04MCAxODYgMTg1cTUgNiAxMiA2dDEzLTZsNjQtNjNxNS02IDUtMTN6IG00MzYgNDgydi0yNTBxMC0xNS0xMC0yNXQtMjYtMTEtMjUgMTFsLTgwIDgwLTE4NS0xODVxLTYtNi0xMy02dC0xMyA2bC02NCA2NHEtNSA1LTUgMTJ0NSAxM2wxODYgMTg1LTgxIDgxcS0xMCAxMC0xMCAyNXQxMCAyNSAyNSAxMWgyNTBxMTUgMCAyNi0xMXQxMC0yNXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJjdyIgdW5pY29kZT0iJiN4ZTgwYjsiIGQ9Ik04NTcgNzA3di0yNTBxMC0xNC0xMC0yNXQtMjYtMTFoLTI1MHEtMjMgMC0zMiAyMy0xMCAyMiA3IDM4bDc3IDc3cS04MiA3Ny0xOTQgNzctNTggMC0xMTEtMjN0LTkxLTYxLTYxLTkxLTIzLTExMSAyMy0xMTEgNjEtOTEgOTEtNjEgMTExLTIzcTY2IDAgMTI1IDI5dDEwMCA4MnE0IDYgMTMgNyA4IDAgMTQtNWw3Ni03N3E1LTQgNi0xMXQtNS0xM3EtNjAtNzQtMTQ3LTExNHQtMTgyLTQxcS04NyAwLTE2NyAzNHQtMTM2IDkyLTkyIDEzNy0zNCAxNjYgMzQgMTY2IDkyIDEzNyAxMzYgOTIgMTY3IDM0cTgyIDAgMTU4LTMxdDEzNy04OGw3MiA3MnExNyAxOCAzOSA4IDIyLTkgMjItMzN6IiBob3Jpei1hZHYteD0iODU3LjEiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0idHJhc2gtZW1wdHkiIHVuaWNvZGU9IiYjeGU4MGU7IiBkPSJNMjg2IDQzOXYtMzIxcTAtOC01LTEzdC0xMy01aC0zNnEtOCAwLTEzIDV0LTUgMTN2MzIxcTAgOCA1IDEzdDEzIDVoMzZxOCAwIDEzLTV0NS0xM3ogbTE0MyAwdi0zMjFxMC04LTUtMTN0LTEzLTVoLTM2cS04IDAtMTMgNXQtNSAxM3YzMjFxMCA4IDUgMTN0MTMgNWgzNnE4IDAgMTMtNXQ1LTEzeiBtMTQyIDB2LTMyMXEwLTgtNS0xM3QtMTItNWgtMzZxLTggMC0xMyA1dC01IDEzdjMyMXEwIDggNSAxM3QxMyA1aDM2cTcgMCAxMi01dDUtMTN6IG03Mi00MDR2NTI5aC01MDB2LTUyOXEwLTEyIDQtMjJ0OC0xNSA2LTVoNDY0cTIgMCA2IDV0OCAxNSA0IDIyeiBtLTM3NSA2MDFoMjUwbC0yNyA2NXEtNCA1LTkgNmgtMTc3cS02LTEtMTAtNnogbTUxOC0xOHYtMzZxMC04LTUtMTN0LTEzLTVoLTU0di01MjlxMC00Ni0yNi04MHQtNjMtMzRoLTQ2NHEtMzcgMC02MyAzM3QtMjcgNzl2NTMxaC01M3EtOCAwLTEzIDV0LTUgMTN2MzZxMCA4IDUgMTN0MTMgNWgxNzJsMzkgOTNxOSAyMSAzMSAzNXQ0NCAxNWgxNzhxMjMgMCA0NC0xNXQzMC0zNWwzOS05M2gxNzNxOCAwIDEzLTV0NS0xM3oiIGhvcml6LWFkdi14PSI3ODUuNyIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJmb250IiB1bmljb2RlPSImI3hlODBmOyIgZD0iTTQwNSA1MzhsLTk1LTI1MXExOCAwIDc2LTF0ODktMXExMSAwIDMyIDEtNDggMTQxLTEwMiAyNTJ6IG0tNDA1LTYxN2wxIDQ0cTEzIDQgMzEgN3QzMiA2IDI4IDggMjUgMTcgMTcgMjhsMTMyIDM0NCAxNTYgNDA0aDcycTQtOCA2LTEybDExNC0yNjhxMTktNDMgNjAtMTQ0dDYzLTE1M3E5LTE5IDMzLTgwdDQwLTk0cTExLTI2IDE5LTMyIDExLTkgNDktMTd0NDctMTFxNC0yMiA0LTMyIDAtMy0xLTh0MC03cS0zNSAwLTEwNiA1dC0xMDcgNHEtNDIgMC0xMjAtNHQtOTktNHEwIDI0IDIgNDNsNzMgMTZxMSAwIDcgMXQ5IDIgOCAzIDkgNCA2IDQgNSA2IDEgOHEwIDktMTcgNTR0LTQwIDk5LTI0IDU2bC0yNTEgMXEtMTQtMzItNDMtMTA5dC0yOC05MXEwLTEyIDgtMjF0MjQtMTQgMjctNyAzMi01IDIzLTJxMS0xMSAxLTMyIDAtNS0xLTE2LTMzIDAtOTggNnQtOTcgNnEtNSAwLTE1LTN0LTEyLTJxLTQ1LTgtMTA1LTh6IiBob3Jpei1hZHYteD0iOTI4LjYiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0iem9vbS1pbiIgdW5pY29kZT0iJiN4ZTgxMDsiIGQ9Ik01NzEgNDA0di0zNnEwLTctNS0xM3QtMTItNWgtMTI1di0xMjVxMC03LTYtMTN0LTEyLTVoLTM2cS03IDAtMTMgNXQtNSAxM3YxMjVoLTEyNXEtNyAwLTEyIDV0LTYgMTN2MzZxMCA3IDYgMTJ0MTIgNWgxMjV2MTI1cTAgOCA1IDEzdDEzIDVoMzZxNyAwIDEyLTV0Ni0xM3YtMTI1aDEyNXE3IDAgMTItNXQ1LTEyeiBtNzItMThxMCAxMDMtNzMgMTc2dC0xNzcgNzQtMTc3LTc0LTczLTE3NiA3My0xNzcgMTc3LTczIDE3NyA3MyA3MyAxNzd6IG0yODYtNDY1cTAtMjktMjEtNTB0LTUxLTIxcS0zMCAwLTUwIDIxbC0xOTEgMTkxcS0xMDAtNjktMjIzLTY5LTgwIDAtMTUzIDMxdC0xMjUgODQtODQgMTI1LTMxIDE1MyAzMSAxNTIgODQgMTI2IDEyNSA4NCAxNTMgMzEgMTUzLTMxIDEyNS04NCA4NC0xMjYgMzEtMTUycTAtMTIzLTY5LTIyM2wxOTEtMTkxcTIxLTIxIDIxLTUxeiIgaG9yaXotYWR2LXg9IjkyOC42IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9Inpvb20tb3V0IiB1bmljb2RlPSImI3hlODExOyIgZD0iTTU3MSA0MDR2LTM2cTAtNy01LTEzdC0xMi01aC0zMjJxLTcgMC0xMiA1dC02IDEzdjM2cTAgNyA2IDEydDEyIDVoMzIycTcgMCAxMi01dDUtMTJ6IG03Mi0xOHEwIDEwMy03MyAxNzZ0LTE3NyA3NC0xNzctNzQtNzMtMTc2IDczLTE3NyAxNzctNzMgMTc3IDczIDczIDE3N3ogbTI4Ni00NjVxMC0yOS0yMS01MHQtNTEtMjFxLTMwIDAtNTAgMjFsLTE5MSAxOTFxLTEwMC02OS0yMjMtNjktODAgMC0xNTMgMzF0LTEyNSA4NC04NCAxMjUtMzEgMTUzIDMxIDE1MiA4NCAxMjYgMTI1IDg0IDE1MyAzMSAxNTMtMzEgMTI1LTg0IDg0LTEyNiAzMS0xNTJxMC0xMjMtNjktMjIzbDE5MS0xOTFxMjEtMjEgMjEtNTF6IiBob3Jpei1hZHYteD0iOTI4LjYiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0ibW92ZSIgdW5pY29kZT0iJiN4ZjA0NzsiIGQ9Ik0xMDAwIDM1MHEwLTE0LTExLTI1bC0xNDItMTQzcS0xMS0xMS0yNi0xMXQtMjUgMTEtMTAgMjV2NzJoLTIxNXYtMjE1aDcycTE0IDAgMjUtMTB0MTEtMjUtMTEtMjVsLTE0My0xNDNxLTEwLTExLTI1LTExdC0yNSAxMWwtMTQzIDE0M3EtMTEgMTAtMTEgMjV0MTEgMjUgMjUgMTBoNzJ2MjE1aC0yMTV2LTcycTAtMTQtMTAtMjV0LTI1LTExLTI1IDExbC0xNDMgMTQzcS0xMSAxMS0xMSAyNXQxMSAyNWwxNDMgMTQzcTEwIDExIDI1IDExdDI1LTExIDEwLTI1di03MmgyMTV2MjE1aC03MnEtMTQgMC0yNSAxMHQtMTEgMjUgMTEgMjZsMTQzIDE0MnExMSAxMSAyNSAxMXQyNS0xMWwxNDMtMTQycTExLTExIDExLTI2dC0xMS0yNS0yNS0xMGgtNzJ2LTIxNWgyMTV2NzJxMCAxNCAxMCAyNXQyNSAxMSAyNi0xMWwxNDItMTQzcTExLTEwIDExLTI1eiIgaG9yaXotYWR2LXg9IjEwMDAiIC8+Cgo8Z2x5cGggZ2x5cGgtbmFtZT0icmVzaXplLWZ1bGwtYWx0IiB1bmljb2RlPSImI3hmMGIyOyIgZD0iTTcxNiA1NDhsLTE5OC0xOTggMTk4LTE5OCA4MCA4MHExNyAxOCAzOSA4IDIyLTkgMjItMzN2LTI1MHEwLTE0LTEwLTI1dC0yNi0xMWgtMjUwcS0yMyAwLTMyIDIzLTEwIDIxIDcgMzhsODEgODEtMTk4IDE5OC0xOTgtMTk4IDgwLTgxcTE3LTE3IDgtMzgtMTAtMjMtMzMtMjNoLTI1MHEtMTUgMC0yNSAxMXQtMTEgMjV2MjUwcTAgMjQgMjIgMzMgMjIgMTAgMzktOGw4MC04MCAxOTggMTk4LTE5OCAxOTgtODAtODBxLTExLTExLTI1LTExLTcgMC0xNCAzLTIyIDktMjIgMzN2MjUwcTAgMTQgMTEgMjV0MjUgMTFoMjUwcTIzIDAgMzMtMjMgOS0yMS04LTM4bC04MC04MSAxOTgtMTk4IDE5OCAxOTgtODEgODFxLTE3IDE3LTcgMzggOSAyMyAzMiAyM2gyNTBxMTUgMCAyNi0xMXQxMC0yNXYtMjUwcTAtMjQtMjItMzMtNy0zLTE0LTMtMTQgMC0yNSAxMXoiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJibGFuayIgdW5pY29kZT0iJiN4ZjBjODsiIGQ9Ik04NTcgNjE4di01MzZxMC02Ni00Ny0xMTN0LTExNC00OGgtNTM1cS02NyAwLTExNCA0OHQtNDcgMTEzdjUzNnEwIDY2IDQ3IDExM3QxMTQgNDhoNTM1cTY3IDAgMTE0LTQ4dDQ3LTExM3oiIGhvcml6LWFkdi14PSI4NTcuMSIgLz4KCjxnbHlwaCBnbHlwaC1uYW1lPSJzb3J0LWRvd24iIHVuaWNvZGU9IiYjeGYwZGQ7IiBkPSJNNTcxIDI0M3EwLTE1LTEwLTI1bC0yNTAtMjUwcS0xMS0xMS0yNS0xMXQtMjUgMTFsLTI1MCAyNTBxLTExIDEwLTExIDI1dDExIDI1IDI1IDExaDUwMHExNCAwIDI1LTExdDEwLTI1eiIgaG9yaXotYWR2LXg9IjU3MS40IiAvPgoKPGdseXBoIGdseXBoLW5hbWU9Im1vdXNlLXBvaW50ZXIiIHVuaWNvZGU9IiYjeGYyNDU7IiBkPSJNNjMyIDI2OHExOC0xNyA4LTM4LTktMjMtMzMtMjNoLTIxM2wxMTItMjY2cTYtMTMgMC0yN3QtMTktMTlsLTk5LTQycS0xNC02LTI3IDB0LTE5IDE5bC0xMDcgMjUyLTE3NC0xNzRxLTExLTExLTI1LTExLTcgMC0xNCAzLTIyIDEwLTIyIDMzdjgzOXEwIDI0IDIyIDMzIDcgMyAxNCAzIDE1IDAgMjUtMTF6IiBob3Jpei1hZHYteD0iNzE0LjMiIC8+CjwvZm9udD4KPC9kZWZzPgo8L3N2Zz4="},function(t,e,n){var r=n(85);"string"==typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(10)(r,i);r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(9)(!1)).push([t.i,'/* Containers */\n\n/* The top level container for an Escher Builder */\n.escher-container {\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important;\n  background-color: #F3F3F3;\n  text-align: center;\n  position: relative;\n  font-size: 14px;\n  color: #333333;\n}\n\n/* Applied to the body when Escher fills the screen. This stops browser from\nshowing scroll-end animations. */\nhtml.fill-screen {\n  height: 100%;\n  width: 100%;\n}\nbody.fill-screen {\n  margin: 0;\n  position: relative;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n}\n\n/* Applied to top level container (generally .escher-container) when Escher\nfills the screen. These make sure Escher completely fills the screen, even after\nresizes. */\n.fill-screen-div {\n  margin: 0;\n  padding: 0;\n  position: fixed;\n  top: 0px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  width: 100% !important;\n  height: 100% !important;\n  z-index: 1000;\n}\n\n/* The zoom container classes. */\n.escher-container .escher-zoom-container,\n.escher-container .escher-3d-transform-container,\n.escher-container svg.escher-svg {\n  width: 100% !important;\n  height: 100% !important;\n  overflow: hidden;\n}\n\n/* SVG text should not be selectable */\n.escher-container svg text {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n/* Status */\n.escher-container #status {\n  position:absolute;\n  bottom:10px;\n  left: 20px;\n  color: red;\n  background-color: white;\n  font-size: 16px\n}\n\n/* Search & Menu */\n.escher-container .search-menu-container {\n  position: absolute;\n  width: 100%;\n  top: 0px;\n  left: 0px;\n  margin: 0;\n  text-align: center;\n  pointer-events: none;\n}\n.escher-container .search-menu-container-inline {\n  box-sizing: border-box;\n  width: 320px;\n  display: inline-block;\n  text-align: left;\n  pointer-events: auto;\n}\n@media (min-width: 550px) {\n  .escher-container .search-menu-container-inline {\n    width: 410px;\n  }\n}\n\n/* Reaction input */\n.escher-container #rxn-input {\n  z-index: 10;\n  width: 200px;\n}\n.escher-container .input-close-button {\n  position: absolute;\n  right: 0px;\n  width: 18px;\n  bottom: 0px;\n  padding: 0px;\n  border-width: 0px;\n  margin: 0px;\n  background: none;\n  font-size: 20px;\n  font-weight: normal;\n  top: -8px;\n}\n.escher-container .input-close-button:hover {\n  color: #ff3333;\n  font-weight: bold;\n}\n\n/* text edit input */\n.escher-container #text-edit-input input {\n  width: 500px;\n  border: 1px solid #cccccc;\n  font-size: 22px;\n}\n\n.escher-container #tooltip-container {\n  -ms-touch-action: none;\n  touch-action: none;\n}\n\n/* Buttons */\n.escher-container .btn {\n  color: white!important;\n  border: 1px solid #2E2F2F;\n  background-image: linear-gradient(#4F5151, #474949 6%, #3F4141);\n  background-color: white;\n  cursor: pointer;\n}\n\n.escher-container .btn:active {\n  background-image: linear-gradient(#3F4141, #474949 6%, #4F5151);\n}\n',""])},function(t,e,n){"use strict";n.r(e),e.default="svg.escher-svg #mouse-node {\n  fill: none;\n}\nsvg.escher-svg #canvas {\n  stroke: #ccc;\n  stroke-width: 7px;\n  fill: white;\n}\nsvg.escher-svg .resize-rect {\n  fill: black;\n  opacity: 0;\n  stroke: none;\n}\nsvg.escher-svg .label {\n  font-family: sans-serif;\n  font-style: italic;\n  font-weight: bold;\n  font-size: 8px;\n  fill: black;\n  stroke: none;\n  text-rendering: optimizelegibility;\n  cursor: default;\n}\nsvg.escher-svg .reaction-label {\n  font-size: 30px;\n  fill: rgb(32, 32, 120);\n  text-rendering: optimizelegibility;\n}\nsvg.escher-svg .node-label {\n  font-size: 20px;\n}\nsvg.escher-svg .gene-label {\n  font-size: 18px;\n  fill: rgb(32, 32, 120);\n  text-rendering: optimizelegibility;\n  cursor: default;\n}\nsvg.escher-svg .text-label .label {\n  font-size: 50px;\n}\nsvg.escher-svg .text-label-input {\n  font-size: 50px;\n}\nsvg.escher-svg .node-circle {\n  stroke-width: 2px;\n}\nsvg.escher-svg .midmarker-circle, svg.escher-svg .multimarker-circle {\n  fill: white;\n  fill-opacity: 0.2;\n  stroke: rgb(50, 50, 50);\n}\nsvg.escher-svg g.selected .node-circle{\n  stroke-width: 6px;\n  stroke: rgb(20, 113, 199);\n}\nsvg.escher-svg g.selected .label {\n  fill: rgb(20, 113, 199);\n}\nsvg.escher-svg .metabolite-circle {\n  stroke: rgb(162, 69, 16);\n  fill: rgb(224, 134, 91);\n}\nsvg.escher-svg g.selected .metabolite-circle {\n  stroke: rgb(5, 2, 0);\n}\nsvg.escher-svg .segment {\n  stroke: #334E75;\n  stroke-width: 10px;\n  fill: none;\n}\nsvg.escher-svg .arrowhead {\n  fill: #334E75;\n}\nsvg.escher-svg .stoichiometry-label-rect {\n  fill: white;\n  opacity: 0.5;\n}\nsvg.escher-svg .stoichiometry-label {\n  fill: #334E75;\n  font-size: 17px;\n}\nsvg.escher-svg .membrane {\n  fill: none;\n  stroke: rgb(255, 187, 0);\n}\nsvg.escher-svg .brush .extent {\n  fill-opacity: 0.1;\n  fill: black;\n  stroke: #fff;\n  shape-rendering: crispEdges;\n}\nsvg.escher-svg #brush-container .background {\n  fill: none;\n}\nsvg.escher-svg .bezier-circle {\n  fill: rgb(255,255,255);\n}\nsvg.escher-svg .bezier-circle.b1 {\n  stroke: red;\n}\nsvg.escher-svg .bezier-circle.b2 {\n  stroke: blue;\n}\nsvg.escher-svg .connect-line{\n  stroke: rgb(200,200,200);\n}\nsvg.escher-svg .direction-arrow {\n  cursor: default;\n  stroke: black;\n  stroke-width: 1px;\n  fill: white;\n  opacity: 0.3;\n}\nsvg.escher-svg .start-reaction-target {\n  stroke: rgb(100,100,100);\n  fill: none;\n  opacity: 0.5;\n}\nsvg.escher-svg .rotation-center-line {\n  stroke: red;\n  stroke-width: 5px;\n}\nsvg.escher-svg .highlight {\n  fill: #D97000;\n  text-decoration: underline;\n}\nsvg.escher-svg .node-to-combine {\n  stroke-width: 12px !important;\n}\n"},function(t,e,n){"use strict";var o=n(3),c=n(16).json;t.exports=function(t){var i=o.set_options(t,{selection:null,getdatafiles:null,datafiles:null,update_callback:null,target:null});if(null===i.selection)throw new Error("No selection provided for DataMenu");var e=i.selection.select(".data-menu");e.empty()&&(e=i.selection.append("div").attr("class","data-menu"));var n=e.append("form").append("select").attr("class","dropdown-menu");return i.getdatafiles?(i.datafiles&&console.warn("DataMenu: getdatafiles option overrides datafiles"),c(i.getdatafiles,function(t,e){return t?console.warn(t):(r(i.target,e.data,n,i.update_callback,i.selection),null)})):i.datafiles?r(i.target,i.datafiles,n,i.update_callback,i.selection):console.warn("DataMenu: No datafiles given"),{update:s};function r(t,e,n,r,i){n.node().addEventListener("change",function(){a(t,this.value,i,r)},!1);var o=e[0];s(e,n),a(t,o,i,r)}function a(t,e,n,r){o.load_the_file(t,e,function(t,e){if(t)return console.warn(t);i.data=e,r&&r(e)})}function s(t,e){e.selectAll(".menu-option").data(t).enter().append("option").attr("value",function(t){return t}).text(function(t){return t}),e.node().focus()}}},function(t,e,n){"use strict";e.__esModule=!0,e.EscherMapModel=e.EscherMapView=void 0;var r=i(n(20)),o=n(0),a=i(n(4));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.EscherMapView=null,e.EscherMapModel=null;var u,h,d=void 0;try{d=n(89)}catch(t){}if(d){var f="1.7.0-beta.19",p=["menu","scroll_behavior","use_3d_transform","enable_editing","enable_keys","full_screen_button","reaction_data","metabolite_data","gene_data"],A={reaction_data:"set_reaction_data",metabolite_data:"set_metabolite_data",gene_data:"set_gene_data"},g=(l(y,h=d.DOMWidgetView),y.prototype.render=function(){var i=this;if(!d)throw Error("@jupyter-widgets/base not installed. You must install it to use the jupyter widget");var t=(0,o.select)(this.el).append("div");this.setHeight(t),a.default.defer(function(){i.builder=new r.default(i.getMapData(),i.getModelData(),i.model.get("embedded_css"),t,{first_load_callback:function(r){r.callback_manager.set("clear_map",function(){i.model.set("_loaded_map_json",null),i.model.save_changes()}),r.callback_manager.set("clear_model",function(){i.model.set("_loaded_model_json",null),i.model.save_changes()}),i.model.on("change:height",function(){i.setHeight(t)}),i.model.on("change:_loaded_map_json",function(){r.load_map(i.getMapData())}),i.model.on("change:_loaded_model_json",function(){r.load_model(i.getModelData())}),a.default.mapObject(r.settings.acceptedStreams,function(t,e){if(i.model.keys().includes(e)){var n=i.model.get(e);null!==n?e in A?r[A[e]](n):r.settings.set(e,n):(i.model.set(e,r.settings.get(e)),i.model.save_changes()),i.model.on("change:"+e,function(){var t=i.model.get(e);a.default.isEqual(t,r.settings.get(e))||(e in A?r[A[e]](t):r.settings.set(e,t),p.includes(e)||r.map.draw_everything())})}t.onValue(function(t){a.default.isEqual(t,i.model.get(e))||(i.model.set(e,t),i.model.save_changes())})})}})})},y.prototype.setHeight=function(t){t.style("height",this.model.get("height")+"px")},y.prototype.getMapData=function(){var t=this.model.get("_loaded_map_json");return t?JSON.parse(t):null},y.prototype.getModelData=function(){var t=this.model.get("_loaded_model_json");return t?JSON.parse(t):null},y),b=(l(m,u=d.DOMWidgetModel),m.prototype.defaults=function(){return a.default.extend(u.prototype.defaults.call(this),{_model_name:"EscherMapModel",_view_name:"EscherMapView",_model_module:"escher",_view_module:"escher",_model_module_version:f,_view_module_version:f})},m);e.EscherMapView=g,e.EscherMapModel=b}function m(){return s(this,m),c(this,u.apply(this,arguments))}function y(){return s(this,y),c(this,h.apply(this,arguments))}},function(t,e){if(void 0===r){var n=new Error("Cannot find module '@jupyter-widgets/base'");throw n.code="MODULE_NOT_FOUND",n}t.exports=r},function(t,e,n){"use strict";n.r(e);var s=function(t,e){return t<e?-1:e<t?1:e<=t?0:NaN},M=function(o){return 1===o.length&&(o=function(n){return function(t,e){return s(n(t),e)}}(o)),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;o(t[i],e)<0?n=1+i:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;0<o(t[i],e)?r=i:n=1+i}return n}}};var r=M(s),i=r.right,c=(r.left,i);function l(t){return null===t?NaN:+t}var o=Array.prototype,p=(o.slice,o.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}),a=Math.sqrt(50),u=Math.sqrt(10),h=Math.sqrt(2),g=function(t,e,n){var r,i,o,a,s=-1;if(n=+n,(t=+t)===(e=+e)&&0<n)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(a=d(t,e,n))||!isFinite(a))return[];if(0<a)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;return r&&o.reverse(),o};function d(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return 0<=i?(a<=o?10:u<=o?5:h<=o?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a<=o?10:u<=o?5:h<=o?2:1)}function C(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return a<=o?i*=10:u<=o?i*=5:h<=o&&(i*=2),e<t?-i:i}var f=function(t,e,n){if(null==n&&(n=l),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(1<=e)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}};var A=n(15),b=Array.prototype,E=b.map,m=b.slice,y={name:"implicit"};function _(r){var o=Object(A.a)(),a=[],i=y;function s(t){var e=t+"",n=o.get(e);if(!n){if(i!==y)return i;o.set(e,n=a.push(t))}return r[(n-1)%r.length]}return r=null==r?[]:m.call(r),s.domain=function(t){if(!arguments.length)return a.slice();a=[],o=Object(A.a)();for(var e,n,r=-1,i=t.length;++r<i;)o.has(n=(e=t[r])+"")||o.set(n,a.push(e));return s},s.range=function(t){return arguments.length?(r=m.call(t),s):r.slice()},s.unknown=function(t){return arguments.length?(i=t,s):i},s.copy=function(){return _().domain(a).range(r).unknown(i)},s}function v(){var o,a,t=_().unknown(void 0),s=t.domain,c=t.range,l=[0,1],u=!1,h=0,d=0,f=.5;function e(){var t=s().length,e=l[1]<l[0],n=l[e-0],r=l[1-e];o=(r-n)/Math.max(1,t-h+2*d),u&&(o=Math.floor(o)),n+=(r-n-o*(t-h))*f,a=o*(1-h),u&&(n=Math.round(n),a=Math.round(a));var i=p(t).map(function(t){return n+o*t});return c(e?i.reverse():i)}return delete t.unknown,t.domain=function(t){return arguments.length?(s(t),e()):s()},t.range=function(t){return arguments.length?(l=[+t[0],+t[1]],e()):l.slice()},t.rangeRound=function(t){return l=[+t[0],+t[1]],u=!0,e()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(t){return arguments.length?(u=!!t,e()):u},t.padding=function(t){return arguments.length?(h=d=Math.max(0,Math.min(1,t)),e()):h},t.paddingInner=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),e()):h},t.paddingOuter=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},t.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),e()):f},t.copy=function(){return v().domain(s()).range(l).round(u).paddingInner(h).paddingOuter(d).align(f)},e()}function w(){return function t(e){var n=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(n())},e}(v().paddingInner(1))}var B=n(2),x=function(t){return function(){return t}},I=function(t){return+t},k=[0,1];function D(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:x(n)}function T(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return a=o<i?(i=n(o,i),r(s,a)):(i=n(i,o),r(a,s)),function(t){return a(i(t))}}function N(n,t,e,r){var i=Math.min(n.length,t.length)-1,o=new Array(i),a=new Array(i),s=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++s<i;)o[s]=e(n[s],n[s+1]),a[s]=r(t[s],t[s+1]);return function(t){var e=c(n,t,1,i)-1;return a[e](o[e](t))}}function S(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Q(e,n){var r,i,o,a=k,s=k,c=B.a,l=!1;function u(){return r=2<Math.min(a.length,s.length)?N:T,i=o=null,t}function t(t){return(i=i||r(a,s,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:n<=t?1:r(t)}}}(e):e,c))(+t)}return t.invert=function(t){return(o=o||r(s,a,D,l?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:1<=t?n:r(t)}}}(n):n))(+t)},t.domain=function(t){return arguments.length?(a=E.call(t,I),u()):a.slice()},t.range=function(t){return arguments.length?(s=m.call(t),u()):s.slice()},t.rangeRound=function(t){return s=m.call(t),c=B.e,u()},t.clamp=function(t){return arguments.length?(l=!!t,u()):l},t.interpolate=function(t){return arguments.length?(c=t,u()):c},u()}var L=n(6),z=function(t,e,n){var r,i=t[0],o=t[t.length-1],a=C(i,o,null==e?10:e);switch((n=Object(L.formatSpecifier)(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(i),Math.abs(o));return null!=n.precision||isNaN(r=Object(L.precisionPrefix)(a,s))||(n.precision=r),Object(L.formatPrefix)(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=Object(L.precisionRound)(a,Math.max(Math.abs(i),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=Object(L.precisionFixed)(a))||(n.precision=r-2*("%"===n.type))}return Object(L.format)(n)};function j(s){var c=s.domain;return s.ticks=function(t){var e=c();return g(e[0],e[e.length-1],null==t?10:t)},s.tickFormat=function(t,e){return z(c(),t,e)},s.nice=function(t){null==t&&(t=10);var e,n=c(),r=0,i=n.length-1,o=n[r],a=n[i];return a<o&&(e=o,o=a,a=e,e=r,r=i,i=e),0<(e=d(o,a,t))?e=d(o=Math.floor(o/e)*e,a=Math.ceil(a/e)*e,t):e<0&&(e=d(o=Math.ceil(o*e)/e,a=Math.floor(a*e)/e,t)),0<e?(n[r]=Math.floor(o/e)*e,n[i]=Math.ceil(a/e)*e,c(n)):e<0&&(n[r]=Math.ceil(o*e)/e,n[i]=Math.floor(a*e)/e,c(n)),s},s}function F(){var t=Q(D,B.c);return t.copy=function(){return S(t,F())},j(t)}function O(){var e=[0,1];function n(t){return+t}return(n.invert=n).domain=n.range=function(t){return arguments.length?(e=E.call(t,I),n):e.slice()},n.copy=function(){return O().domain(e)},j(n)}var U=function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t};function Y(e,n){return(n=Math.log(n/e))?function(t){return Math.log(t/e)/n}:x(n)}function W(e,n){return e<0?function(t){return-Math.pow(-n,t)*Math.pow(-e,1-t)}:function(t){return Math.pow(n,t)*Math.pow(e,1-t)}}function G(t){return isFinite(t)?+("1e"+t):t<0?0:t}function R(e){return 10===e?G:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function P(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function H(e){return function(t){return-e(-t)}}function V(){var e=Q(Y,W).domain([1,10]),d=e.domain,f=10,p=P(10),A=R(10);function n(){return p=P(f),A=R(f),d()[0]<0&&(p=H(p),A=H(A)),e}return e.base=function(t){return arguments.length?(f=+t,n()):f},e.domain=function(t){return arguments.length?(d(t),n()):d()},e.ticks=function(t){var e,n=d(),r=n[0],i=n[n.length-1];(e=i<r)&&(c=r,r=i,i=c);var o,a,s,c=p(r),l=p(i),u=null==t?10:+t,h=[];if(!(f%1)&&l-c<u){if(c=Math.round(c)-1,l=Math.round(l)+1,0<r){for(;c<l;++c)for(a=1,o=A(c);a<f;++a)if(!((s=o*a)<r)){if(i<s)break;h.push(s)}}else for(;c<l;++c)for(a=f-1,o=A(c);1<=a;--a)if(!((s=o*a)<r)){if(i<s)break;h.push(s)}}else h=g(c,l,Math.min(l-c,u)).map(A);return e?h.reverse():h},e.tickFormat=function(t,n){if(null==n&&(n=10===f?".0e":","),"function"!=typeof n&&(n=Object(L.format)(n)),t===1/0)return n;null==t&&(t=10);var r=Math.max(1,f*t/e.ticks().length);return function(t){var e=t/A(Math.round(p(t)));return e*f<f-.5&&(e*=f),e<=r?n(t):""}},e.nice=function(){return d(U(d(),{floor:function(t){return A(Math.floor(p(t)))},ceil:function(t){return A(Math.ceil(p(t)))}}))},e.copy=function(){return S(e,V().base(f))},e}function Z(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function K(){var r=1,t=Q(function(e,n){return(n=Z(n,r)-(e=Z(e,r)))?function(t){return(Z(t,r)-e)/n}:x(n)},function(e,n){return n=Z(n,r)-(e=Z(e,r)),function(t){return Z(e+n*t,1/r)}}),e=t.domain;return t.exponent=function(t){return arguments.length?(r=+t,e(e())):r},t.copy=function(){return S(t,K().exponent(r))},j(t)}function J(){return K().exponent(.5)}function X(){var i=[],n=[],r=[];function o(){var t=0,e=Math.max(1,n.length);for(r=new Array(e-1);++t<e;)r[t-1]=f(i,t/e);return a}function a(t){if(!isNaN(t=+t))return n[c(r,t)]}return a.invertExtent=function(t){var e=n.indexOf(t);return e<0?[NaN,NaN]:[0<e?r[e-1]:i[0],e<r.length?r[e]:i[i.length-1]]},a.domain=function(t){if(!arguments.length)return i.slice();i=[];for(var e,n=0,r=t.length;n<r;++n)null==(e=t[n])||isNaN(e=+e)||i.push(e);return i.sort(s),o()},a.range=function(t){return arguments.length?(n=m.call(t),o()):n.slice()},a.quantiles=function(){return r.slice()},a.copy=function(){return X().domain(i).range(n)},a}function q(){var n=0,r=1,i=1,o=[.5],a=[0,1];function e(t){if(t<=t)return a[c(o,t,0,i)]}function s(){var t=-1;for(o=new Array(i);++t<i;)o[t]=((t+1)*r-(t-i)*n)/(i+1);return e}return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],s()):[n,r]},e.range=function(t){return arguments.length?(i=(a=m.call(t)).length-1,s()):a.slice()},e.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:i<=e?[o[i-1],r]:[o[e-1],o[e]]},e.copy=function(){return q().domain([n,r]).range(a)},j(e)}function $(){var n=[.5],r=[0,1],e=1;function i(t){if(t<=t)return r[c(n,t,0,e)]}return i.domain=function(t){return arguments.length?(n=m.call(t),e=Math.min(n.length,r.length-1),i):n.slice()},i.range=function(t){return arguments.length?(r=m.call(t),e=Math.min(n.length,r.length-1),i):r.slice()},i.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},i.copy=function(){return $().domain(n).range(r)},i}var tt=new Date,et=new Date;function nt(o,a,n,r){function s(t){return o(t=new Date(+t)),t}return(s.floor=s).ceil=function(t){return o(t=new Date(t-1)),a(t,1),o(t),t},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return a(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(t,e,n){var r,i=[];if(t=s.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return i;for(;i.push(r=new Date(+t)),a(t,n),o(t),r<t&&t<e;);return i},s.filter=function(n){return nt(function(t){if(t<=t)for(;o(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;a(t,-1),!n(t););else for(;0<=--e;)for(;a(t,1),!n(t););})},n&&(s.count=function(t,e){return tt.setTime(+t),et.setTime(+e),o(tt),o(et),Math.floor(n(tt,et))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?s.filter(r?function(t){return r(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var rt=nt(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});rt.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?nt(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):rt:null};var it=rt,ot=(rt.range,nt(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()})),at=ot,st=(ot.range,nt(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()})),ct=st,lt=(st.range,nt(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()})),ut=lt,ht=(lt.range,nt(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1})),dt=ht;ht.range;function ft(e){return nt(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}var pt=ft(0),At=ft(1),gt=ft(2),bt=ft(3),mt=ft(4),yt=ft(5),_t=ft(6),vt=(pt.range,At.range,gt.range,bt.range,mt.range,yt.range,_t.range,nt(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()})),wt=vt,xt=(vt.range,nt(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));xt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?nt(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};var Mt=xt,Ct=(xt.range,nt(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()})),Et=Ct,Bt=(Ct.range,nt(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()})),It=Bt,kt=(Bt.range,nt(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1})),Dt=kt;kt.range;function Tt(e){return nt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Nt=Tt(0),St=Tt(1),Qt=Tt(2),Lt=Tt(3),zt=Tt(4),jt=Tt(5),Ft=Tt(6),Ot=(Nt.range,St.range,Qt.range,Lt.range,zt.range,jt.range,Ft.range,nt(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()})),Ut=Ot,Yt=(Ot.range,nt(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));Yt.every=function(n){return isFinite(n=Math.floor(n))&&0<n?nt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var Wt=Yt;Yt.range;function Gt(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Rt(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pt(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}var Ht,Vt,Zt,Kt,Jt,Xt,qt,$t,te,ee,ne,re,ie,oe,ae,se,ce,le,ue,he,de,fe,pe,Ae,ge,be,me={"-":"",_:" ",0:"0"},ye=/^\s*\d+/,_e=/^%/,ve=/[\\^$*+?|[\]().{}]/g;function we(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function xe(t){return t.replace(ve,"\\$&")}function Me(t){return new RegExp("^(?:"+t.map(xe).join("|")+")","i")}function Ce(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Ee(t,e,n){var r=ye.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Be(t,e,n){var r=ye.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Ie(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function ke(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function De(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Te(t,e,n){var r=ye.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ne(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function Se(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qe(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Le(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ze(t,e,n){var r=ye.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function je(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Fe(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Oe(t,e,n){var r=ye.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ue(t,e,n){var r=ye.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ye(t,e,n){var r=ye.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function We(t,e,n){var r=_e.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ge(t,e,n){var r=ye.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Re(t,e,n){var r=ye.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Pe(t,e){return we(t.getDate(),e,2)}function He(t,e){return we(t.getHours(),e,2)}function Ve(t,e){return we(t.getHours()%12||12,e,2)}function Ze(t,e){return we(1+dt.count(Mt(t),t),e,3)}function Ke(t,e){return we(t.getMilliseconds(),e,3)}function Je(t,e){return Ke(t,e)+"000"}function Xe(t,e){return we(t.getMonth()+1,e,2)}function qe(t,e){return we(t.getMinutes(),e,2)}function $e(t,e){return we(t.getSeconds(),e,2)}function tn(t){var e=t.getDay();return 0===e?7:e}function en(t,e){return we(pt.count(Mt(t),t),e,2)}function nn(t,e){var n=t.getDay();return t=4<=n||0===n?mt(t):mt.ceil(t),we(mt.count(Mt(t),t)+(4===Mt(t).getDay()),e,2)}function rn(t){return t.getDay()}function on(t,e){return we(At.count(Mt(t),t),e,2)}function an(t,e){return we(t.getFullYear()%100,e,2)}function sn(t,e){return we(t.getFullYear()%1e4,e,4)}function cn(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+we(e/60|0,"0",2)+we(e%60,"0",2)}function ln(t,e){return we(t.getUTCDate(),e,2)}function un(t,e){return we(t.getUTCHours(),e,2)}function hn(t,e){return we(t.getUTCHours()%12||12,e,2)}function dn(t,e){return we(1+Dt.count(Wt(t),t),e,3)}function fn(t,e){return we(t.getUTCMilliseconds(),e,3)}function pn(t,e){return fn(t,e)+"000"}function An(t,e){return we(t.getUTCMonth()+1,e,2)}function gn(t,e){return we(t.getUTCMinutes(),e,2)}function bn(t,e){return we(t.getUTCSeconds(),e,2)}function mn(t){var e=t.getUTCDay();return 0===e?7:e}function yn(t,e){return we(Nt.count(Wt(t),t),e,2)}function _n(t,e){var n=t.getUTCDay();return t=4<=n||0===n?zt(t):zt.ceil(t),we(zt.count(Wt(t),t)+(4===Wt(t).getUTCDay()),e,2)}function vn(t){return t.getUTCDay()}function wn(t,e){return we(St.count(Wt(t),t),e,2)}function xn(t,e){return we(t.getUTCFullYear()%100,e,2)}function Mn(t,e){return we(t.getUTCFullYear()%1e4,e,4)}function Cn(){return"+0000"}function En(){return"%"}function Bn(t){return+t}function In(t){return Math.floor(+t/1e3)}function kn(c,l){return function(t){var e,n,r,i=[],o=-1,a=0,s=c.length;for(t instanceof Date||(t=new Date(+t));++o<s;)37===c.charCodeAt(o)&&(i.push(c.slice(a,o)),null!=(n=me[e=c.charAt(++o)])?e=c.charAt(++o):n="e"===e?" ":"0",(r=l[e])&&(e=r(t,n)),i.push(e),a=o+1);return i.push(c.slice(a,o)),i.join("")}}function Dn(i,o){return function(t){var e,n,r=Pt(1900);if(Tn(r,i,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=Rt(Pt(r.y))).getUTCDay())||0===n?St.ceil(e):St(e),e=Dt.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=o(Pt(r.y))).getDay())||0===n?At.ceil(e):At(e),e=dt.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?Rt(Pt(r.y)).getUTCDay():o(Pt(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Rt(r)):o(r)}}function Tn(t,e,n,r){for(var i,o,a=0,s=e.length,c=n.length;a<s;){if(c<=r)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=be[i in me?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}Xt=(Jt={dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}).dateTime,qt=Jt.date,$t=Jt.time,te=Jt.periods,ee=Jt.days,ne=Jt.shortDays,re=Jt.months,ie=Jt.shortMonths,oe=Me(te),ae=Ce(te),se=Me(ee),ce=Ce(ee),le=Me(ne),ue=Ce(ne),he=Me(re),de=Ce(re),fe=Me(ie),pe=Ce(ie),ge={a:function(t){return ne[t.getUTCDay()]},A:function(t){return ee[t.getUTCDay()]},b:function(t){return ie[t.getUTCMonth()]},B:function(t){return re[t.getUTCMonth()]},c:null,d:ln,e:ln,f:pn,H:un,I:hn,j:dn,L:fn,m:An,M:gn,p:function(t){return te[+(12<=t.getUTCHours())]},Q:Bn,s:In,S:bn,u:mn,U:yn,V:_n,w:vn,W:wn,x:null,X:null,y:xn,Y:Mn,Z:Cn,"%":En},be={a:function(t,e,n){var r=le.exec(e.slice(n));return r?(t.w=ue[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=se.exec(e.slice(n));return r?(t.w=ce[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=fe.exec(e.slice(n));return r?(t.m=pe[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=he.exec(e.slice(n));return r?(t.m=de[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return Tn(t,Xt,e,n)},d:Le,e:Le,f:Ye,H:je,I:je,j:ze,L:Ue,m:Qe,M:Fe,p:function(t,e,n){var r=oe.exec(e.slice(n));return r?(t.p=ae[r[0].toLowerCase()],n+r[0].length):-1},Q:Ge,s:Re,S:Oe,u:Be,U:Ie,V:ke,w:Ee,W:De,x:function(t,e,n){return Tn(t,qt,e,n)},X:function(t,e,n){return Tn(t,$t,e,n)},y:Ne,Y:Te,Z:Se,"%":We},(Ae={a:function(t){return ne[t.getDay()]},A:function(t){return ee[t.getDay()]},b:function(t){return ie[t.getMonth()]},B:function(t){return re[t.getMonth()]},c:null,d:Pe,e:Pe,f:Je,H:He,I:Ve,j:Ze,L:Ke,m:Xe,M:qe,p:function(t){return te[+(12<=t.getHours())]},Q:Bn,s:In,S:$e,u:tn,U:en,V:nn,w:rn,W:on,x:null,X:null,y:an,Y:sn,Z:cn,"%":En}).x=kn(qt,Ae),Ae.X=kn($t,Ae),Ae.c=kn(Xt,Ae),ge.x=kn(qt,ge),ge.X=kn($t,ge),ge.c=kn(Xt,ge),Vt=(Ht={format:function(t){var e=kn(t+="",Ae);return e.toString=function(){return t},e},parse:function(t){var e=Dn(t+="",Gt);return e.toString=function(){return t},e},utcFormat:function(t){var e=kn(t+="",ge);return e.toString=function(){return t},e},utcParse:function(t){var e=Dn(t,Rt);return e.toString=function(){return t},e}}).format,Ht.parse,Zt=Ht.utcFormat,Kt=Ht.utcParse;var Nn="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||Zt(Nn);+new Date("2000-01-01T00:00:00.000Z")||Kt(Nn);var Sn=1e3,Qn=60*Sn,Ln=60*Qn,zn=24*Ln,jn=7*zn,Fn=30*zn,On=365*zn;function Un(t){return new Date(t)}function Yn(t){return t instanceof Date?+t:+new Date(+t)}function Wn(a,e,n,r,i,o,s,c,l){var u=Q(D,B.c),h=u.invert,d=u.domain,f=l(".%L"),p=l(":%S"),A=l("%I:%M"),g=l("%I %p"),b=l("%a %d"),m=l("%b %d"),y=l("%B"),_=l("%Y"),v=[[s,1,Sn],[s,5,5*Sn],[s,15,15*Sn],[s,30,30*Sn],[o,1,Qn],[o,5,5*Qn],[o,15,15*Qn],[o,30,30*Qn],[i,1,Ln],[i,3,3*Ln],[i,6,6*Ln],[i,12,12*Ln],[r,1,zn],[r,2,2*zn],[n,1,jn],[e,1,Fn],[e,3,3*Fn],[a,1,On]];function w(t){return(s(t)<t?f:o(t)<t?p:i(t)<t?A:r(t)<t?g:e(t)<t?n(t)<t?b:m:a(t)<t?y:_)(t)}function x(t,e,n,r){if(null==t&&(t=10),"number"==typeof t){var i=Math.abs(n-e)/t,o=M(function(t){return t[2]}).right(v,i);t=o===v.length?(r=C(e/On,n/On,t),a):o?(r=(o=v[i/v[o-1][2]<v[o][2]/i?o-1:o])[1],o[0]):(r=Math.max(C(e,n,t),1),c)}return null==r?t:t.every(r)}return u.invert=function(t){return new Date(h(t))},u.domain=function(t){return arguments.length?d(E.call(t,Yn)):d().map(Un)},u.ticks=function(t,e){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=(n=x(t,i,o,e))?n.range(i,o+1):[],a?n.reverse():n},u.tickFormat=function(t,e){return null==e?w:l(e)},u.nice=function(t,e){var n=d();return(t=x(t,n[0],n[n.length-1],e))?d(U(n,t)):u},u.copy=function(){return S(u,Wn(a,e,n,r,i,o,s,c,l))},u}function Gn(){return Wn(Mt,wt,pt,dt,ut,ct,at,it,Vt).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Rn(){return Wn(Wt,Ut,Nt,Dt,It,Et,at,it,Zt).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function Pn(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function Hn(t){(t<0||1<t)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return er.h=360*t-100,er.s=1.5-1.5*e,er.l=.8-.9*e,er+""}var Vn=Pn("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zn=Pn("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Kn=Pn("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Jn=Pn("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Xn=n(1),qn=Object(B.b)(Object(Xn.b)(300,.5,0),Object(Xn.b)(-240,.5,1)),$n=Object(B.b)(Object(Xn.b)(-100,.75,.35),Object(Xn.b)(80,1.5,.8)),tr=Object(B.b)(Object(Xn.b)(260,.75,.35),Object(Xn.b)(80,1.5,.8)),er=Object(Xn.b)();function nr(e){var n=e.length;return function(t){return e[Math.max(0,Math.min(n-1,Math.floor(t*n)))]}}var rr=nr(Pn("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ir=nr(Pn("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),or=nr(Pn("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ar=nr(Pn("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function sr(n){var r=0,i=1,o=!1;function e(t){var e=(t-r)/(i-r);return n(o?Math.max(0,Math.min(1,e)):e)}return e.domain=function(t){return arguments.length?(r=+t[0],i=+t[1],e):[r,i]},e.clamp=function(t){return arguments.length?(o=!!t,e):o},e.interpolator=function(t){return arguments.length?(n=t,e):n},e.copy=function(){return sr(n).domain([r,i]).clamp(o)},j(e)}n.d(e,"scaleBand",function(){return v}),n.d(e,"scalePoint",function(){return w}),n.d(e,"scaleIdentity",function(){return O}),n.d(e,"scaleLinear",function(){return F}),n.d(e,"scaleLog",function(){return V}),n.d(e,"scaleOrdinal",function(){return _}),n.d(e,"scaleImplicit",function(){return y}),n.d(e,"scalePow",function(){return K}),n.d(e,"scaleSqrt",function(){return J}),n.d(e,"scaleQuantile",function(){return X}),n.d(e,"scaleQuantize",function(){return q}),n.d(e,"scaleThreshold",function(){return $}),n.d(e,"scaleTime",function(){return Gn}),n.d(e,"scaleUtc",function(){return Rn}),n.d(e,"schemeCategory10",function(){return Vn}),n.d(e,"schemeCategory20b",function(){return Zn}),n.d(e,"schemeCategory20c",function(){return Kn}),n.d(e,"schemeCategory20",function(){return Jn}),n.d(e,"interpolateCubehelixDefault",function(){return qn}),n.d(e,"interpolateRainbow",function(){return Hn}),n.d(e,"interpolateWarm",function(){return $n}),n.d(e,"interpolateCool",function(){return tr}),n.d(e,"interpolateViridis",function(){return rr}),n.d(e,"interpolateMagma",function(){return ir}),n.d(e,"interpolateInferno",function(){return or}),n.d(e,"interpolatePlasma",function(){return ar}),n.d(e,"scaleSequential",function(){return sr})},function(t,e,n){"use strict";n.r(e);function D(t){return function(){return t}}var T=n(8),N=n(7),S=n(2),Q=n(0),L=n(11);function z(t,e,n){this.target=t,this.type=e,this.transform=n}function j(t,e,n){this.k=t,this.x=e,this.y=n}j.prototype={constructor:j,scale:function(t){return 1===t?this:new j(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new j(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var F=new j(1,0,0);function r(t){return t.__zoom||F}function O(){Q.event.stopImmediatePropagation()}r.prototype=j.prototype;function U(){Q.event.preventDefault(),Q.event.stopImmediatePropagation()}function Y(){return!Q.event.button}function W(){var t,e,n=this;return e=n instanceof SVGElement?(t=(n=n.ownerSVGElement||n).width.baseVal.value,n.height.baseVal.value):(t=n.clientWidth,n.clientHeight),[[0,0],[t,e]]}function G(){return this.__zoom||F}function R(){return-Q.event.deltaY*(Q.event.deltaMode?120:1)/500}function P(){return"ontouchstart"in this}function H(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(r<i?(r+i)/2:Math.min(0,r)||Math.max(0,i),o<a?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function i(){var f,o,s=Y,u=W,p=H,i=R,e=P,a=[0,1/0],A=[[-1/0,-1/0],[1/0,1/0]],c=250,h=S.i,l=[],n=Object(T.a)("start","zoom","end"),d=500,g=150,b=0;function m(t){t.property("__zoom",G).on("wheel.zoom",r).on("mousedown.zoom",C).on("dblclick.zoom",E).filter(e).on("touchstart.zoom",B).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(t,e){return(e=Math.max(a[0],Math.min(a[1],e)))===t.k?t:new j(e,t.x,t.y)}function _(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new j(t.k,r,i)}function v(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,c,l){t.on("start.zoom",function(){x(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=x(this,t),e=u.apply(this,t),i=l||v(e),o=Math.max(e[1][0]-e[0][0],e[1][1]-e[0][1]),n=this.__zoom,a="function"==typeof c?c.apply(this,t):c,s=h(n.invert(i).concat(o/n.k),a.invert(i).concat(o/a.k));return function(t){if(1===t)t=a;else{var e=s(t),n=o/e[2];t=new j(n,i[0]-e[0]*n,i[1]-e[1]*n)}r.zoom(null,t)}})}function x(t,e){for(var n,r=0,i=l.length;r<i;++r)if((n=l[r]).that===t)return n;return new M(t,e)}function M(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=u.apply(t,e)}function r(){if(s.apply(this,arguments)){var t=x(this,arguments),e=this.__zoom,n=Math.max(a[0],Math.min(a[1],e.k*Math.pow(2,i.apply(this,arguments)))),r=Object(Q.mouse)(this);if(t.wheel)t.mouse[0][0]===r[0]&&t.mouse[0][1]===r[1]||(t.mouse[1]=e.invert(t.mouse[0]=r)),clearTimeout(t.wheel);else{if(e.k===n)return;t.mouse=[r,e.invert(r)],Object(L.a)(this),t.start()}U(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},g),t.zoom("mouse",p(_(y(e,n),t.mouse[0],t.mouse[1]),t.extent,A))}}function C(){if(!o&&s.apply(this,arguments)){var n=x(this,arguments),t=Object(Q.select)(Q.event.view).on("mousemove.zoom",function(){if(U(),!n.moved){var t=Q.event.clientX-r,e=Q.event.clientY-i;n.moved=b<t*t+e*e}n.zoom("mouse",p(_(n.that.__zoom,n.mouse[0]=Object(Q.mouse)(n.that),n.mouse[1]),n.extent,A))},!0).on("mouseup.zoom",function(){t.on("mousemove.zoom mouseup.zoom",null),Object(N.dragEnable)(Q.event.view,n.moved),U(),n.end()},!0),e=Object(Q.mouse)(this),r=Q.event.clientX,i=Q.event.clientY;Object(N.dragDisable)(Q.event.view),O(),n.mouse=[e,this.__zoom.invert(e)],Object(L.a)(this),n.start()}}function E(){if(s.apply(this,arguments)){var t=this.__zoom,e=Object(Q.mouse)(this),n=t.invert(e),r=t.k*(Q.event.shiftKey?.5:2),i=p(_(y(t,r),e,n),u.apply(this,arguments),A);U(),0<c?Object(Q.select)(this).transition().duration(c).call(w,i,e):Object(Q.select)(this).call(m.transform,i)}}function B(){if(s.apply(this,arguments)){var t,e,n,r,i=x(this,arguments),o=Q.event.changedTouches,a=o.length;for(O(),e=0;e<a;++e)n=o[e],r=[r=Object(Q.touch)(this,o,n.identifier),this.__zoom.invert(r),n.identifier],i.touch0?i.touch1||(i.touch1=r):(i.touch0=r,t=!0);if(f&&(f=clearTimeout(f),!i.touch1))return i.end(),void((r=Object(Q.select)(this).on("dblclick.zoom"))&&r.apply(this,arguments));t&&(f=setTimeout(function(){f=null},d),Object(L.a)(this),i.start())}}function I(){var t,e,n,r,i=x(this,arguments),o=Q.event.changedTouches,a=o.length;for(U(),f=f&&clearTimeout(f),t=0;t<a;++t)e=o[t],n=Object(Q.touch)(this,o,e.identifier),i.touch0&&i.touch0[2]===e.identifier?i.touch0[0]=n:i.touch1&&i.touch1[2]===e.identifier&&(i.touch1[0]=n);if(e=i.that.__zoom,i.touch1){var s=i.touch0[0],c=i.touch0[1],l=i.touch1[0],u=i.touch1[1],h=(h=l[0]-s[0])*h+(h=l[1]-s[1])*h,d=(d=u[0]-c[0])*d+(d=u[1]-c[1])*d;e=y(e,Math.sqrt(h/d)),n=[(s[0]+l[0])/2,(s[1]+l[1])/2],r=[(c[0]+u[0])/2,(c[1]+u[1])/2]}else{if(!i.touch0)return;n=i.touch0[0],r=i.touch0[1]}i.zoom("touch",p(_(e,n,r),i.extent,A))}function k(){var t,e,n=x(this,arguments),r=Q.event.changedTouches,i=r.length;for(O(),o&&clearTimeout(o),o=setTimeout(function(){o=null},d),t=0;t<i;++t)e=r[t],n.touch0&&n.touch0[2]===e.identifier?delete n.touch0:n.touch1&&n.touch1[2]===e.identifier&&delete n.touch1;n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0?n.touch0[1]=this.__zoom.invert(n.touch0[0]):n.end()}return m.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",G),t!==n?w(t,e):n.interrupt().each(function(){x(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},m.scaleBy=function(t,e){m.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)})},m.scaleTo=function(t,o){m.transform(t,function(){var t=u.apply(this,arguments),e=this.__zoom,n=v(t),r=e.invert(n),i="function"==typeof o?o.apply(this,arguments):o;return p(_(y(e,i),n,r),t,A)})},m.translateBy=function(t,e,n){m.transform(t,function(){return p(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),u.apply(this,arguments),A)})},m.translateTo=function(t,r,i){m.transform(t,function(){var t=u.apply(this,arguments),e=this.__zoom,n=v(t);return p(F.translate(n[0],n[1]).scale(e.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),t,A)})},M.prototype={start:function(){return 1==++this.active&&(this.index=l.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(l.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){Object(Q.customEvent)(new z(m,t,this.that.__zoom),n.apply,n,[t,this.that,this.args])}},m.wheelDelta=function(t){return arguments.length?(i="function"==typeof t?t:D(+t),m):i},m.filter=function(t){return arguments.length?(s="function"==typeof t?t:D(!!t),m):s},m.touchable=function(t){return arguments.length?(e="function"==typeof t?t:D(!!t),m):e},m.extent=function(t){return arguments.length?(u="function"==typeof t?t:D([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):u},m.scaleExtent=function(t){return arguments.length?(a[0]=+t[0],a[1]=+t[1],m):[a[0],a[1]]},m.translateExtent=function(t){return arguments.length?(A[0][0]=+t[0][0],A[1][0]=+t[1][0],A[0][1]=+t[0][1],A[1][1]=+t[1][1],m):[[A[0][0],A[0][1]],[A[1][0],A[1][1]]]},m.constrain=function(t){return arguments.length?(p=t,m):p},m.duration=function(t){return arguments.length?(c=+t,m):c},m.interpolate=function(t){return arguments.length?(h=t,m):h},m.on=function(){var t=n.on.apply(n,arguments);return t===n?m:t},m.clickDistance=function(t){return arguments.length?(b=(t=+t)*t,m):Math.sqrt(b)},m}n.d(e,"zoom",function(){return i}),n.d(e,"zoomTransform",function(){return r}),n.d(e,"zoomIdentity",function(){return F})},function(t,e,n){"use strict";n.r(e);var c=n(8),U=n(7),l=n(2),Y=n(0),W=n(11),u=function(t){return function(){return t}},h=function(t,e,n){this.target=t,this.type=e,this.selection=n};function G(){Y.event.stopImmediatePropagation()}var R=function(){Y.event.preventDefault(),Y.event.stopImmediatePropagation()},P={name:"drag"},H={name:"space"},V={name:"handle"},Z={name:"center"},K={name:"x",handles:["e","w"].map(d),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},J={name:"y",handles:["n","s"].map(d),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},r={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(d),input:function(t){return t},output:function(t){return t}},X={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},q={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},$={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},tt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},et={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function d(t){return{type:t}}function f(){return!Y.event.button}function p(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function nt(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function rt(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function i(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function o(){return A(K)}function a(){return A(J)}function s(){return A(r)}function A(L){var z,e=p,j=f,n=Object(c.a)(i,"start","brush","end"),r=6;function i(t){var e=t.property("__brush",s).selectAll(".overlay").data([d("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",X.overlay).merge(e).each(function(){var t=nt(this).extent;Object(Y.select)(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([d("selection")]).enter().append("rect").attr("class","selection").attr("cursor",X.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=t.selectAll(".handle").data(L.handles,function(t){return t.type});n.exit().remove(),n.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return X[t.type]}),t.each(F).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",a)}function F(){var t=Object(Y.select)(this),e=nt(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-r/2:e[0][0]-r/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-r/2:e[0][1]-r/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+r:r}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+r:r})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function O(t,e){return t.__brush.emitter||new o(t,e)}function o(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function a(){if(Y.event.touches){if(Y.event.changedTouches.length<Y.event.touches.length)return R()}else if(z)return;if(j.apply(this,arguments)){var e,n,r,i,o,a,s,c,l,u,h,d,f,p=this,A=Y.event.target.__data__.type,g="selection"===(Y.event.metaKey?A="overlay":A)?P:Y.event.altKey?Z:V,b=L===J?null:tt[A],m=L===K?null:et[A],y=nt(p),t=y.extent,_=y.selection,v=t[0][0],w=t[0][1],x=t[1][0],M=t[1][1],C=!1,E=Object(Y.mouse)(p),B=E,I=O(p,arguments).beforestart();"overlay"===A?y.selection=_=[[e=L===J?v:E[0],r=L===K?w:E[1]],[o=L===J?x:e,s=L===K?M:r]]:(e=_[0][0],r=_[0][1],o=_[1][0],s=_[1][1]),n=e,i=r,a=o,c=s;var k=Object(Y.select)(p).attr("pointer-events","none"),D=k.selectAll(".overlay").attr("cursor",X[A]);if(Y.event.touches)k.on("touchmove.brush",N,!0).on("touchend.brush touchcancel.brush",Q,!0);else{var T=Object(Y.select)(Y.event.view).on("keydown.brush",function(){switch(Y.event.keyCode){case 16:C=b&&m;break;case 18:g===V&&(b&&(o=a-l*b,e=n+l*b),m&&(s=c-u*m,r=i+u*m),g=Z,S());break;case 32:g!==V&&g!==Z||(b<0?o=a-l:0<b&&(e=n-l),m<0?s=c-u:0<m&&(r=i-u),g=H,D.attr("cursor",X.selection),S());break;default:return}R()},!0).on("keyup.brush",function(){switch(Y.event.keyCode){case 16:C&&(d=f=C=!1,S());break;case 18:g===Z&&(b<0?o=a:0<b&&(e=n),m<0?s=c:0<m&&(r=i),g=V,S());break;case 32:g===H&&(g=Y.event.altKey?(b&&(o=a-l*b,e=n+l*b),m&&(s=c-u*m,r=i+u*m),Z):(b<0?o=a:0<b&&(e=n),m<0?s=c:0<m&&(r=i),V),D.attr("cursor",X[A]),S());break;default:return}R()},!0).on("mousemove.brush",N,!0).on("mouseup.brush",Q,!0);Object(U.dragDisable)(Y.event.view)}G(),Object(W.a)(p),F.call(p),I.start()}function N(){var t=Object(Y.mouse)(p);!C||d||f||(Math.abs(t[0]-B[0])>Math.abs(t[1]-B[1])?f=!0:d=!0),B=t,h=!0,R(),S()}function S(){var t;switch(l=B[0]-E[0],u=B[1]-E[1],g){case H:case P:b&&(l=Math.max(v-e,Math.min(x-o,l)),n=e+l,a=o+l),m&&(u=Math.max(w-r,Math.min(M-s,u)),i=r+u,c=s+u);break;case V:b<0?(l=Math.max(v-e,Math.min(x-e,l)),n=e+l,a=o):0<b&&(l=Math.max(v-o,Math.min(x-o,l)),n=e,a=o+l),m<0?(u=Math.max(w-r,Math.min(M-r,u)),i=r+u,c=s):0<m&&(u=Math.max(w-s,Math.min(M-s,u)),i=r,c=s+u);break;case Z:b&&(n=Math.max(v,Math.min(x,e-l*b)),a=Math.max(v,Math.min(x,o+l*b))),m&&(i=Math.max(w,Math.min(M,r-u*m)),c=Math.max(w,Math.min(M,s+u*m)))}a<n&&(b*=-1,t=e,e=o,o=t,t=n,n=a,a=t,A in q&&D.attr("cursor",X[A=q[A]])),c<i&&(m*=-1,t=r,r=s,s=t,t=i,i=c,c=t,A in $&&D.attr("cursor",X[A=$[A]])),y.selection&&(_=y.selection),d&&(n=_[0][0],a=_[1][0]),f&&(i=_[0][1],c=_[1][1]),_[0][0]===n&&_[0][1]===i&&_[1][0]===a&&_[1][1]===c||(y.selection=[[n,i],[a,c]],F.call(p),I.brush())}function Q(){if(G(),Y.event.touches){if(Y.event.touches.length)return;z&&clearTimeout(z),z=setTimeout(function(){z=null},500),k.on("touchmove.brush touchend.brush touchcancel.brush",null)}else Object(U.dragEnable)(Y.event.view,h),T.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);k.attr("pointer-events","all"),D.attr("cursor",X.overlay),y.selection&&(_=y.selection),rt(_)&&(y.selection=null,F.call(p)),I.end()}}function s(){var t=this.__brush||{selection:null};return t.extent=e.apply(this,arguments),t.dim=L,t}return i.move=function(t,s){t.selection?t.on("start.brush",function(){O(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){O(this,arguments).end()}).tween("brush",function(){var e=this,n=e.__brush,r=O(e,arguments),t=n.selection,i=L.input("function"==typeof s?s.apply(this,arguments):s,n.extent),o=Object(l.a)(t,i);function a(t){n.selection=1===t&&rt(i)?null:o(t),F.call(e),r.brush()}return t&&i?a:a(1)}):t.each(function(){var t=arguments,e=this.__brush,n=L.input("function"==typeof s?s.apply(this,t):s,e.extent),r=O(this,t).beforestart();Object(W.a)(this),e.selection=null==n||rt(n)?null:n,F.call(this),r.start().brush().end()})},o.prototype={beforestart:function(){return 1==++this.active&&((this.state.emitter=this).starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){Object(Y.customEvent)(new h(i,t,L.output(this.state.selection)),n.apply,n,[t,this.that,this.args])}},i.extent=function(t){return arguments.length?(e="function"==typeof t?t:u([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),i):e},i.filter=function(t){return arguments.length?(j="function"==typeof t?t:u(!!t),i):j},i.handleSize=function(t){return arguments.length?(r=+t,i):r},i.on=function(){var t=n.on.apply(n,arguments);return t===n?i:t},i}n.d(e,"brush",function(){return s}),n.d(e,"brushX",function(){return o}),n.d(e,"brushY",function(){return a}),n.d(e,"brushSelection",function(){return i})}],i.c=o,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=38);function i(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var n,o});
//# sourceMappingURL=escher.min.js.map